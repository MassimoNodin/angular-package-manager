import './polyfills.server.mjs';
import{A as Pt,Aa as ts,B as xe,C as I,Ca as oe,D as wi,Da as is,E as M,Ea as ns,F as Pn,G as a,H as o,I as fe,J as pe,K as E,L as k,M as me,N as l,O as F,P as G,Q as T,R as N,S as O,T as Fe,U as x,V as Rt,W as Lt,Y as qr,a as Rr,aa as Hr,b as Lr,c as Br,ca as $r,d as Ei,e as Ur,ea as zr,f as jr,fa as Bt,g as Si,ga as et,h as Ve,ha as Kr,i as On,ia as Rn,j as In,ja as ki,k as ht,l as Wr,la as Q,m as J,ma as ge,n as C,na as Di,o as Vn,oa as Z,p as te,pa as Yr,q as Gr,qa as Xr,r as Fn,ra as Jr,s as j,sa as Qr,t as W,ta as Zr,u as qe,v as It,w as Vt,wa as es,x as f,y as v,z as Ft}from"./chunk-D5X2F6YX.mjs";import{a as U,b as ee,c as P,e as K,f as Pa,g as ce,h as xi}from"./chunk-5XUXGTUW.mjs";var Ns=K((Wh,Ts)=>{"use strict";var vt=P("fs"),Ms=P("url"),Ll=P("child_process").spawn;Ts.exports=zn;zn.XMLHttpRequest=zn;function zn(i){"use strict";i=i||{};var e=this,t=P("http"),n=P("https"),r,s,c={},d=!1,u={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},p=Object.assign({},u),h=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],m=["TRACE","TRACK","CONNECT"],_=!1,D=!1,V=!1,y={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),this.status=null,this.statusText=null;var A=function(g){return d||g&&h.indexOf(g.toLowerCase())===-1},ue=function(g){return g&&m.indexOf(g)===-1};this.open=function(g,b,he,se,ke){if(this.abort(),D=!1,V=!1,!ue(g))throw new Error("SecurityError: Request method not allowed");c={method:g,url:b.toString(),async:typeof he!="boolean"?!0:he,user:se||null,password:ke||null},X(this.OPENED)},this.setDisableHeaderCheck=function(g){d=g},this.setRequestHeader=function(g,b){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!A(g))return console.warn('Refused to set unsafe header "'+g+'"'),!1;if(_)throw new Error("INVALID_STATE_ERR: send flag is true");return p[g]=b,!0},this.getResponseHeader=function(g){return typeof g=="string"&&this.readyState>this.OPENED&&s.headers[g.toLowerCase()]&&!D?s.headers[g.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||D)return"";var g="";for(var b in s.headers)b!=="set-cookie"&&b!=="set-cookie2"&&(g+=b+": "+s.headers[b]+`\r
`);return g.substr(0,g.length-2)},this.getRequestHeader=function(g){return typeof g=="string"&&p[g]?p[g]:""},this.send=function(g){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(_)throw new Error("INVALID_STATE_ERR: send has already been called");var b=!1,he=!1,se=Ms.parse(c.url),ke;switch(se.protocol){case"https:":b=!0;case"http:":ke=se.hostname;break;case"file:":he=!0;break;case void 0:case"":ke="localhost";break;default:throw new Error("Protocol not supported.")}if(he){if(c.method!=="GET")throw new Error("XMLHttpRequest: Only GET method is supported");if(c.async)vt.readFile(unescape(se.pathname),function(Ne,st){Ne?e.handleError(Ne,Ne.errno||-1):(e.status=200,e.responseText=st.toString("utf8"),e.response=st,X(e.DONE))});else try{this.response=vt.readFileSync(unescape(se.pathname)),this.responseText=this.response.toString("utf8"),this.status=200,X(e.DONE)}catch(Ne){this.handleError(Ne,Ne.errno||-1)}return}var We=se.port||(b?443:80),rt=se.pathname+(se.search?se.search:"");if(p.Host=ke,b&&We===443||We===80||(p.Host+=":"+se.port),c.user){typeof c.password>"u"&&(c.password="");var Tn=new Buffer(c.user+":"+c.password);p.Authorization="Basic "+Tn.toString("base64")}c.method==="GET"||c.method==="HEAD"?g=null:g?(p["Content-Length"]=Buffer.isBuffer(g)?g.length:Buffer.byteLength(g),p["Content-Type"]||(p["Content-Type"]="text/plain;charset=UTF-8")):c.method==="POST"&&(p["Content-Length"]=0);var Na=i.agent||!1,Ge={host:ke,port:We,path:rt,method:c.method,headers:p,agent:Na};if(b&&(Ge.pfx=i.pfx,Ge.key=i.key,Ge.passphrase=i.passphrase,Ge.cert=i.cert,Ge.ca=i.ca,Ge.ciphers=i.ciphers,Ge.rejectUnauthorized=i.rejectUnauthorized!==!1),D=!1,c.async){var Vr=b?n.request:t.request;_=!0,e.dispatchEvent("readystatechange");var Fr=function(Ne){if(s=Ne,s.statusCode===302||s.statusCode===303||s.statusCode===307){c.url=s.headers.location;var st=Ms.parse(c.url);ke=st.hostname;var Ze={hostname:st.hostname,port:st.port,path:st.path,method:s.statusCode===303?"GET":c.method,headers:p};b&&(Ze.pfx=i.pfx,Ze.key=i.key,Ze.passphrase=i.passphrase,Ze.cert=i.cert,Ze.ca=i.ca,Ze.ciphers=i.ciphers,Ze.rejectUnauthorized=i.rejectUnauthorized!==!1),r=Vr(Ze,Fr).on("error",Pr),r.end();return}X(e.HEADERS_RECEIVED),e.status=s.statusCode,s.on("data",function(Ci){if(Ci){var Fa=Buffer.from(Ci);e.response=Buffer.concat([e.response,Fa])}_&&X(e.LOADING)}),s.on("end",function(){_&&(_=!1,X(e.DONE),e.responseText=e.response.toString("utf8"))}),s.on("error",function(Ci){e.handleError(Ci)})},Pr=function(Ne){e.handleError(Ne)};r=Vr(Ge,Fr).on("error",Pr),i.autoUnref&&r.on("socket",Ne=>{Ne.unref()}),g&&r.write(g),r.end(),e.dispatchEvent("loadstart")}else{var Nt=".node-xmlhttprequest-content-"+process.pid,Ot=".node-xmlhttprequest-sync-"+process.pid;vt.writeFileSync(Ot,"","utf8");for(var Oa="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(b?"s":"")+".request;var options = "+JSON.stringify(Ge)+";var responseText = '';var responseData = Buffer.alloc(0);var req = doRequest(options, function(response) {response.on('data', function(chunk) {  var data = Buffer.from(chunk);  responseText += data.toString('utf8');  responseData = Buffer.concat([responseData, data]);});response.on('end', function() {fs.writeFileSync('"+Nt+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText, data: responseData.toString('base64')}}), 'utf8');fs.unlinkSync('"+Ot+"');});response.on('error', function(error) {fs.writeFileSync('"+Nt+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+Ot+"');});}).on('error', function(error) {fs.writeFileSync('"+Nt+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+Ot+"');});"+(g?"req.write('"+JSON.stringify(g).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",Ia=Ll(process.argv[0],["-e",Oa]),Jd;vt.existsSync(Ot););if(e.responseText=vt.readFileSync(Nt,"utf8"),Ia.stdin.end(),vt.unlinkSync(Nt),e.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var Va=JSON.parse(e.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,""));e.handleError(Va,503)}else{e.status=e.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1");var Nn=JSON.parse(e.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1"));s={statusCode:e.status,headers:Nn.data.headers},e.responseText=Nn.data.text,e.response=Buffer.from(Nn.data.data,"base64"),X(e.DONE,!0)}}},this.handleError=function(g,b){this.status=b||0,this.statusText=g,this.responseText=g.stack,D=!0,X(this.DONE)},this.abort=function(){r&&(r.abort(),r=null),p=Object.assign({},u),this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),D=V=!0,this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||_)&&this.readyState!==this.DONE&&(_=!1,X(this.DONE)),this.readyState=this.UNSENT},this.addEventListener=function(g,b){g in y||(y[g]=[]),y[g].push(b)},this.removeEventListener=function(g,b){g in y&&(y[g]=y[g].filter(function(he){return he!==b}))},this.dispatchEvent=function(g){if(typeof e["on"+g]=="function"&&(this.readyState===this.DONE&&c.async?setTimeout(function(){e["on"+g]()},0):e["on"+g]()),g in y)for(let b=0,he=y[g].length;b<he;b++)this.readyState===this.DONE?setTimeout(function(){y[g][b].call(e)},0):y[g][b].call(e)};var X=function(g){if(!(e.readyState===g||e.readyState===e.UNSENT&&V)&&(e.readyState=g,(c.async||e.readyState<e.OPENED||e.readyState===e.DONE)&&e.dispatchEvent("readystatechange"),e.readyState===e.DONE)){let b;V?b="abort":D?b="error":b="load",e.dispatchEvent(b),e.dispatchEvent("loadend")}}}});var $s=K((rf,Hs)=>{"use strict";var yt=1e3,bt=yt*60,Ct=bt*60,ot=Ct*24,Hl=ot*7,$l=ot*365.25;Hs.exports=function(i,e){e=e||{};var t=typeof i;if(t==="string"&&i.length>0)return zl(i);if(t==="number"&&isFinite(i))return e.long?Yl(i):Kl(i);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))};function zl(i){if(i=String(i),!(i.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*$l;case"weeks":case"week":case"w":return t*Hl;case"days":case"day":case"d":return t*ot;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Ct;case"minutes":case"minute":case"mins":case"min":case"m":return t*bt;case"seconds":case"second":case"secs":case"sec":case"s":return t*yt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Kl(i){var e=Math.abs(i);return e>=ot?Math.round(i/ot)+"d":e>=Ct?Math.round(i/Ct)+"h":e>=bt?Math.round(i/bt)+"m":e>=yt?Math.round(i/yt)+"s":i+"ms"}function Yl(i){var e=Math.abs(i);return e>=ot?sn(i,e,ot,"day"):e>=Ct?sn(i,e,Ct,"hour"):e>=bt?sn(i,e,bt,"minute"):e>=yt?sn(i,e,yt,"second"):i+" ms"}function sn(i,e,t,n){var r=e>=t*1.5;return Math.round(i/t)+" "+n+(r?"s":"")}});var Qn=K((sf,zs)=>{"use strict";function Xl(i){t.debug=t,t.default=t,t.coerce=u,t.disable=s,t.enable=r,t.enabled=c,t.humanize=$s(),t.destroy=p,Object.keys(i).forEach(h=>{t[h]=i[h]}),t.names=[],t.skips=[],t.formatters={};function e(h){let m=0;for(let _=0;_<h.length;_++)m=(m<<5)-m+h.charCodeAt(_),m|=0;return t.colors[Math.abs(m)%t.colors.length]}t.selectColor=e;function t(h){let m,_=null,D,V;function y(...A){if(!y.enabled)return;let ue=y,X=Number(new Date),g=X-(m||X);ue.diff=g,ue.prev=m,ue.curr=X,m=X,A[0]=t.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let b=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(se,ke)=>{if(se==="%%")return"%";b++;let We=t.formatters[ke];if(typeof We=="function"){let rt=A[b];se=We.call(ue,rt),A.splice(b,1),b--}return se}),t.formatArgs.call(ue,A),(ue.log||t.log).apply(ue,A)}return y.namespace=h,y.useColors=t.useColors(),y.color=t.selectColor(h),y.extend=n,y.destroy=t.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>_!==null?_:(D!==t.namespaces&&(D=t.namespaces,V=t.enabled(h)),V),set:A=>{_=A}}),typeof t.init=="function"&&t.init(y),y}function n(h,m){let _=t(this.namespace+(typeof m>"u"?":":m)+h);return _.log=this.log,_}function r(h){t.save(h),t.namespaces=h,t.names=[],t.skips=[];let m,_=(typeof h=="string"?h:"").split(/[\s,]+/),D=_.length;for(m=0;m<D;m++)_[m]&&(h=_[m].replace(/\*/g,".*?"),h[0]==="-"?t.skips.push(new RegExp("^"+h.slice(1)+"$")):t.names.push(new RegExp("^"+h+"$")))}function s(){let h=[...t.names.map(d),...t.skips.map(d).map(m=>"-"+m)].join(",");return t.enable(""),h}function c(h){if(h[h.length-1]==="*")return!0;let m,_;for(m=0,_=t.skips.length;m<_;m++)if(t.skips[m].test(h))return!1;for(m=0,_=t.names.length;m<_;m++)if(t.names[m].test(h))return!0;return!1}function d(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}function u(h){return h instanceof Error?h.stack||h.message:h}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}zs.exports=Xl});var Ks=K((Ae,on)=>{"use strict";Ae.formatArgs=Ql;Ae.save=Zl;Ae.load=ec;Ae.useColors=Jl;Ae.storage=tc();Ae.destroy=(()=>{let i=!1;return()=>{i||(i=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ae.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Jl(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let i;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(i=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(i[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Ql(i){if(i[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+i[0]+(this.useColors?"%c ":" ")+"+"+on.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;i.splice(1,0,e,"color: inherit");let t=0,n=0;i[0].replace(/%[a-zA-Z%]/g,r=>{r!=="%%"&&(t++,r==="%c"&&(n=t))}),i.splice(n,0,e)}Ae.log=console.debug||console.log||(()=>{});function Zl(i){try{i?Ae.storage.setItem("debug",i):Ae.storage.removeItem("debug")}catch{}}function ec(){let i;try{i=Ae.storage.getItem("debug")}catch{}return!i&&typeof process<"u"&&"env"in process&&(i=process.env.DEBUG),i}function tc(){try{return localStorage}catch{}}on.exports=Qn()(Ae);var{formatters:ic}=on.exports;ic.j=function(i){try{return JSON.stringify(i)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Xs=K((of,Ys)=>{"use strict";Ys.exports=(i,e)=>{e=e||process.argv;let t=i.startsWith("-")?"":i.length===1?"-":"--",n=e.indexOf(t+i),r=e.indexOf("--");return n!==-1&&(r===-1?!0:n<r)}});var Qs=K((af,Js)=>{"use strict";var nc=P("os"),Le=Xs(),ve=process.env,xt;Le("no-color")||Le("no-colors")||Le("color=false")?xt=!1:(Le("color")||Le("colors")||Le("color=true")||Le("color=always"))&&(xt=!0);"FORCE_COLOR"in ve&&(xt=ve.FORCE_COLOR.length===0||parseInt(ve.FORCE_COLOR,10)!==0);function rc(i){return i===0?!1:{level:i,hasBasic:!0,has256:i>=2,has16m:i>=3}}function sc(i){if(xt===!1)return 0;if(Le("color=16m")||Le("color=full")||Le("color=truecolor"))return 3;if(Le("color=256"))return 2;if(i&&!i.isTTY&&xt!==!0)return 0;let e=xt?1:0;if(process.platform==="win32"){let t=nc.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(t[0])>=10&&Number(t[2])>=10586?Number(t[2])>=14931?3:2:1}if("CI"in ve)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(t=>t in ve)||ve.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in ve)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ve.TEAMCITY_VERSION)?1:0;if(ve.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in ve){let t=parseInt((ve.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ve.TERM_PROGRAM){case"iTerm.app":return t>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ve.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ve.TERM)||"COLORTERM"in ve?1:(ve.TERM==="dumb",e)}function Zn(i){let e=sc(i);return rc(e)}Js.exports={supportsColor:Zn,stdout:Zn(process.stdout),stderr:Zn(process.stderr)}});var eo=K((le,ln)=>{"use strict";var oc=P("tty"),an=P("util");le.init=fc;le.log=dc;le.formatArgs=lc;le.save=uc;le.load=hc;le.useColors=ac;le.destroy=an.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");le.colors=[6,2,3,4,5,1];try{let i=Qs();i&&(i.stderr||i).level>=2&&(le.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}le.inspectOpts=Object.keys(process.env).filter(i=>/^debug_/i.test(i)).reduce((i,e)=>{let t=e.substring(6).toLowerCase().replace(/_([a-z])/g,(r,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),i[t]=n,i},{});function ac(){return"colors"in le.inspectOpts?!!le.inspectOpts.colors:oc.isatty(process.stderr.fd)}function lc(i){let{namespace:e,useColors:t}=this;if(t){let n=this.color,r="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${r};1m${e} \x1B[0m`;i[0]=s+i[0].split(`
`).join(`
`+s),i.push(r+"m+"+ln.exports.humanize(this.diff)+"\x1B[0m")}else i[0]=cc()+e+" "+i[0]}function cc(){return le.inspectOpts.hideDate?"":new Date().toISOString()+" "}function dc(...i){return process.stderr.write(an.formatWithOptions(le.inspectOpts,...i)+`
`)}function uc(i){i?process.env.DEBUG=i:delete process.env.DEBUG}function hc(){return process.env.DEBUG}function fc(i){i.inspectOpts={};let e=Object.keys(le.inspectOpts);for(let t=0;t<e.length;t++)i.inspectOpts[e[t]]=le.inspectOpts[e[t]]}ln.exports=Qn()(le);var{formatters:Zs}=ln.exports;Zs.o=function(i){return this.inspectOpts.colors=this.useColors,an.inspect(i,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Zs.O=function(i){return this.inspectOpts.colors=this.useColors,an.inspect(i,this.inspectOpts)}});var Oe=K((lf,er)=>{"use strict";typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?er.exports=Ks():er.exports=eo()});var uo=K((Af,co)=>{"use strict";var{Duplex:vc}=P("stream");function ao(i){i.emit("close")}function yc(){!this.destroyed&&this._writableState.finished&&this.destroy()}function lo(i){this.removeListener("error",lo),this.destroy(),this.listenerCount("error")===0&&this.emit("error",i)}function bc(i,e){let t=!0,n=new vc(ee(U({},e),{autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1}));return i.on("message",function(s,c){let d=!c&&n._readableState.objectMode?s.toString():s;n.push(d)||i.pause()}),i.once("error",function(s){n.destroyed||(t=!1,n.destroy(s))}),i.once("close",function(){n.destroyed||n.push(null)}),n._destroy=function(r,s){if(i.readyState===i.CLOSED){s(r),process.nextTick(ao,n);return}let c=!1;i.once("error",function(u){c=!0,s(u)}),i.once("close",function(){c||s(r),process.nextTick(ao,n)}),t&&i.terminate()},n._final=function(r){if(i.readyState===i.CONNECTING){i.once("open",function(){n._final(r)});return}i._socket!==null&&(i._socket._writableState.finished?(r(),n._readableState.endEmitted&&n.destroy()):(i._socket.once("finish",function(){r()}),i.close()))},n._read=function(){i.isPaused&&i.resume()},n._write=function(r,s,c){if(i.readyState===i.CONNECTING){i.once("open",function(){n._write(r,s,c)});return}i.send(r,c)},n.on("end",yc),n.on("error",lo),n}co.exports=bc});var tt=K((Tf,ho)=>{"use strict";ho.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var ri=K((Nf,un)=>{"use strict";var{EMPTY_BUFFER:Cc}=tt(),nr=Buffer[Symbol.species];function xc(i,e){if(i.length===0)return Cc;if(i.length===1)return i[0];let t=Buffer.allocUnsafe(e),n=0;for(let r=0;r<i.length;r++){let s=i[r];t.set(s,n),n+=s.length}return n<e?new nr(t.buffer,t.byteOffset,n):t}function fo(i,e,t,n,r){for(let s=0;s<r;s++)t[n+s]=i[s]^e[s&3]}function po(i,e){for(let t=0;t<i.length;t++)i[t]^=e[t&3]}function Ec(i){return i.length===i.buffer.byteLength?i.buffer:i.buffer.slice(i.byteOffset,i.byteOffset+i.length)}function rr(i){if(rr.readOnly=!0,Buffer.isBuffer(i))return i;let e;return i instanceof ArrayBuffer?e=new nr(i):ArrayBuffer.isView(i)?e=new nr(i.buffer,i.byteOffset,i.byteLength):(e=Buffer.from(i),rr.readOnly=!1),e}un.exports={concat:xc,mask:fo,toArrayBuffer:Ec,toBuffer:rr,unmask:po};if(!process.env.WS_NO_BUFFER_UTIL)try{let i=P("bufferutil");un.exports.mask=function(e,t,n,r,s){s<48?fo(e,t,n,r,s):i.mask(e,t,n,r,s)},un.exports.unmask=function(e,t){e.length<32?po(e,t):i.unmask(e,t)}}catch{}});var _o=K((Of,go)=>{"use strict";var mo=Symbol("kDone"),sr=Symbol("kRun"),or=class{constructor(e){this[mo]=()=>{this.pending--,this[sr]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[sr]()}[sr](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[mo])}}};go.exports=or});var ai=K((If,Co)=>{"use strict";var si=P("zlib"),vo=ri(),Sc=_o(),{kStatusCode:yo}=tt(),wc=Buffer[Symbol.species],kc=Buffer.from([0,0,255,255]),pn=Symbol("permessage-deflate"),Ye=Symbol("total-length"),oi=Symbol("callback"),it=Symbol("buffers"),fn=Symbol("error"),hn,ar=class{constructor(e,t,n){if(this._maxPayload=n|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!hn){let r=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;hn=new Sc(r)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[oi];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let t=this._options,n=e.find(r=>!(t.serverNoContextTakeover===!1&&r.server_no_context_takeover||r.server_max_window_bits&&(t.serverMaxWindowBits===!1||typeof t.serverMaxWindowBits=="number"&&t.serverMaxWindowBits>r.server_max_window_bits)||typeof t.clientMaxWindowBits=="number"&&!r.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(n.server_no_context_takeover=!0),t.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof t.serverMaxWindowBits=="number"&&(n.server_max_window_bits=t.serverMaxWindowBits),typeof t.clientMaxWindowBits=="number"?n.client_max_window_bits=t.clientMaxWindowBits:(n.client_max_window_bits===!0||t.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(e){let t=e[0];if(this._options.clientNoContextTakeover===!1&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!t.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(t.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return t}normalizeParams(e){return e.forEach(t=>{Object.keys(t).forEach(n=>{let r=t[n];if(r.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(r=r[0],n==="client_max_window_bits"){if(r!==!0){let s=+r;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${n}": ${r}`);r=s}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${r}`)}else if(n==="server_max_window_bits"){let s=+r;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${n}": ${r}`);r=s}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(r!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${r}`)}else throw new Error(`Unknown parameter "${n}"`);t[n]=r})}),e}decompress(e,t,n){hn.add(r=>{this._decompress(e,t,(s,c)=>{r(),n(s,c)})})}compress(e,t,n){hn.add(r=>{this._compress(e,t,(s,c)=>{r(),n(s,c)})})}_decompress(e,t,n){let r=this._isServer?"client":"server";if(!this._inflate){let s=`${r}_max_window_bits`,c=typeof this.params[s]!="number"?si.Z_DEFAULT_WINDOWBITS:this.params[s];this._inflate=si.createInflateRaw(ee(U({},this._options.zlibInflateOptions),{windowBits:c})),this._inflate[pn]=this,this._inflate[Ye]=0,this._inflate[it]=[],this._inflate.on("error",Ac),this._inflate.on("data",bo)}this._inflate[oi]=n,this._inflate.write(e),t&&this._inflate.write(kc),this._inflate.flush(()=>{let s=this._inflate[fn];if(s){this._inflate.close(),this._inflate=null,n(s);return}let c=vo.concat(this._inflate[it],this._inflate[Ye]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[Ye]=0,this._inflate[it]=[],t&&this.params[`${r}_no_context_takeover`]&&this._inflate.reset()),n(null,c)})}_compress(e,t,n){let r=this._isServer?"server":"client";if(!this._deflate){let s=`${r}_max_window_bits`,c=typeof this.params[s]!="number"?si.Z_DEFAULT_WINDOWBITS:this.params[s];this._deflate=si.createDeflateRaw(ee(U({},this._options.zlibDeflateOptions),{windowBits:c})),this._deflate[Ye]=0,this._deflate[it]=[],this._deflate.on("data",Dc)}this._deflate[oi]=n,this._deflate.write(e),this._deflate.flush(si.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let s=vo.concat(this._deflate[it],this._deflate[Ye]);t&&(s=new wc(s.buffer,s.byteOffset,s.length-4)),this._deflate[oi]=null,this._deflate[Ye]=0,this._deflate[it]=[],t&&this.params[`${r}_no_context_takeover`]&&this._deflate.reset(),n(null,s)})}};Co.exports=ar;function Dc(i){this[it].push(i),this[Ye]+=i.length}function bo(i){if(this[Ye]+=i.length,this[pn]._maxPayload<1||this[Ye]<=this[pn]._maxPayload){this[it].push(i);return}this[fn]=new RangeError("Max payload size exceeded"),this[fn].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[fn][yo]=1009,this.removeListener("data",bo),this.reset()}function Ac(i){this[pn]._inflate=null,i[yo]=1007,this[oi](i)}});var li=K((Ff,mn)=>{"use strict";var{isUtf8:xo}=P("buffer"),Mc=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function Tc(i){return i>=1e3&&i<=1014&&i!==1004&&i!==1005&&i!==1006||i>=3e3&&i<=4999}function lr(i){let e=i.length,t=0;for(;t<e;)if(!(i[t]&128))t++;else if((i[t]&224)===192){if(t+1===e||(i[t+1]&192)!==128||(i[t]&254)===192)return!1;t+=2}else if((i[t]&240)===224){if(t+2>=e||(i[t+1]&192)!==128||(i[t+2]&192)!==128||i[t]===224&&(i[t+1]&224)===128||i[t]===237&&(i[t+1]&224)===160)return!1;t+=3}else if((i[t]&248)===240){if(t+3>=e||(i[t+1]&192)!==128||(i[t+2]&192)!==128||(i[t+3]&192)!==128||i[t]===240&&(i[t+1]&240)===128||i[t]===244&&i[t+1]>143||i[t]>244)return!1;t+=4}else return!1;return!0}mn.exports={isValidStatusCode:Tc,isValidUTF8:lr,tokenChars:Mc};if(xo)mn.exports.isValidUTF8=function(i){return i.length<24?lr(i):xo(i)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let i=P("utf-8-validate");mn.exports.isValidUTF8=function(e){return e.length<32?lr(e):i(e)}}catch{}});var fr=K((Pf,Mo)=>{"use strict";var{Writable:Nc}=P("stream"),Eo=ai(),{BINARY_TYPES:Oc,EMPTY_BUFFER:So,kStatusCode:Ic,kWebSocket:Vc}=tt(),{concat:cr,toArrayBuffer:Fc,unmask:Pc}=ri(),{isValidStatusCode:Rc,isValidUTF8:wo}=li(),gn=Buffer[Symbol.species],Ie=0,ko=1,Do=2,Ao=3,dr=4,ur=5,_n=6,hr=class extends Nc{constructor(e={}){super(),this._allowSynchronousEvents=e.allowSynchronousEvents!==void 0?e.allowSynchronousEvents:!0,this._binaryType=e.binaryType||Oc[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[Vc]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=Ie}_write(e,t,n){if(this._opcode===8&&this._state==Ie)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let n=this._buffers[0];return this._buffers[0]=new gn(n.buffer,n.byteOffset+e,n.length-e),new gn(n.buffer,n.byteOffset,e)}let t=Buffer.allocUnsafe(e);do{let n=this._buffers[0],r=t.length-e;e>=n.length?t.set(this._buffers.shift(),r):(t.set(new Uint8Array(n.buffer,n.byteOffset,e),r),this._buffers[0]=new gn(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return t}startLoop(e){this._loop=!0;do switch(this._state){case Ie:this.getInfo(e);break;case ko:this.getPayloadLength16(e);break;case Do:this.getPayloadLength64(e);break;case Ao:this.getMask();break;case dr:this.getData(e);break;case ur:case _n:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let t=this.consume(2);if(t[0]&48){let r=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");e(r);return}let n=(t[0]&64)===64;if(n&&!this._extensions[Eo.extensionName]){let r=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(r);return}if(this._fin=(t[0]&128)===128,this._opcode=t[0]&15,this._payloadLength=t[1]&127,this._opcode===0){if(n){let r=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(r);return}if(!this._fragmented){let r=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");e(r);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let r=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(r);return}this._compressed=n}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let r=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");e(r);return}if(n){let r=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(r);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let r=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");e(r);return}}else{let r=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(r);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(t[1]&128)===128,this._isServer){if(!this._masked){let r=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");e(r);return}}else if(this._masked){let r=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");e(r);return}this._payloadLength===126?this._state=ko:this._payloadLength===127?this._state=Do:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let t=this.consume(8),n=t.readUInt32BE(0);if(n>Math.pow(2,21)-1){let r=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");e(r);return}this._payloadLength=n*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let t=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(t);return}this._masked?this._state=Ao:this._state=dr}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=dr}getData(e){let t=So;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}t=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&Pc(t,this._mask)}if(this._opcode>7){this.controlMessage(t,e);return}if(this._compressed){this._state=ur,this.decompress(t,e);return}t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage(e)}decompress(e,t){this._extensions[Eo.extensionName].decompress(e,this._fin,(r,s)=>{if(r)return t(r);if(s.length){if(this._messageLength+=s.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let c=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");t(c);return}this._fragments.push(s)}this.dataMessage(t),this._state===Ie&&this.startLoop(t)})}dataMessage(e){if(!this._fin){this._state=Ie;return}let t=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let r;this._binaryType==="nodebuffer"?r=cr(n,t):this._binaryType==="arraybuffer"?r=Fc(cr(n,t)):r=n,this._allowSynchronousEvents?(this.emit("message",r,!0),this._state=Ie):(this._state=_n,setImmediate(()=>{this.emit("message",r,!0),this._state=Ie,this.startLoop(e)}))}else{let r=cr(n,t);if(!this._skipUTF8Validation&&!wo(r)){let s=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(s);return}this._state===ur||this._allowSynchronousEvents?(this.emit("message",r,!1),this._state=Ie):(this._state=_n,setImmediate(()=>{this.emit("message",r,!1),this._state=Ie,this.startLoop(e)}))}}controlMessage(e,t){if(this._opcode===8){if(e.length===0)this._loop=!1,this.emit("conclude",1005,So),this.end();else{let n=e.readUInt16BE(0);if(!Rc(n)){let s=this.createError(RangeError,`invalid status code ${n}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");t(s);return}let r=new gn(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!wo(r)){let s=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");t(s);return}this._loop=!1,this.emit("conclude",n,r),this.end()}this._state=Ie;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",e),this._state=Ie):(this._state=_n,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",e),this._state=Ie,this.startLoop(t)}))}createError(e,t,n,r,s){this._loop=!1,this._errored=!0;let c=new e(n?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(c,this.createError),c.code=s,c[Ic]=r,c}};Mo.exports=hr});var mr=K((Lf,Oo)=>{"use strict";var{Duplex:Rf}=P("stream"),{randomFillSync:Lc}=P("crypto"),To=ai(),{EMPTY_BUFFER:Bc}=tt(),{isValidStatusCode:Uc}=li(),{mask:No,toBuffer:Et}=ri(),Ue=Symbol("kByteLength"),jc=Buffer.alloc(4),vn=8*1024,at,St=vn,pr=class i{constructor(e,t,n){this._extensions=t||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){let n,r=!1,s=2,c=!1;t.mask&&(n=t.maskBuffer||jc,t.generateMask?t.generateMask(n):(St===vn&&(at===void 0&&(at=Buffer.alloc(vn)),Lc(at,0,vn),St=0),n[0]=at[St++],n[1]=at[St++],n[2]=at[St++],n[3]=at[St++]),c=(n[0]|n[1]|n[2]|n[3])===0,s=6);let d;typeof e=="string"?(!t.mask||c)&&t[Ue]!==void 0?d=t[Ue]:(e=Buffer.from(e),d=e.length):(d=e.length,r=t.mask&&t.readOnly&&!c);let u=d;d>=65536?(s+=8,u=127):d>125&&(s+=2,u=126);let p=Buffer.allocUnsafe(r?d+s:s);return p[0]=t.fin?t.opcode|128:t.opcode,t.rsv1&&(p[0]|=64),p[1]=u,u===126?p.writeUInt16BE(d,2):u===127&&(p[2]=p[3]=0,p.writeUIntBE(d,4,6)),t.mask?(p[1]|=128,p[s-4]=n[0],p[s-3]=n[1],p[s-2]=n[2],p[s-1]=n[3],c?[p,e]:r?(No(e,n,p,s,d),[p]):(No(e,n,e,0,d),[p,e])):[p,e]}close(e,t,n,r){let s;if(e===void 0)s=Bc;else{if(typeof e!="number"||!Uc(e))throw new TypeError("First argument must be a valid error code number");if(t===void 0||!t.length)s=Buffer.allocUnsafe(2),s.writeUInt16BE(e,0);else{let d=Buffer.byteLength(t);if(d>123)throw new RangeError("The message must not be greater than 123 bytes");s=Buffer.allocUnsafe(2+d),s.writeUInt16BE(e,0),typeof t=="string"?s.write(t,2):s.set(t,2)}}let c={[Ue]:s.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,s,!1,c,r]):this.sendFrame(i.frame(s,c),r)}ping(e,t,n){let r,s;if(typeof e=="string"?(r=Buffer.byteLength(e),s=!1):(e=Et(e),r=e.length,s=Et.readOnly),r>125)throw new RangeError("The data size must not be greater than 125 bytes");let c={[Ue]:r,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:s,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,c,n]):this.sendFrame(i.frame(e,c),n)}pong(e,t,n){let r,s;if(typeof e=="string"?(r=Buffer.byteLength(e),s=!1):(e=Et(e),r=e.length,s=Et.readOnly),r>125)throw new RangeError("The data size must not be greater than 125 bytes");let c={[Ue]:r,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:s,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,c,n]):this.sendFrame(i.frame(e,c),n)}send(e,t,n){let r=this._extensions[To.extensionName],s=t.binary?2:1,c=t.compress,d,u;if(typeof e=="string"?(d=Buffer.byteLength(e),u=!1):(e=Et(e),d=e.length,u=Et.readOnly),this._firstFragment?(this._firstFragment=!1,c&&r&&r.params[r._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(c=d>=r._threshold),this._compress=c):(c=!1,s=0),t.fin&&(this._firstFragment=!0),r){let p={[Ue]:d,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:u,rsv1:c};this._deflating?this.enqueue([this.dispatch,e,this._compress,p,n]):this.dispatch(e,this._compress,p,n)}else this.sendFrame(i.frame(e,{[Ue]:d,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:u,rsv1:!1}),n)}dispatch(e,t,n,r){if(!t){this.sendFrame(i.frame(e,n),r);return}let s=this._extensions[To.extensionName];this._bufferedBytes+=n[Ue],this._deflating=!0,s.compress(e,n.fin,(c,d)=>{if(this._socket.destroyed){let u=new Error("The socket was closed while data was being compressed");typeof r=="function"&&r(u);for(let p=0;p<this._queue.length;p++){let h=this._queue[p],m=h[h.length-1];typeof m=="function"&&m(u)}return}this._bufferedBytes-=n[Ue],this._deflating=!1,n.readOnly=!1,this.sendFrame(i.frame(d,n),r),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][Ue],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][Ue],this._queue.push(e)}sendFrame(e,t){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}};Oo.exports=pr});var jo=K((Bf,Uo)=>{"use strict";var{kForOnEventAttribute:ci,kListener:gr}=tt(),Io=Symbol("kCode"),Vo=Symbol("kData"),Fo=Symbol("kError"),Po=Symbol("kMessage"),Ro=Symbol("kReason"),wt=Symbol("kTarget"),Lo=Symbol("kType"),Bo=Symbol("kWasClean"),Xe=class{constructor(e){this[wt]=null,this[Lo]=e}get target(){return this[wt]}get type(){return this[Lo]}};Object.defineProperty(Xe.prototype,"target",{enumerable:!0});Object.defineProperty(Xe.prototype,"type",{enumerable:!0});var lt=class extends Xe{constructor(e,t={}){super(e),this[Io]=t.code===void 0?0:t.code,this[Ro]=t.reason===void 0?"":t.reason,this[Bo]=t.wasClean===void 0?!1:t.wasClean}get code(){return this[Io]}get reason(){return this[Ro]}get wasClean(){return this[Bo]}};Object.defineProperty(lt.prototype,"code",{enumerable:!0});Object.defineProperty(lt.prototype,"reason",{enumerable:!0});Object.defineProperty(lt.prototype,"wasClean",{enumerable:!0});var kt=class extends Xe{constructor(e,t={}){super(e),this[Fo]=t.error===void 0?null:t.error,this[Po]=t.message===void 0?"":t.message}get error(){return this[Fo]}get message(){return this[Po]}};Object.defineProperty(kt.prototype,"error",{enumerable:!0});Object.defineProperty(kt.prototype,"message",{enumerable:!0});var di=class extends Xe{constructor(e,t={}){super(e),this[Vo]=t.data===void 0?null:t.data}get data(){return this[Vo]}};Object.defineProperty(di.prototype,"data",{enumerable:!0});var Wc={addEventListener(i,e,t={}){for(let r of this.listeners(i))if(!t[ci]&&r[gr]===e&&!r[ci])return;let n;if(i==="message")n=function(s,c){let d=new di("message",{data:c?s:s.toString()});d[wt]=this,yn(e,this,d)};else if(i==="close")n=function(s,c){let d=new lt("close",{code:s,reason:c.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});d[wt]=this,yn(e,this,d)};else if(i==="error")n=function(s){let c=new kt("error",{error:s,message:s.message});c[wt]=this,yn(e,this,c)};else if(i==="open")n=function(){let s=new Xe("open");s[wt]=this,yn(e,this,s)};else return;n[ci]=!!t[ci],n[gr]=e,t.once?this.once(i,n):this.on(i,n)},removeEventListener(i,e){for(let t of this.listeners(i))if(t[gr]===e&&!t[ci]){this.removeListener(i,t);break}}};Uo.exports={CloseEvent:lt,ErrorEvent:kt,Event:Xe,EventTarget:Wc,MessageEvent:di};function yn(i,e,t){typeof i=="object"&&i.handleEvent?i.handleEvent.call(i,t):i.call(e,t)}});var _r=K((Uf,Wo)=>{"use strict";var{tokenChars:ui}=li();function je(i,e,t){i[e]===void 0?i[e]=[t]:i[e].push(t)}function Gc(i){let e=Object.create(null),t=Object.create(null),n=!1,r=!1,s=!1,c,d,u=-1,p=-1,h=-1,m=0;for(;m<i.length;m++)if(p=i.charCodeAt(m),c===void 0)if(h===-1&&ui[p]===1)u===-1&&(u=m);else if(m!==0&&(p===32||p===9))h===-1&&u!==-1&&(h=m);else if(p===59||p===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${m}`);h===-1&&(h=m);let D=i.slice(u,h);p===44?(je(e,D,t),t=Object.create(null)):c=D,u=h=-1}else throw new SyntaxError(`Unexpected character at index ${m}`);else if(d===void 0)if(h===-1&&ui[p]===1)u===-1&&(u=m);else if(p===32||p===9)h===-1&&u!==-1&&(h=m);else if(p===59||p===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${m}`);h===-1&&(h=m),je(t,i.slice(u,h),!0),p===44&&(je(e,c,t),t=Object.create(null),c=void 0),u=h=-1}else if(p===61&&u!==-1&&h===-1)d=i.slice(u,m),u=h=-1;else throw new SyntaxError(`Unexpected character at index ${m}`);else if(r){if(ui[p]!==1)throw new SyntaxError(`Unexpected character at index ${m}`);u===-1?u=m:n||(n=!0),r=!1}else if(s)if(ui[p]===1)u===-1&&(u=m);else if(p===34&&u!==-1)s=!1,h=m;else if(p===92)r=!0;else throw new SyntaxError(`Unexpected character at index ${m}`);else if(p===34&&i.charCodeAt(m-1)===61)s=!0;else if(h===-1&&ui[p]===1)u===-1&&(u=m);else if(u!==-1&&(p===32||p===9))h===-1&&(h=m);else if(p===59||p===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${m}`);h===-1&&(h=m);let D=i.slice(u,h);n&&(D=D.replace(/\\/g,""),n=!1),je(t,d,D),p===44&&(je(e,c,t),t=Object.create(null),c=void 0),d=void 0,u=h=-1}else throw new SyntaxError(`Unexpected character at index ${m}`);if(u===-1||s||p===32||p===9)throw new SyntaxError("Unexpected end of input");h===-1&&(h=m);let _=i.slice(u,h);return c===void 0?je(e,_,t):(d===void 0?je(t,_,!0):n?je(t,d,_.replace(/\\/g,"")):je(t,d,_),je(e,c,t)),e}function qc(i){return Object.keys(i).map(e=>{let t=i[e];return Array.isArray(t)||(t=[t]),t.map(n=>[e].concat(Object.keys(n).map(r=>{let s=n[r];return Array.isArray(s)||(s=[s]),s.map(c=>c===!0?r:`${r}=${c}`).join("; ")})).join("; ")).join(", ")}).join(", ")}Wo.exports={format:qc,parse:Gc}});var xr=K((Gf,Zo)=>{"use strict";var Hc=P("events"),$c=P("https"),zc=P("http"),Ho=P("net"),Kc=P("tls"),{randomBytes:Yc,createHash:Xc}=P("crypto"),{Duplex:jf,Readable:Wf}=P("stream"),{URL:vr}=P("url"),nt=ai(),Jc=fr(),Qc=mr(),{BINARY_TYPES:Go,EMPTY_BUFFER:bn,GUID:Zc,kForOnEventAttribute:yr,kListener:ed,kStatusCode:td,kWebSocket:ye,NOOP:$o}=tt(),{EventTarget:{addEventListener:id,removeEventListener:nd}}=jo(),{format:rd,parse:sd}=_r(),{toBuffer:od}=ri(),ad=30*1e3,zo=Symbol("kAborted"),br=[8,13],Je=["CONNECTING","OPEN","CLOSING","CLOSED"],ld=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,Y=class i extends Hc{constructor(e,t,n){super(),this._binaryType=Go[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=bn,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=i.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,t===void 0?t=[]:Array.isArray(t)||(typeof t=="object"&&t!==null?(n=t,t=[]):t=[t]),Ko(this,e,t,n)):(this._autoPong=n.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){Go.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,n){let r=new Jc({allowSynchronousEvents:n.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation});this._sender=new Qc(e,this._extensions,n.generateMask),this._receiver=r,this._socket=e,r[ye]=this,e[ye]=this,r.on("conclude",ud),r.on("drain",hd),r.on("error",fd),r.on("message",pd),r.on("ping",md),r.on("pong",gd),e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",Xo),e.on("data",xn),e.on("end",Jo),e.on("error",Qo),this._readyState=i.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=i.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[nt.extensionName]&&this._extensions[nt.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=i.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==i.CLOSED){if(this.readyState===i.CONNECTING){Me(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===i.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=i.CLOSING,this._sender.close(e,t,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),ad)}}pause(){this.readyState===i.CONNECTING||this.readyState===i.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,t,n){if(this.readyState===i.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=t=void 0):typeof t=="function"&&(n=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==i.OPEN){Cr(this,e,n);return}t===void 0&&(t=!this._isServer),this._sender.ping(e||bn,t,n)}pong(e,t,n){if(this.readyState===i.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=t=void 0):typeof t=="function"&&(n=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==i.OPEN){Cr(this,e,n);return}t===void 0&&(t=!this._isServer),this._sender.pong(e||bn,t,n)}resume(){this.readyState===i.CONNECTING||this.readyState===i.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,n){if(this.readyState===i.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"&&(n=t,t={}),typeof e=="number"&&(e=e.toString()),this.readyState!==i.OPEN){Cr(this,e,n);return}let r=U({binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0},t);this._extensions[nt.extensionName]||(r.compress=!1),this._sender.send(e||bn,r,n)}terminate(){if(this.readyState!==i.CLOSED){if(this.readyState===i.CONNECTING){Me(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=i.CLOSING,this._socket.destroy())}}};Object.defineProperty(Y,"CONNECTING",{enumerable:!0,value:Je.indexOf("CONNECTING")});Object.defineProperty(Y.prototype,"CONNECTING",{enumerable:!0,value:Je.indexOf("CONNECTING")});Object.defineProperty(Y,"OPEN",{enumerable:!0,value:Je.indexOf("OPEN")});Object.defineProperty(Y.prototype,"OPEN",{enumerable:!0,value:Je.indexOf("OPEN")});Object.defineProperty(Y,"CLOSING",{enumerable:!0,value:Je.indexOf("CLOSING")});Object.defineProperty(Y.prototype,"CLOSING",{enumerable:!0,value:Je.indexOf("CLOSING")});Object.defineProperty(Y,"CLOSED",{enumerable:!0,value:Je.indexOf("CLOSED")});Object.defineProperty(Y.prototype,"CLOSED",{enumerable:!0,value:Je.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(i=>{Object.defineProperty(Y.prototype,i,{enumerable:!0})});["open","error","close","message"].forEach(i=>{Object.defineProperty(Y.prototype,`on${i}`,{enumerable:!0,get(){for(let e of this.listeners(i))if(e[yr])return e[ed];return null},set(e){for(let t of this.listeners(i))if(t[yr]){this.removeListener(i,t);break}typeof e=="function"&&this.addEventListener(i,e,{[yr]:!0})}})});Y.prototype.addEventListener=id;Y.prototype.removeEventListener=nd;Zo.exports=Y;function Ko(i,e,t,n){let r=ee(U({allowSynchronousEvents:!0,autoPong:!0,protocolVersion:br[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10},n),{socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0});if(i._autoPong=r.autoPong,!br.includes(r.protocolVersion))throw new RangeError(`Unsupported protocol version: ${r.protocolVersion} (supported versions: ${br.join(", ")})`);let s;if(e instanceof vr)s=e;else try{s=new vr(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}s.protocol==="http:"?s.protocol="ws:":s.protocol==="https:"&&(s.protocol="wss:"),i._url=s.href;let c=s.protocol==="wss:",d=s.protocol==="ws+unix:",u;if(s.protocol!=="ws:"&&!c&&!d?u=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`:d&&!s.pathname?u="The URL's pathname is empty":s.hash&&(u="The URL contains a fragment identifier"),u){let y=new SyntaxError(u);if(i._redirects===0)throw y;Cn(i,y);return}let p=c?443:80,h=Yc(16).toString("base64"),m=c?$c.request:zc.request,_=new Set,D;if(r.createConnection=r.createConnection||(c?dd:cd),r.defaultPort=r.defaultPort||p,r.port=s.port||p,r.host=s.hostname.startsWith("[")?s.hostname.slice(1,-1):s.hostname,r.headers=ee(U({},r.headers),{"Sec-WebSocket-Version":r.protocolVersion,"Sec-WebSocket-Key":h,Connection:"Upgrade",Upgrade:"websocket"}),r.path=s.pathname+s.search,r.timeout=r.handshakeTimeout,r.perMessageDeflate&&(D=new nt(r.perMessageDeflate!==!0?r.perMessageDeflate:{},!1,r.maxPayload),r.headers["Sec-WebSocket-Extensions"]=rd({[nt.extensionName]:D.offer()})),t.length){for(let y of t){if(typeof y!="string"||!ld.test(y)||_.has(y))throw new SyntaxError("An invalid or duplicated subprotocol was specified");_.add(y)}r.headers["Sec-WebSocket-Protocol"]=t.join(",")}if(r.origin&&(r.protocolVersion<13?r.headers["Sec-WebSocket-Origin"]=r.origin:r.headers.Origin=r.origin),(s.username||s.password)&&(r.auth=`${s.username}:${s.password}`),d){let y=r.path.split(":");r.socketPath=y[0],r.path=y[1]}let V;if(r.followRedirects){if(i._redirects===0){i._originalIpc=d,i._originalSecure=c,i._originalHostOrSocketPath=d?r.socketPath:s.host;let y=n&&n.headers;if(n=ee(U({},n),{headers:{}}),y)for(let[A,ue]of Object.entries(y))n.headers[A.toLowerCase()]=ue}else if(i.listenerCount("redirect")===0){let y=d?i._originalIpc?r.socketPath===i._originalHostOrSocketPath:!1:i._originalIpc?!1:s.host===i._originalHostOrSocketPath;(!y||i._originalSecure&&!c)&&(delete r.headers.authorization,delete r.headers.cookie,y||delete r.headers.host,r.auth=void 0)}r.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(r.auth).toString("base64")),V=i._req=m(r),i._redirects&&i.emit("redirect",i.url,V)}else V=i._req=m(r);r.timeout&&V.on("timeout",()=>{Me(i,V,"Opening handshake has timed out")}),V.on("error",y=>{V===null||V[zo]||(V=i._req=null,Cn(i,y))}),V.on("response",y=>{let A=y.headers.location,ue=y.statusCode;if(A&&r.followRedirects&&ue>=300&&ue<400){if(++i._redirects>r.maxRedirects){Me(i,V,"Maximum redirects exceeded");return}V.abort();let X;try{X=new vr(A,e)}catch{let b=new SyntaxError(`Invalid URL: ${A}`);Cn(i,b);return}Ko(i,X,t,n)}else i.emit("unexpected-response",V,y)||Me(i,V,`Unexpected server response: ${y.statusCode}`)}),V.on("upgrade",(y,A,ue)=>{if(i.emit("upgrade",y),i.readyState!==Y.CONNECTING)return;V=i._req=null;let X=y.headers.upgrade;if(X===void 0||X.toLowerCase()!=="websocket"){Me(i,A,"Invalid Upgrade header");return}let g=Xc("sha1").update(h+Zc).digest("base64");if(y.headers["sec-websocket-accept"]!==g){Me(i,A,"Invalid Sec-WebSocket-Accept header");return}let b=y.headers["sec-websocket-protocol"],he;if(b!==void 0?_.size?_.has(b)||(he="Server sent an invalid subprotocol"):he="Server sent a subprotocol but none was requested":_.size&&(he="Server sent no subprotocol"),he){Me(i,A,he);return}b&&(i._protocol=b);let se=y.headers["sec-websocket-extensions"];if(se!==void 0){if(!D){Me(i,A,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let ke;try{ke=sd(se)}catch{Me(i,A,"Invalid Sec-WebSocket-Extensions header");return}let We=Object.keys(ke);if(We.length!==1||We[0]!==nt.extensionName){Me(i,A,"Server indicated an extension that was not requested");return}try{D.accept(ke[nt.extensionName])}catch{Me(i,A,"Invalid Sec-WebSocket-Extensions header");return}i._extensions[nt.extensionName]=D}i.setSocket(A,ue,{allowSynchronousEvents:r.allowSynchronousEvents,generateMask:r.generateMask,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation})}),r.finishRequest?r.finishRequest(V,i):V.end()}function Cn(i,e){i._readyState=Y.CLOSING,i.emit("error",e),i.emitClose()}function cd(i){return i.path=i.socketPath,Ho.connect(i)}function dd(i){return i.path=void 0,!i.servername&&i.servername!==""&&(i.servername=Ho.isIP(i.host)?"":i.host),Kc.connect(i)}function Me(i,e,t){i._readyState=Y.CLOSING;let n=new Error(t);Error.captureStackTrace(n,Me),e.setHeader?(e[zo]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(Cn,i,n)):(e.destroy(n),e.once("error",i.emit.bind(i,"error")),e.once("close",i.emitClose.bind(i)))}function Cr(i,e,t){if(e){let n=od(e).length;i._socket?i._sender._bufferedBytes+=n:i._bufferedAmount+=n}if(t){let n=new Error(`WebSocket is not open: readyState ${i.readyState} (${Je[i.readyState]})`);process.nextTick(t,n)}}function ud(i,e){let t=this[ye];t._closeFrameReceived=!0,t._closeMessage=e,t._closeCode=i,t._socket[ye]!==void 0&&(t._socket.removeListener("data",xn),process.nextTick(Yo,t._socket),i===1005?t.close():t.close(i,e))}function hd(){let i=this[ye];i.isPaused||i._socket.resume()}function fd(i){let e=this[ye];e._socket[ye]!==void 0&&(e._socket.removeListener("data",xn),process.nextTick(Yo,e._socket),e.close(i[td])),e.emit("error",i)}function qo(){this[ye].emitClose()}function pd(i,e){this[ye].emit("message",i,e)}function md(i){let e=this[ye];e._autoPong&&e.pong(i,!this._isServer,$o),e.emit("ping",i)}function gd(i){this[ye].emit("pong",i)}function Yo(i){i.resume()}function Xo(){let i=this[ye];this.removeListener("close",Xo),this.removeListener("data",xn),this.removeListener("end",Jo),i._readyState=Y.CLOSING;let e;!this._readableState.endEmitted&&!i._closeFrameReceived&&!i._receiver._writableState.errorEmitted&&(e=i._socket.read())!==null&&i._receiver.write(e),i._receiver.end(),this[ye]=void 0,clearTimeout(i._closeTimer),i._receiver._writableState.finished||i._receiver._writableState.errorEmitted?i.emitClose():(i._receiver.on("error",qo),i._receiver.on("finish",qo))}function xn(i){this[ye]._receiver.write(i)||this.pause()}function Jo(){let i=this[ye];i._readyState=Y.CLOSING,i._receiver.end(),this.end()}function Qo(){let i=this[ye];this.removeListener("error",Qo),this.on("error",$o),i&&(i._readyState=Y.CLOSING,this.destroy())}});var ta=K((Hf,ea)=>{"use strict";var{tokenChars:_d}=li();function vd(i){let e=new Set,t=-1,n=-1,r=0;for(r;r<i.length;r++){let c=i.charCodeAt(r);if(n===-1&&_d[c]===1)t===-1&&(t=r);else if(r!==0&&(c===32||c===9))n===-1&&t!==-1&&(n=r);else if(c===44){if(t===-1)throw new SyntaxError(`Unexpected character at index ${r}`);n===-1&&(n=r);let d=i.slice(t,n);if(e.has(d))throw new SyntaxError(`The "${d}" subprotocol is duplicated`);e.add(d),t=n=-1}else throw new SyntaxError(`Unexpected character at index ${r}`)}if(t===-1||n!==-1)throw new SyntaxError("Unexpected end of input");let s=i.slice(t,r);if(e.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);return e.add(s),e}ea.exports={parse:vd}});var la=K((zf,aa)=>{"use strict";var yd=P("events"),En=P("http"),{Duplex:$f}=P("stream"),{createHash:bd}=P("crypto"),ia=_r(),ct=ai(),Cd=ta(),xd=xr(),{GUID:Ed,kWebSocket:Sd}=tt(),wd=/^[+/0-9A-Za-z]{22}==$/,na=0,ra=1,oa=2,Er=class extends yd{constructor(e,t){if(super(),e=U({allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:xd},e),e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=En.createServer((n,r)=>{let s=En.STATUS_CODES[426];r.writeHead(426,{"Content-Length":s.length,"Content-Type":"text/plain"}),r.end(s)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){let n=this.emit.bind(this,"connection");this._removeListeners=kd(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(r,s,c)=>{this.handleUpgrade(r,s,c,n)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=na}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===oa){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(hi,this);return}if(e&&this.once("close",e),this._state!==ra)if(this._state=ra,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(hi,this):process.nextTick(hi,this);else{let t=this._server;this._removeListeners(),this._removeListeners=this._server=null,t.close(()=>{hi(this)})}}shouldHandle(e){if(this.options.path){let t=e.url.indexOf("?");if((t!==-1?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,n,r){t.on("error",sa);let s=e.headers["sec-websocket-key"],c=e.headers.upgrade,d=+e.headers["sec-websocket-version"];if(e.method!=="GET"){dt(this,e,t,405,"Invalid HTTP method");return}if(c===void 0||c.toLowerCase()!=="websocket"){dt(this,e,t,400,"Invalid Upgrade header");return}if(s===void 0||!wd.test(s)){dt(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");return}if(d!==8&&d!==13){dt(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){fi(t,400);return}let u=e.headers["sec-websocket-protocol"],p=new Set;if(u!==void 0)try{p=Cd.parse(u)}catch{dt(this,e,t,400,"Invalid Sec-WebSocket-Protocol header");return}let h=e.headers["sec-websocket-extensions"],m={};if(this.options.perMessageDeflate&&h!==void 0){let _=new ct(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let D=ia.parse(h);D[ct.extensionName]&&(_.accept(D[ct.extensionName]),m[ct.extensionName]=_)}catch{dt(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let _={origin:e.headers[`${d===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(_,(D,V,y,A)=>{if(!D)return fi(t,V||401,y,A);this.completeUpgrade(m,s,p,e,t,n,r)});return}if(!this.options.verifyClient(_))return fi(t,401)}this.completeUpgrade(m,s,p,e,t,n,r)}completeUpgrade(e,t,n,r,s,c,d){if(!s.readable||!s.writable)return s.destroy();if(s[Sd])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>na)return fi(s,503);let p=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${bd("sha1").update(t+Ed).digest("base64")}`],h=new this.options.WebSocket(null,void 0,this.options);if(n.size){let m=this.options.handleProtocols?this.options.handleProtocols(n,r):n.values().next().value;m&&(p.push(`Sec-WebSocket-Protocol: ${m}`),h._protocol=m)}if(e[ct.extensionName]){let m=e[ct.extensionName].params,_=ia.format({[ct.extensionName]:[m]});p.push(`Sec-WebSocket-Extensions: ${_}`),h._extensions=e}this.emit("headers",p,r),s.write(p.concat(`\r
`).join(`\r
`)),s.removeListener("error",sa),h.setSocket(s,c,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(h),h.on("close",()=>{this.clients.delete(h),this._shouldEmitClose&&!this.clients.size&&process.nextTick(hi,this)})),d(h,r)}};aa.exports=Er;function kd(i,e){for(let t of Object.keys(e))i.on(t,e[t]);return function(){for(let n of Object.keys(e))i.removeListener(n,e[n])}}function hi(i){i._state=oa,i.emit("close")}function sa(){this.destroy()}function fi(i,e,t,n){t=t||En.STATUS_CODES[e],n=U({Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(t)},n),i.once("finish",i.destroy),i.end(`HTTP/1.1 ${e} ${En.STATUS_CODES[e]}\r
`+Object.keys(n).map(r=>`${r}: ${n[r]}`).join(`\r
`)+`\r
\r
`+t)}function dt(i,e,t,n,r){if(i.listenerCount("wsClientError")){let s=new Error(r);Error.captureStackTrace(s,dt),i.emit("wsClientError",s,t,e)}else fi(t,n,r)}});var Ai=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=C({type:i,selectors:[["app-navbar"]],standalone:!0,features:[x],decls:53,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-body-tertiary",2,"height","8%","border-bottom-style","solid","border-color","rgba(0, 0, 0, 0.09)","margin-bottom","20px"],[1,"container-fluid"],["id","navbarCenteredExample",1,"collapse","navbar-collapse","justify-content-center"],[1,"navbar-nav","mb-2","mb-lg-0"],[1,"nav-item","px-2"],["routerLink","/",1,"nav-link"],[1,"btn-group","nav-link"],["type","button","data-bs-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle"],[1,"dropdown-menu"],["routerLink","/drivers",1,"dropdown-item"],[1,"dropdown-divider"],["routerLink","/drivers/add",1,"dropdown-item"],["routerLink","/drivers/update",1,"dropdown-item"],["routerLink","/drivers/delete",1,"dropdown-item"],["routerLink","/packages",1,"dropdown-item"],["routerLink","/packages/add",1,"dropdown-item"],["routerLink","/packages/update",1,"dropdown-item"],["routerLink","/packages/delete",1,"dropdown-item"],["routerLink","/login",1,"nav-link"],["routerLink","/signup",1,"nav-link"],["routerLink","/stats",1,"nav-link"],["routerLink","/translate",1,"nav-link"],["routerLink","/text-to-speech",1,"nav-link"],["routerLink","/generative-ai",1,"nav-link"]],template:function(t,n){t&1&&(a(0,"nav",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li",4)(5,"a",5),l(6,"Home"),o()(),a(7,"li",4)(8,"div",6)(9,"div",7),l(10," Drivers "),o(),a(11,"div",8)(12,"a",9),l(13,"List Drivers"),o(),fe(14,"div",10),a(15,"a",11),l(16,"Add Driver"),o(),a(17,"a",12),l(18,"Update Driver"),o(),a(19,"a",13),l(20,"Delete Driver"),o()()()(),a(21,"li",4)(22,"div",6)(23,"div",7),l(24," Packages "),o(),a(25,"div",8)(26,"a",14),l(27,"List Packages"),o(),fe(28,"div",10),a(29,"a",15),l(30,"Add Package"),o(),a(31,"a",16),l(32,"Update Package"),o(),a(33,"a",17),l(34,"Delete Package"),o()()()(),a(35,"li",4)(36,"a",18),l(37,"Login"),o()(),a(38,"li",4)(39,"a",19),l(40,"Sign Up"),o()(),a(41,"li",4)(42,"a",20),l(43,"Stats"),o()(),a(44,"li",4)(45,"a",21),l(46,"Translate"),o()(),a(47,"li",4)(48,"a",22),l(49,"Text to Speech"),o()(),a(50,"li",4)(51,"a",23),l(52,"Generative AI"),o()()()()()())},dependencies:[is]})};var Mi=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=C({type:i,selectors:[["app-footer"]],standalone:!0,features:[x],decls:6,vars:0,consts:[[1,"py-3","my-4","fixed-bottom"],[1,"nav","justify-content-center","border-bottom","pb-3","mb-3"],[1,"nav-item"],[1,"text-center","text-muted"]],template:function(t,n){t&1&&(a(0,"footer",0)(1,"ul",1)(2,"li",2),l(3,"0412 345 678 mn@hotmail.com"),o()(),a(4,"p",3),l(5,"\xA9 Massimo Nodin | 33892962 | Monash University"),o()())}})};var Ti=class i{title="assignment-3";static \u0275fac=function(t){return new(t||i)};static \u0275cmp=C({type:i,selectors:[["app-root"]],standalone:!0,features:[x],decls:3,vars:0,template:function(t,n){t&1&&fe(0,"app-navbar")(1,"router-outlet")(2,"app-footer")},dependencies:[ts,Ai,Mi]})};var Ni=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=C({type:i,selectors:[["app-pagenotfound"]],standalone:!0,features:[x],decls:8,vars:0,consts:[[2,"display","flex","width","100%","height","80%","flex-direction","column","justify-content","center","align-items","center"],[2,"color","rgb(235, 74, 74)"],["type","button","href","/",1,"btn","btn-primary"]],template:function(t,n){t&1&&(a(0,"body")(1,"div",0)(2,"h1",1),l(3,"404"),o(),a(4,"h2"),l(5,"Page Not Found"),o(),a(6,"a",2),l(7,"Homepage"),o()()())}})};var cu={withCredentials:!0,headers:new Yr({"Content-Type":"application/json"})},w=class i{constructor(e){this.http=e}URL_BACKEND=location.origin+"/33892962/Massimo/api/v1";isAuthenticated(){return this.http.get(this.URL_BACKEND+"/authenticated")}getDrivers(){return this.http.get(this.URL_BACKEND+"/drivers")}getDriverPackages(){return this.http.get(this.URL_BACKEND+"/driverspackages")}getDriver(e){return this.http.get(this.URL_BACKEND+"/drivers?id="+e)}addDriver(e){return this.http.post(this.URL_BACKEND+"/drivers/add",e)}updateDriver(e){return this.http.put(this.URL_BACKEND+"/drivers",e)}deleteDriver(e){return this.http.delete(this.URL_BACKEND+"/drivers/delete",{body:{driver_id:e}})}getPackages(){return this.http.get(this.URL_BACKEND+"/packages")}getPackage(e){return this.http.get(this.URL_BACKEND+"/packages?id="+e)}addPackage(e){return this.http.post(this.URL_BACKEND+"/packages/add",e)}updatePackage(e){return this.http.put(this.URL_BACKEND+"/packages",e)}deletePackage(e){return this.http.delete(this.URL_BACKEND+"/packages/delete",{body:{package_id:e}})}getStatistics(){return this.http.get(this.URL_BACKEND+"/stats")}login(e,t){return this.http.post(this.URL_BACKEND+"/login",{username:e,password:t})}signUp(e,t){return this.http.post(this.URL_BACKEND+"/signup",{username:e,password:t})}static \u0275fac=function(t){return new(t||i)(Wr(Xr))};static \u0275prov=On({token:i,factory:i.\u0275fac,providedIn:"root"})};var Oi=class i{constructor(e){this.databaseService=e}driverAmount;packageAmount;ngOnInit(){this.databaseService.getDriverPackages().subscribe({next:e=>{e&&typeof e=="object"&&"drivers"in e&&"packages"in e?(this.driverAmount=e.drivers,this.packageAmount=e.packages):(this.driverAmount=0,this.packageAmount=0)},error:e=>{this.driverAmount=0,this.packageAmount=0}})}static \u0275fac=function(t){return new(t||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-index"]],standalone:!0,features:[x],decls:15,vars:2,consts:[[2,"display","flex","width","100%","justify-content","center","justify-items","center"],[1,"table",2,"margin-top","0px","width","400px","text-align","center","border-style","solid","border-width","2px","border-radius","5px"],[1,"table"],[2,"vertical-align","middle"],["src","Logo.png",2,"display","block","margin-left","auto","margin-right","auto","width","50%"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr")(4,"th"),l(5,"Number of Drivers"),o(),a(6,"th"),l(7,"Number of Packages"),o()()(),a(8,"tbody")(9,"tr",3)(10,"td"),l(11),o(),a(12,"td"),l(13),o()()()()(),fe(14,"img",4)),t&2&&(f(11),G(" ",n.driverAmount," "),f(2),G(" ",n.packageAmount," "))}})};var fs=(()=>{class i{constructor(t,n){this._renderer=t,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(n){return new(n||i)(v(Ft),v(Vt))}}static{this.\u0275dir=te({type:i})}}return i})(),$t=(()=>{class i extends fs{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=qe(i)))(r||i)}})()}static{this.\u0275dir=te({type:i,features:[xe]})}}return i})(),_t=new ht(""),Ra={provide:_t,useExisting:Ve(()=>zt),multi:!0},zt=(()=>{class i extends $t{writeValue(t){this.setProperty("checked",t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=qe(i)))(r||i)}})()}static{this.\u0275dir=te({type:i,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(n,r){n&1&&E("change",function(c){return r.onChange(c.target.checked)})("blur",function(){return r.onTouched()})},features:[Fe([Ra]),xe]})}}return i})(),La={provide:_t,useExisting:Ve(()=>Ee),multi:!0};function Ba(){let i=Rn()?Rn().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var Ua=new ht(""),Ee=(()=>{class i extends fs{constructor(t,n,r){super(t,n),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Ba())}writeValue(t){let n=t??"";this.setProperty("value",n)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(n){return new(n||i)(v(Ft),v(Vt),v(Ua,8))}}static{this.\u0275dir=te({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){n&1&&E("input",function(c){return r._handleInput(c.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(c){return r._compositionEnd(c.target.value)})},features:[Fe([La]),xe]})}}return i})();function Ln(i){return i==null||(typeof i=="string"||Array.isArray(i))&&i.length===0}function ps(i){return i!=null&&typeof i.length=="number"}var Kt=new ht(""),ms=new ht("");function ja(i){return e=>{if(Ln(e.value)||Ln(i))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<i?{min:{min:i,actual:e.value}}:null}}function Wa(i){return e=>Ln(e.value)||!ps(e.value)?null:e.value.length<i?{minlength:{requiredLength:i,actualLength:e.value.length}}:null}function Ga(i){return e=>ps(e.value)&&e.value.length>i?{maxlength:{requiredLength:i,actualLength:e.value.length}}:null}function rs(i){return null}function gs(i){return i!=null}function _s(i){return qr(i)?Lr(i):i}function vs(i){let e={};return i.forEach(t=>{e=t!=null?U(U({},e),t):e}),Object.keys(e).length===0?null:e}function ys(i,e){return e.map(t=>t(i))}function qa(i){return!i.validate}function bs(i){return i.map(e=>qa(e)?e:t=>e.validate(t))}function Ha(i){if(!i)return null;let e=i.filter(gs);return e.length==0?null:function(t){return vs(ys(t,e))}}function Un(i){return i!=null?Ha(bs(i)):null}function $a(i){if(!i)return null;let e=i.filter(gs);return e.length==0?null:function(t){let n=ys(t,e).map(_s);return jr(n).pipe(Ur(vs))}}function jn(i){return i!=null?$a(bs(i)):null}function ss(i,e){return i===null?[e]:Array.isArray(i)?[...i,e]:[i,e]}function za(i){return i._rawValidators}function Ka(i){return i._rawAsyncValidators}function Bn(i){return i?Array.isArray(i)?i:[i]:[]}function Vi(i,e){return Array.isArray(i)?i.includes(e):i===e}function os(i,e){let t=Bn(e);return Bn(i).forEach(r=>{Vi(t,r)||t.push(r)}),t}function as(i,e){return Bn(e).filter(t=>!Vi(i,t))}var Fi=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Un(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=jn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},mt=class extends Fi{get formDirective(){return null}get path(){return null}},Ht=class extends Fi{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Pi=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Ya={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Au=ee(U({},Ya),{"[class.ng-submitted]":"isSubmitted"}),ae=(()=>{class i extends Pi{constructor(t){super(t)}static{this.\u0275fac=function(n){return new(n||i)(v(Ht,2))}}static{this.\u0275dir=te({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){n&2&&Pn("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[xe]})}}return i})(),$=(()=>{class i extends Pi{constructor(t){super(t)}static{this.\u0275fac=function(n){return new(n||i)(v(mt,10))}}static{this.\u0275dir=te({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,r){n&2&&Pn("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[xe]})}}return i})();var Ut="VALID",Ii="INVALID",ft="PENDING",jt="DISABLED",gt=class{},Ri=class extends gt{constructor(e,t){super(),this.value=e,this.source=t}},Gt=class extends gt{constructor(e,t){super(),this.pristine=e,this.source=t}},qt=class extends gt{constructor(e,t){super(),this.touched=e,this.source=t}},pt=class extends gt{constructor(e,t){super(),this.status=e,this.source=t}};function Cs(i){return(Ui(i)?i.validators:i)||null}function Xa(i){return Array.isArray(i)?Un(i):i||null}function xs(i,e){return(Ui(e)?e.asyncValidators:i)||null}function Ja(i){return Array.isArray(i)?jn(i):i||null}function Ui(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function Qa(i,e,t){let n=i.controls;if(!(e?Object.keys(n):n).length)throw new Si(1e3,"");if(!n[t])throw new Si(1001,"")}function Za(i,e,t){i._forEachChild((n,r)=>{if(t[r]===void 0)throw new Si(1002,"")})}var Li=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Bt(()=>this.statusReactive()),this.statusReactive=Pt(void 0),this._pristine=Bt(()=>this.pristineReactive()),this.pristineReactive=Pt(!0),this._touched=Bt(()=>this.touchedReactive()),this.touchedReactive=Pt(!1),this._events=new Rr,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return et(this.statusReactive)}set status(e){et(()=>this.statusReactive.set(e))}get valid(){return this.status===Ut}get invalid(){return this.status===Ii}get pending(){return this.status==ft}get disabled(){return this.status===jt}get enabled(){return this.status!==jt}get pristine(){return et(this.pristineReactive)}set pristine(e){et(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return et(this.touchedReactive)}set touched(e){et(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(os(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(os(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(as(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(as(e,this._rawAsyncValidators))}hasValidator(e){return Vi(this._rawValidators,e)}hasAsyncValidator(e){return Vi(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ee(U({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new qt(!0,n))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:n})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n),t&&e.emitEvent!==!1&&this._events.next(new qt(!1,n))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ee(U({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new Gt(!1,n))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),t&&e.emitEvent!==!1&&this._events.next(new Gt(!0,n))}markAsPending(e={}){this.status=ft;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new pt(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ee(U({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=jt,this.errors=null,this._forEachChild(r=>{r.disable(ee(U({},e),{onlySelf:!0}))}),this._updateValue();let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ri(this.value,n)),this._events.next(new pt(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ee(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ut,this._forEachChild(n=>{n.enable(ee(U({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ee(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ut||this.status===ft)&&this._runAsyncValidator(n,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ri(this.value,t)),this._events.next(new pt(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ee(U({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?jt:Ut}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ft,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let n=_s(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((n,r)=>n&&n._find(r),this)}getError(e,t){let n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,n){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||n)&&this._events.next(new pt(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,n)}_initObservables(){this.valueChanges=new It,this.statusChanges=new It}_calculateStatus(){return this._allControlsDisabled()?jt:this.errors?Ii:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ft)?ft:this._anyControlsHaveStatus(Ii)?Ii:Ut}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let n=!this._anyControlsDirty(),r=this.pristine!==n;this.pristine=n,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Gt(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new qt(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ui(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Xa(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Ja(this._rawAsyncValidators)}},Bi=class extends Li{constructor(e,t,n){super(Cs(t),xs(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Za(this,!0,e),Object.keys(e).forEach(n=>{Qa(this,!0,n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(n=>{let r=this.controls[n];r&&r.patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,n)=>n._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,n]of Object.entries(this.controls))if(this.contains(t)&&e(n))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,n,r)=>((n.enabled||this.disabled)&&(t[r]=n.value),t))}_reduceChildren(e,t){let n=e;return this._forEachChild((r,s)=>{n=t(n,r,s)}),n}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Wn=new ht("CallSetDisabledState",{providedIn:"root",factory:()=>Gn}),Gn="always";function el(i,e){return[...e.path,i]}function Es(i,e,t=Gn){Ss(i,e),e.valueAccessor.writeValue(i.value),(i.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(i.disabled),il(i,e),rl(i,e),nl(i,e),tl(i,e)}function ls(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function tl(i,e){if(e.valueAccessor.setDisabledState){let t=n=>{e.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}function Ss(i,e){let t=za(i);e.validator!==null?i.setValidators(ss(t,e.validator)):typeof t=="function"&&i.setValidators([t]);let n=Ka(i);e.asyncValidator!==null?i.setAsyncValidators(ss(n,e.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let r=()=>i.updateValueAndValidity();ls(e._rawValidators,r),ls(e._rawAsyncValidators,r)}function il(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&ws(i,e)})}function nl(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&ws(i,e),i.updateOn!=="submit"&&i.markAsTouched()})}function ws(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function rl(i,e){let t=(n,r)=>{e.valueAccessor.writeValue(n),r&&e.viewToModelUpdate(n)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}function sl(i,e){i==null,Ss(i,e)}function ol(i,e){if(!i.hasOwnProperty("model"))return!1;let t=i.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function al(i){return Object.getPrototypeOf(i.constructor)===$t}function ll(i,e){i._syncPendingControls(),e.forEach(t=>{let n=t.control;n.updateOn==="submit"&&n._pendingChange&&(t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function cl(i,e){if(!e)return null;Array.isArray(e);let t,n,r;return e.forEach(s=>{s.constructor===Ee?t=s:al(s)?n=s:r=s}),r||n||t||null}var dl={provide:mt,useExisting:Ve(()=>q)},Wt=Promise.resolve(),q=(()=>{class i extends mt{get submitted(){return et(this.submittedReactive)}constructor(t,n,r){super(),this.callSetDisabledState=r,this._submitted=Bt(()=>this.submittedReactive()),this.submittedReactive=Pt(!1),this._directives=new Set,this.ngSubmit=new It,this.form=new Bi({},Un(t),jn(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Wt.then(()=>{let n=this._findContainer(t.path);t.control=n.registerControl(t.name,t.control),Es(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Wt.then(()=>{let n=this._findContainer(t.path);n&&n.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Wt.then(()=>{let n=this._findContainer(t.path),r=new Bi({});sl(r,t),n.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Wt.then(()=>{let n=this._findContainer(t.path);n&&n.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,n){Wt.then(()=>{this.form.get(t.path).setValue(n)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),ll(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(n){return new(n||i)(v(Kt,10),v(ms,10),v(Wn,8))}}static{this.\u0275dir=te({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,r){n&1&&E("submit",function(c){return r.onSubmit(c)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Fe([dl]),xe]})}}return i})();function cs(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}function ds(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var ul=class extends Li{constructor(e=null,t,n){super(Cs(t),xs(n,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ui(t)&&(t.nonNullable||t.initialValueIsDefault)&&(ds(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){cs(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){cs(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){ds(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var hl={provide:Ht,useExisting:Ve(()=>ne)},us=Promise.resolve(),ne=(()=>{class i extends Ht{constructor(t,n,r,s,c,d){super(),this._changeDetectorRef=c,this.callSetDisabledState=d,this.control=new ul,this._registered=!1,this.name="",this.update=new It,this._parent=t,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=cl(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let n=t.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),ol(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Es(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){us.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let n=t.isDisabled.currentValue,r=n!==0&&zr(n);us.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?el(t,this._parent):[t]}static{this.\u0275fac=function(n){return new(n||i)(v(mt,9),v(Kt,10),v(ms,10),v(_t,10),v($r,8),v(Wn,8))}}static{this.\u0275dir=te({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Fe([hl]),xe,Fn]})}}return i})(),z=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=te({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return i})(),fl={provide:_t,useExisting:Ve(()=>qn),multi:!0},qn=(()=>{class i extends $t{writeValue(t){let n=t??"";this.setProperty("value",n)}registerOnChange(t){this.onChange=n=>{t(n==""?null:parseFloat(n))}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=qe(i)))(r||i)}})()}static{this.\u0275dir=te({type:i,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(n,r){n&1&&E("input",function(c){return r.onChange(c.target.value)})("blur",function(){return r.onTouched()})},features:[Fe([fl]),xe]})}}return i})();var pl={provide:_t,useExisting:Ve(()=>_e),multi:!0};function ks(i,e){return i==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function ml(i){return i.split(":")[0]}var _e=(()=>{class i extends $t{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let n=this._getOptionId(t),r=ks(n,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=n=>{this.value=this._getOptionValue(n),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n),t))return n;return null}_getOptionValue(t){let n=ml(t);return this._optionMap.has(n)?this._optionMap.get(n):t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=qe(i)))(r||i)}})()}static{this.\u0275dir=te({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,r){n&1&&E("change",function(c){return r.onChange(c.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Fe([pl]),xe]})}}return i})(),Se=(()=>{class i{constructor(t,n,r){this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(ks(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(n){return new(n||i)(v(Vt),v(Ft),v(_e,9))}}static{this.\u0275dir=te({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return i})(),gl={provide:_t,useExisting:Ve(()=>Ds),multi:!0};function hs(i,e){return i==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function _l(i){return i.split(":")[0]}var Ds=(()=>{class i extends $t{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let n;if(Array.isArray(t)){let r=t.map(s=>this._getOptionId(s));n=(s,c)=>{s._setSelected(r.indexOf(c.toString())>-1)}}else n=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(t){this.onChange=n=>{let r=[],s=n.selectedOptions;if(s!==void 0){let c=s;for(let d=0;d<c.length;d++){let u=c[d],p=this._getOptionValue(u.value);r.push(p)}}else{let c=n.options;for(let d=0;d<c.length;d++){let u=c[d];if(u.selected){let p=this._getOptionValue(u.value);r.push(p)}}}this.value=r,t(r)}}_registerOption(t){let n=(this._idCounter++).toString();return this._optionMap.set(n,t),n}_getOptionId(t){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n)._value,t))return n;return null}_getOptionValue(t){let n=_l(t);return this._optionMap.has(n)?this._optionMap.get(n)._value:t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=qe(i)))(r||i)}})()}static{this.\u0275dir=te({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,r){n&1&&E("change",function(c){return r.onChange(c.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Fe([gl]),xe]})}}return i})(),we=(()=>{class i{constructor(t,n,r){this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(hs(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(hs(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(n){return new(n||i)(v(Vt),v(Ft),v(Ds,9))}}static{this.\u0275dir=te({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return i})();function As(i){return typeof i=="number"?i:parseInt(i,10)}function vl(i){return typeof i=="number"?i:parseFloat(i)}var Hn=(()=>{class i{constructor(){this._validator=rs}ngOnChanges(t){if(this.inputName in t){let n=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):rs,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=te({type:i,features:[Fn]})}}return i})();var yl={provide:Kt,useExisting:Ve(()=>$n),multi:!0},$n=(()=>{class i extends Hn{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>vl(t),this.createValidator=t=>ja(t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=qe(i)))(r||i)}})()}static{this.\u0275dir=te({type:i,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(n,r){n&2&&wi("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[Fe([yl]),xe]})}}return i})();var bl={provide:Kt,useExisting:Ve(()=>Yt),multi:!0},Yt=(()=>{class i extends Hn{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>As(t),this.createValidator=t=>Wa(t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=qe(i)))(r||i)}})()}static{this.\u0275dir=te({type:i,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(n,r){n&2&&wi("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},features:[Fe([bl]),xe]})}}return i})(),Cl={provide:Kt,useExisting:Ve(()=>Xt),multi:!0},Xt=(()=>{class i extends Hn{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>As(t),this.createValidator=t=>Ga(t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=qe(i)))(r||i)}})()}static{this.\u0275dir=te({type:i,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(n,r){n&2&&wi("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Fe([Cl]),xe]})}}return i})();var xl=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Vn({type:i})}static{this.\u0275inj=In({})}}return i})();var L=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:Wn,useValue:t.callSetDisabledState??Gn}]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Vn({type:i})}static{this.\u0275inj=In({imports:[xl]})}}return i})();var ji=class i{constructor(e){this.databaseService=e}router=J(oe);driverInformation={driver_name:"",driver_department:"",driver_licence:"",driver_isActive:!1};addDriver(){this.databaseService.addDriver(this.driverInformation).subscribe(e=>{if(e.error)this.router.navigate(["/invalid"]);else{this.router.navigate(["/"]);return}})}static \u0275fac=function(t){return new(t||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-add-driver"]],standalone:!0,features:[x],decls:29,vars:4,consts:[[2,"height","70%","display","flex","justify-content","center","align-items","center"],[1,"card",2,"padding","20px","width","400px","display","flex","flex-direction","column"],[2,"text-align","center","margin-bottom","20px"],[1,"mb-3"],[1,"form-label"],["type","text","name","driverName","placeholder","Enter driver name",1,"form-control",3,"ngModelChange","ngModel"],["aria-label","Default select example","name","driverDepartment",1,"form-select",3,"ngModelChange","ngModel"],["value","food","selected",""],["value","furniture"],["value","electronic"],["type","text","name","driverLicense","placeholder","Enter driver license",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-check"],["type","checkbox","name","driverIsActive",1,"form-check-input",3,"ngModelChange","ngModel"],["for","flexCheckChecked",1,"form-check-label"],[1,"btn","btn-primary",3,"click"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"form",1)(2,"h2",2),l(3,"Add New Driver"),o(),a(4,"div",3)(5,"label",4),l(6,"Driver Name"),o(),a(7,"input",5),O("ngModelChange",function(s){return N(n.driverInformation.driver_name,s)||(n.driverInformation.driver_name=s),s}),o()(),a(8,"div",3)(9,"label",4),l(10,"Driver Department"),o(),a(11,"select",6),O("ngModelChange",function(s){return N(n.driverInformation.driver_department,s)||(n.driverInformation.driver_department=s),s}),a(12,"option",7),l(13,"Food"),o(),a(14,"option",8),l(15,"Furniture"),o(),a(16,"option",9),l(17,"Electronic"),o()()(),a(18,"div",3)(19,"label",4),l(20,"Driver License"),o(),a(21,"input",10),O("ngModelChange",function(s){return N(n.driverInformation.driver_licence,s)||(n.driverInformation.driver_licence=s),s}),o()(),a(22,"div",3)(23,"div",11)(24,"input",12),O("ngModelChange",function(s){return N(n.driverInformation.driver_isActive,s)||(n.driverInformation.driver_isActive=s),s}),o(),a(25,"label",13),l(26," is Active "),o()()(),a(27,"button",14),E("click",function(){return n.addDriver()}),l(28,"Submit"),o()()()),t&2&&(f(7),T("ngModel",n.driverInformation.driver_name),f(4),T("ngModel",n.driverInformation.driver_department),f(10),T("ngModel",n.driverInformation.driver_licence),f(3),T("ngModel",n.driverInformation.driver_isActive))},dependencies:[L,z,Se,we,Ee,zt,_e,ae,$,ne,q]})};function El(i,e){if(i&1&&(a(0,"option",16),l(1),o()),i&2){let t=e.$implicit;me("value",t._id),f(),G(" ",t.driver_name," ")}}function Sl(i,e){if(i&1){let t=pe();a(0,"div",1)(1,"form",2)(2,"h2",3),l(3,"Add New Package"),o(),a(4,"div",4)(5,"label",5),l(6,"Package Title"),o(),a(7,"input",6),O("ngModelChange",function(r){j(t);let s=k();return N(s.packageInformation.package_title,r)||(s.packageInformation.package_title=r),W(r)}),o()(),a(8,"div",4)(9,"label",5),l(10,"Package Weight"),o(),a(11,"input",7),O("ngModelChange",function(r){j(t);let s=k();return N(s.packageInformation.package_weight,r)||(s.packageInformation.package_weight=r),W(r)}),o()(),a(12,"div",4)(13,"label",5),l(14,"Package Destination"),o(),a(15,"input",8),O("ngModelChange",function(r){j(t);let s=k();return N(s.packageInformation.package_destination,r)||(s.packageInformation.package_destination=r),W(r)}),o()(),a(16,"div",4)(17,"label",5),l(18,"Package Description (Optional)"),o(),a(19,"input",9),O("ngModelChange",function(r){j(t);let s=k();return N(s.packageInformation.package_description,r)||(s.packageInformation.package_description=r),W(r)}),o()(),a(20,"div",4)(21,"div",10)(22,"input",11),O("ngModelChange",function(r){j(t);let s=k();return N(s.packageInformation.isAllocated,r)||(s.packageInformation.isAllocated=r),W(r)}),o(),a(23,"label",12),l(24," is Allocated "),o()()(),a(25,"div",4)(26,"label",5),l(27,"Driver"),o(),a(28,"select",13),O("ngModelChange",function(r){j(t);let s=k();return N(s.packageInformation.driver_id,r)||(s.packageInformation.driver_id=r),W(r)}),I(29,El,2,2,"option",14),o()(),a(30,"button",15),E("click",function(){j(t);let r=k();return W(r.addPackage())}),l(31,"Submit"),o()()()}if(i&2){let t=k();f(7),T("ngModel",t.packageInformation.package_title),f(4),T("ngModel",t.packageInformation.package_weight),f(4),T("ngModel",t.packageInformation.package_destination),f(4),T("ngModel",t.packageInformation.package_description),f(3),T("ngModel",t.packageInformation.isAllocated),f(6),T("ngModel",t.packageInformation.driver_id),f(),M("ngForOf",t.drivers)}}var Wi=class i{constructor(e){this.databaseService=e}drivers=[];loading=!0;router=J(oe);packageInformation={package_title:"",package_weight:0,package_destination:"",package_description:"",isAllocated:!1,driver_id:null};ngOnInit(){this.databaseService.getDrivers().subscribe(e=>{this.drivers=e,this.loading=!1})}addPackage(){this.databaseService.addPackage(this.packageInformation).subscribe(e=>{if(e.error)console.log(e),this.router.navigate(["/invalid"]);else{this.router.navigate(["/"]);return}})}static \u0275fac=function(t){return new(t||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-add-package"]],standalone:!0,features:[x],decls:1,vars:1,consts:[["style","height: 70%; display: flex; justify-content: center; align-items: center;",4,"ngIf"],[2,"height","70%","display","flex","justify-content","center","align-items","center"],[1,"card",2,"padding","20px","width","400px","display","flex","flex-direction","column"],[2,"text-align","center","margin-bottom","20px"],[1,"mb-3"],[1,"form-label"],["type","text","name","packageTitle","placeholder","Enter package title",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","1","value","1","name","packageWeight","placeholder","Enter package weight",3,"ngModelChange","ngModel"],["type","text","name","packageDestination","placeholder","Enter package destination",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","packageDescription","placeholder","Enter package description",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-check"],["type","checkbox","name","isAllocated",1,"form-check-input",3,"ngModelChange","ngModel"],["for","flexCheckChecked",1,"form-check-label"],["aria-label","Default select example","name","driverID",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[3,"value"]],template:function(t,n){t&1&&I(0,Sl,32,7,"div",0),t&2&&M("ngIf",!n.loading)},dependencies:[L,z,Se,we,Ee,qn,zt,_e,ae,$,$n,ne,q,Z,Q,ge]})};function wl(i,e){if(i&1&&(a(0,"option",9),l(1),o()),i&2){let t=e.$implicit;me("value",t.driver_id),f(),G(" ",t.driver_id," ")}}function kl(i,e){if(i&1){let t=pe();a(0,"div",1)(1,"form",2)(2,"h2",3),l(3,"Delete Driver"),o(),a(4,"div",4)(5,"label",5),l(6,"Driver"),o(),a(7,"select",6),O("ngModelChange",function(r){j(t);let s=k();return N(s.driver_id,r)||(s.driver_id=r),W(r)}),I(8,wl,2,2,"option",7),o()(),a(9,"button",8),E("click",function(){j(t);let r=k();return W(r.deleteDriver())}),l(10,"Submit"),o()()()}if(i&2){let t=k();f(7),T("ngModel",t.driver_id),f(),M("ngForOf",t.drivers)}}var Gi=class i{constructor(e){this.databaseService=e}drivers=[];loading=!0;driver_id=0;router=J(oe);ngOnInit(){this.databaseService.getDrivers().subscribe(e=>{this.drivers=e,this.loading=!1})}deleteDriver(){this.databaseService.deleteDriver(this.driver_id).subscribe(e=>{this.router.navigate(["/drivers"])})}static \u0275fac=function(t){return new(t||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-delete-driver"]],standalone:!0,features:[x],decls:1,vars:1,consts:[["style","height: 70%; display: flex; justify-content: center; align-items: center;",4,"ngIf"],[2,"height","70%","display","flex","justify-content","center","align-items","center"],[1,"card",2,"padding","20px","width","400px","display","flex","flex-direction","column"],[2,"text-align","center","margin-bottom","20px"],[1,"mb-3"],[1,"form-label"],["aria-label","Default select example","name","driverID",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[3,"value"]],template:function(t,n){t&1&&I(0,kl,11,2,"div",0),t&2&&M("ngIf",!n.loading)},dependencies:[L,z,Se,we,_e,ae,$,ne,q,Z,Q,ge]})};function Dl(i,e){if(i&1&&(a(0,"option",9),l(1),o()),i&2){let t=e.$implicit;me("value",t.package_id),f(),G(" ",t.package_id," ")}}function Al(i,e){if(i&1){let t=pe();a(0,"div",1)(1,"form",2)(2,"h2",3),l(3,"Delete Package"),o(),a(4,"div",4)(5,"label",5),l(6,"Package"),o(),a(7,"select",6),O("ngModelChange",function(r){j(t);let s=k();return N(s.package_id,r)||(s.package_id=r),W(r)}),I(8,Dl,2,2,"option",7),o()(),a(9,"button",8),E("click",function(){j(t);let r=k();return W(r.deletePackage())}),l(10,"Submit"),o()()()}if(i&2){let t=k();f(7),T("ngModel",t.package_id),f(),M("ngForOf",t.packages)}}var qi=class i{constructor(e){this.databaseService=e}packages=[];loading=!0;package_id=0;router=J(oe);ngOnInit(){this.databaseService.getPackages().subscribe(e=>{this.packages=e,this.loading=!1})}deletePackage(){this.databaseService.deletePackage(this.package_id).subscribe(e=>{this.router.navigate(["/packages"])})}static \u0275fac=function(t){return new(t||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-delete-package"]],standalone:!0,features:[x],decls:1,vars:1,consts:[["style","height: 70%; display: flex; justify-content: center; align-items: center;",4,"ngIf"],[2,"height","70%","display","flex","justify-content","center","align-items","center"],[1,"card",2,"padding","20px","width","400px","display","flex","flex-direction","column"],[2,"text-align","center","margin-bottom","20px"],[1,"mb-3"],[1,"form-label"],["aria-label","Default select example","name","packageID",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[3,"value"]],template:function(t,n){t&1&&I(0,Al,11,2,"div",0),t&2&&M("ngIf",!n.loading)},dependencies:[L,z,Se,we,_e,ae,$,ne,q,Z,Q,ge]})};function Ml(i,e){i&1&&(a(0,"a",8),l(1,"No Packages Assigned"),o())}function Tl(i,e){if(i&1&&(a(0,"tr")(1,"td"),l(2),o(),a(3,"td"),l(4),o(),a(5,"td"),l(6),o()()),i&2){let t=e.$implicit;f(2),F(t.package_title),f(2),F(t.package_id),f(2),F(t.package_destination)}}function Nl(i,e){if(i&1&&(a(0,"table",1)(1,"thead",2)(2,"tr")(3,"th"),l(4,"Title"),o(),a(5,"th"),l(6,"ID"),o(),a(7,"th"),l(8,"Destination"),o()()(),a(9,"tbody"),I(10,Tl,7,3,"tr",3),o()()),i&2){let t=k().$implicit;f(10),M("ngForOf",t.driver_assigned_packages)}}function Ol(i,e){if(i&1){let t=pe();a(0,"tr")(1,"td"),l(2),o(),a(3,"td"),l(4),Rt(5,"uppercase"),o(),a(6,"td"),l(7),o(),a(8,"td"),l(9),o(),a(10,"td"),l(11),o(),a(12,"td"),l(13),o(),a(14,"td")(15,"button",4),E("click",function(){let r=j(t).$implicit,s=k(2);return W(s.deleteDriver(r.driver_id))}),l(16,"Delete"),o()(),a(17,"td")(18,"div",5),l(19,"Packages"),o(),a(20,"div",6),I(21,Ml,2,0,"a",7)(22,Nl,11,1,"table",0),o()()()}if(i&2){let t=e.$implicit;f(2),F(t.driver_id),f(2),F(Lt(5,8,t.driver_name)),f(3),F(t.driver_department),f(2),F(t.driver_licence),f(2),F(t.driver_isActive),f(2),F(t.driver_createdAt),f(8),M("ngIf",t.driver_assigned_packages.length==0),f(),M("ngIf",t.driver_assigned_packages.length>0)}}function Il(i,e){if(i&1&&(a(0,"table",1)(1,"thead",2)(2,"tr")(3,"th"),l(4,"Driver ID"),o(),a(5,"th"),l(6,"Driver Name"),o(),a(7,"th"),l(8,"Department"),o(),a(9,"th"),l(10,"Driver License"),o(),a(11,"th"),l(12,"is Active"),o(),a(13,"th"),l(14,"Creation Date"),o(),a(15,"th"),l(16,"Delete Driver"),o(),a(17,"th"),l(18,"Packages"),o()()(),a(19,"tbody"),I(20,Ol,23,10,"tr",3),o()()),i&2){let t=k();f(20),M("ngForOf",t.drivers)}}var Hi=class i{constructor(e){this.databaseService=e}drivers=[];loading=!0;ngOnInit(){this.databaseService.getDrivers().subscribe(e=>{this.drivers=e,this.loading=!1,console.log(this.drivers[0])})}deleteDriver(e){this.databaseService.deleteDriver(e).subscribe(t=>{this.ngOnInit()})}static \u0275fac=function(t){return new(t||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-list-driver"]],standalone:!0,features:[x],decls:1,vars:1,consts:[["class","table","style","margin-top: 0px;",4,"ngIf"],[1,"table",2,"margin-top","0px"],[1,"table"],[4,"ngFor","ngForOf"],[1,"btn","btn-danger",2,"margin-bottom","0",3,"click"],["type","button","data-bs-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle"],[1,"dropdown-menu"],["class","dropdown-item",4,"ngIf"],[1,"dropdown-item"]],template:function(t,n){t&1&&I(0,Il,21,1,"table",0),t&2&&M("ngIf",!n.loading)},dependencies:[L,Z,Q,ge,Di]})};var $i=class i{transform(e,...t){return e*1e3+"g"}static \u0275fac=function(t){return new(t||i)};static \u0275pipe=Gr({name:"packageWeight",type:i,pure:!0,standalone:!0})};function Vl(i,e){if(i&1){let t=pe();a(0,"tr")(1,"td"),l(2),o(),a(3,"td"),l(4),o(),a(5,"td"),l(6),Rt(7,"packageWeight"),o(),a(8,"td"),l(9),o(),a(10,"td"),l(11),o(),a(12,"td"),l(13),o(),a(14,"td"),l(15),o(),a(16,"td"),l(17),o(),a(18,"td")(19,"button",4),E("click",function(){let r=j(t).$implicit,s=k(2);return W(s.deletePackage(r.package_id))}),l(20,"Delete"),o()(),a(21,"td")(22,"div",5),l(23,"Driver"),o(),a(24,"div",6)(25,"a",7)(26,"strong"),l(27,"Name:"),o(),l(28),Rt(29,"uppercase"),fe(30,"br"),a(31,"strong"),l(32,"Driver ID:"),o(),l(33),fe(34,"br"),a(35,"strong"),l(36,"Licence:"),o(),l(37),fe(38,"br"),a(39,"strong"),l(40,"Department:"),o(),l(41),fe(42,"br"),a(43,"strong"),l(44,"is Active:"),o(),l(45),o()()()()}if(i&2){let t=e.$implicit;f(2),F(t.package_id),f(2),F(t.package_title),f(2),F(Lt(7,13,t.package_weight)),f(3),F(t.package_destination),f(2),F(t.package_description),f(2),F(t.package_createdAt),f(2),F(t.package_isAllocated),f(2),F(t.driver_id),f(11),G(" ",Lt(29,15,t.driver_obj.driver_name),""),f(5),G(" ",t.driver_obj.driver_id,""),f(4),G(" ",t.driver_obj.driver_licence,""),f(4),G(" ",t.driver_obj.driver_department,""),f(4),G(" ",t.driver_obj.driver_isActive," ")}}function Fl(i,e){if(i&1&&(a(0,"table",1)(1,"thead",2)(2,"tr")(3,"th"),l(4,"Package ID"),o(),a(5,"th"),l(6,"Title"),o(),a(7,"th"),l(8,"Weight"),o(),a(9,"th"),l(10,"Destination"),o(),a(11,"th"),l(12,"Description"),o(),a(13,"th"),l(14,"Creation Date"),o(),a(15,"th"),l(16,"is Allocated"),o(),a(17,"th"),l(18,"Driver ID"),o(),a(19,"th"),l(20,"Delete Package"),o(),a(21,"th"),l(22,"Driver Information"),o()()(),a(23,"tbody"),I(24,Vl,46,17,"tr",3),o()()),i&2){let t=k();f(24),M("ngForOf",t.packages)}}var zi=class i{constructor(e){this.databaseService=e}packages=[];drivers=[];loading=!0;ngOnInit(){this.databaseService.getPackages().subscribe(e=>{this.packages=e}),this.databaseService.getDrivers().subscribe(e=>{this.drivers=e;for(let t=0;t<this.packages.length;t++)for(let n=0;n<this.drivers.length;n++)this.packages[t].driver_id===this.drivers[n].driver_id&&(this.packages[t].driver_obj=this.drivers[n]);this.loading=!1})}deletePackage(e){this.databaseService.deletePackage(e).subscribe(t=>{this.ngOnInit()})}static \u0275fac=function(t){return new(t||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-list-package"]],standalone:!0,features:[x],decls:1,vars:1,consts:[["class","table","style","margin-top: 0px;",4,"ngIf"],[1,"table",2,"margin-top","0px"],[1,"table"],[4,"ngFor","ngForOf"],[1,"btn","btn-danger",2,"margin-bottom","0",3,"click"],["type","button","data-bs-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle"],[1,"dropdown-menu"],[1,"dropdown-item"]],template:function(t,n){t&1&&I(0,Fl,25,1,"table",0),t&2&&M("ngIf",!n.loading)},dependencies:[L,Z,Q,ge,Di,$i]})};function Pl(i,e){if(i&1&&(a(0,"option",13),l(1),o()),i&2){let t=e.$implicit,n=e.index;me("value",n),f(),G(" ",t.driver_name," ")}}var Ki=class i{constructor(e){this.databaseService=e}drivers=[];driver_index=0;router=J(oe);driverInformation={id:"",driver_department:"",driver_licence:""};ngOnInit(){this.databaseService.getDrivers().subscribe(e=>{this.drivers=e,this.updateInformation()})}updateInformation(){this.driverInformation={id:this.drivers[this.driver_index]._id,driver_department:this.drivers[this.driver_index].driver_department,driver_licence:this.drivers[this.driver_index].driver_licence}}updateDriver(){this.databaseService.updateDriver(this.driverInformation).subscribe(e=>{if(e.error)this.router.navigate(["/invalid"]);else{this.router.navigate(["/drivers"]);return}})}static \u0275fac=function(t){return new(t||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-update-driver"]],standalone:!0,features:[x],decls:25,vars:4,consts:[[2,"height","70%","display","flex","justify-content","center","align-items","center"],[1,"card",2,"padding","20px","width","400px","display","flex","flex-direction","column"],[2,"text-align","center","margin-bottom","20px"],[1,"mb-3"],[1,"form-label"],["aria-label","Default select example","name","driverID",1,"form-select",3,"change","ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["aria-label","Default select example","name","driverDepartment",1,"form-select",3,"ngModelChange","ngModel"],["value","food","selected",""],["value","furniture"],["value","electronic"],["type","text","name","driverLicense","placeholder","Enter driver license",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click"],[3,"value"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"form",1)(2,"h2",2),l(3,"Update Driver"),o(),a(4,"div",3)(5,"label",4),l(6,"Driver"),o(),a(7,"select",5),E("change",function(){return n.updateInformation()}),O("ngModelChange",function(s){return N(n.driver_index,s)||(n.driver_index=s),s}),I(8,Pl,2,2,"option",6),o()(),a(9,"div",3)(10,"label",4),l(11,"Driver Department"),o(),a(12,"select",7),O("ngModelChange",function(s){return N(n.driverInformation.driver_department,s)||(n.driverInformation.driver_department=s),s}),a(13,"option",8),l(14,"Food"),o(),a(15,"option",9),l(16,"Furniture"),o(),a(17,"option",10),l(18,"Electronic"),o()()(),a(19,"div",3)(20,"label",4),l(21,"Driver License"),o(),a(22,"input",11),O("ngModelChange",function(s){return N(n.driverInformation.driver_licence,s)||(n.driverInformation.driver_licence=s),s}),o()(),a(23,"button",12),E("click",function(){return n.updateDriver()}),l(24,"Update Driver"),o()()()),t&2&&(f(7),T("ngModel",n.driver_index),f(),M("ngForOf",n.drivers),f(4),T("ngModel",n.driverInformation.driver_department),f(10),T("ngModel",n.driverInformation.driver_licence))},dependencies:[L,z,Se,we,Ee,_e,ae,$,ne,q,Z,Q]})};function Rl(i,e){if(i&1&&(a(0,"option",9),l(1),o()),i&2){let t=e.$implicit,n=e.index;me("value",n),f(),G(" ",t.package_title," ")}}var Yi=class i{constructor(e){this.databaseService=e}packages=[];package_index=0;router=J(oe);packageInformation={package_id:"",package_destination:""};ngOnInit(){this.databaseService.getPackages().subscribe(e=>{this.packages=e,this.updateInformation()})}updateInformation(){this.packageInformation={package_id:this.packages[this.package_index]._id,package_destination:this.packages[this.package_index].package_destination}}updatePackage(){this.databaseService.updatePackage(this.packageInformation).subscribe(e=>{if(e.error)this.router.navigate(["/invalid"]);else{this.router.navigate(["/packages"]);return}})}static \u0275fac=function(t){return new(t||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-update-package"]],standalone:!0,features:[x],decls:15,vars:3,consts:[[2,"height","70%","display","flex","justify-content","center","align-items","center"],[1,"card",2,"padding","20px","width","400px","display","flex","flex-direction","column"],[2,"text-align","center","margin-bottom","20px"],[1,"mb-3"],[1,"form-label"],["aria-label","Default select example","name","packageID",1,"form-select",3,"change","ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","text","name","packageDestination","placeholder","Enter package destination",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click"],[3,"value"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"form",1)(2,"h2",2),l(3,"Update Package"),o(),a(4,"div",3)(5,"label",4),l(6,"Package Title"),o(),a(7,"select",5),E("change",function(){return n.updateInformation()}),O("ngModelChange",function(s){return N(n.package_index,s)||(n.package_index=s),s}),I(8,Rl,2,2,"option",6),o()(),a(9,"div",3)(10,"label",4),l(11,"Package Destination"),o(),a(12,"input",7),O("ngModelChange",function(s){return N(n.packageInformation.package_destination,s)||(n.packageInformation.package_destination=s),s}),o()(),a(13,"button",8),E("click",function(){return n.updatePackage()}),l(14,"Update Package"),o()()()),t&2&&(f(7),T("ngModel",n.package_index),f(),M("ngForOf",n.packages),f(4),T("ngModel",n.packageInformation.package_destination))},dependencies:[L,z,Se,we,Ee,_e,ae,$,ne,q,Z,Q]})};var Xi=class i{constructor(e){this.databaseService=e}stats={insert:0,update:0,delete:0,retrieve:0};ngOnInit(){return xi(this,null,function*(){this.databaseService.getStatistics().subscribe(e=>this.stats=e)})}static \u0275fac=function(t){return new(t||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-statistics"]],standalone:!0,features:[x],decls:31,vars:4,consts:[[2,"display","flex","width","100%","align-items","center","flex-direction","column"],[1,"table",2,"margin-top","0px","width","400px","text-align","center","border-style","solid","border-width","2px","border-radius","5px"],[1,"table"],[2,"vertical-align","middle"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"h1"),l(2,"MongoDB Stats"),o(),a(3,"table",1)(4,"thead",2)(5,"tr")(6,"th"),l(7,"Operation"),o(),a(8,"th"),l(9,"#"),o()()(),a(10,"tbody")(11,"tr",3)(12,"td"),l(13,"Insert"),o(),a(14,"td"),l(15),o()(),a(16,"tr",3)(17,"td"),l(18,"Retrieve"),o(),a(19,"td"),l(20),o()(),a(21,"tr",3)(22,"td"),l(23,"Update"),o(),a(24,"td"),l(25),o()(),a(26,"tr",3)(27,"td"),l(28,"Delete"),o(),a(29,"td"),l(30),o()()()()()),t&2&&(f(15),G(" ",n.stats.insert," "),f(5),G(" ",n.stats.retrieve," "),f(5),G(" ",n.stats.update," "),f(5),G(" ",n.stats.delete," "))}})};var Ji=class i{constructor(e){this.databaseService=e}router=J(oe);loginInformation={username:"",password:""};login(){Ei(this.databaseService.login(this.loginInformation.username,this.loginInformation.password)).then(e=>{if(e.status=="Logged in"){this.router.navigate(["/"]);return}else this.router.navigate(["/invalid"])}).catch(e=>{this.router.navigate(["/invalid"])})}static \u0275fac=function(t){return new(t||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-login"]],standalone:!0,features:[x],decls:18,vars:2,consts:[[2,"height","70%","display","flex","justify-content","center","align-items","center"],[1,"card",2,"padding","20px","width","400px","display","flex","flex-direction","column"],[2,"text-align","center","margin-bottom","20px"],[1,"mb-3"],[1,"form-label"],[1,"input-group","mb-2","mr-sm-2"],[1,"input-group-prepend"],[1,"input-group-text"],["minlength","6","type","text","name","username","placeholder","Username",1,"form-control",3,"ngModelChange","ngModel"],["minlength","5","maxlength","10","type","password","name","password","placeholder","Password",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"form",1)(2,"h2",2),l(3,"Login"),o(),a(4,"div",3)(5,"label",4),l(6,"Username"),o(),a(7,"div",5)(8,"div",6)(9,"div",7),l(10,"@"),o()(),a(11,"input",8),O("ngModelChange",function(s){return N(n.loginInformation.username,s)||(n.loginInformation.username=s),s}),o()()(),a(12,"div",3)(13,"label",4),l(14,"Password"),o(),a(15,"input",9),O("ngModelChange",function(s){return N(n.loginInformation.password,s)||(n.loginInformation.password=s),s}),o()(),a(16,"button",10),E("click",function(){return n.login()}),l(17,"Login"),o()()()),t&2&&(f(11),T("ngModel",n.loginInformation.username),f(4),T("ngModel",n.loginInformation.password))},dependencies:[L,z,Ee,ae,$,Yt,Xt,ne,q]})};var Qi=class i{constructor(e){this.databaseService=e}router=J(oe);loginInformation={username:"",password:""};signUp(){Ei(this.databaseService.signUp(this.loginInformation.username,this.loginInformation.password)).then(e=>{if(e.error)this.router.navigate(["/invalid"]);else{this.router.navigate(["/"]);return}}).catch(e=>{this.router.navigate(["/invalid"])})}static \u0275fac=function(t){return new(t||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-signup"]],standalone:!0,features:[x],decls:22,vars:2,consts:[[2,"height","70%","display","flex","justify-content","center","align-items","center"],[1,"card",2,"padding","20px","width","400px","display","flex","flex-direction","column"],[2,"text-align","center","margin-bottom","20px"],[1,"mb-3"],[1,"form-label"],[1,"input-group","mb-2","mr-sm-2"],[1,"input-group-prepend"],[1,"input-group-text"],["minlength","6","type","text","name","username","placeholder","Username",1,"form-control",3,"ngModelChange","ngModel"],["id","usernameHelpBlock",1,"form-text","text-muted"],["minlength","5","maxlength","10","type","password","name","password","placeholder","Password",1,"form-control",3,"ngModelChange","ngModel"],["id","passwordHelpBlock",1,"form-text","text-muted"],[1,"btn","btn-primary",3,"click"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"form",1)(2,"h2",2),l(3,"Sign Up"),o(),a(4,"div",3)(5,"label",4),l(6,"Username"),o(),a(7,"div",5)(8,"div",6)(9,"div",7),l(10,"@"),o()(),a(11,"input",8),O("ngModelChange",function(s){return N(n.loginInformation.username,s)||(n.loginInformation.username=s),s}),o()(),a(12,"small",9),l(13," Your username must be 6+ alphanumeric characters long. "),o()(),a(14,"div",3)(15,"label",4),l(16,"Password"),o(),a(17,"input",10),O("ngModelChange",function(s){return N(n.loginInformation.password,s)||(n.loginInformation.password=s),s}),o(),a(18,"small",11),l(19," Your password must be 5-10 characters long. "),o()(),a(20,"button",12),E("click",function(){return n.signUp()}),l(21,"Sign Up"),o()()()),t&2&&(f(11),T("ngModel",n.loginInformation.username),f(6),T("ngModel",n.loginInformation.password))},dependencies:[L,z,Ee,ae,$,Yt,Xt,ne,q]})};var De=(i,e)=>xi(void 0,null,function*(){let t=J(w),n=J(oe);try{return(yield Br(t.isAuthenticated()))==!0?!0:(n.navigate(["/login"]),!1)}catch(r){return console.error("Error during authentication guard",r),n.navigate(["/login"]),!1}});var Zi=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=C({type:i,selectors:[["app-invaliddata"]],standalone:!0,features:[x],decls:5,vars:0,consts:[[2,"display","flex","width","100%","height","80%","flex-direction","column","justify-content","center","align-items","center"],[2,"color","rgb(235, 74, 74)"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"h1",1),l(2,"Error"),o(),a(3,"h2"),l(4,"Invalid Data"),o()())}})};var ir=ce(Ns(),1);var Re=Object.create(null);Re.open="0";Re.close="1";Re.ping="2";Re.pong="3";Re.message="4";Re.upgrade="5";Re.noop="6";var Jt=Object.create(null);Object.keys(Re).forEach(i=>{Jt[Re[i]]=i});var Qt={type:"error",data:"parser error"};var Zt=({type:i,data:e},t,n)=>e instanceof ArrayBuffer||ArrayBuffer.isView(e)?n(t?e:"b"+Os(e,!0).toString("base64")):n(Re[i]+(e||"")),Os=(i,e)=>Buffer.isBuffer(i)||i instanceof Uint8Array&&!e?i:i instanceof ArrayBuffer?Buffer.from(i):Buffer.from(i.buffer,i.byteOffset,i.byteLength),Kn;function Is(i,e){if(i.data instanceof ArrayBuffer||ArrayBuffer.isView(i.data))return e(Os(i.data,!1));Zt(i,!0,t=>{Kn||(Kn=new TextEncoder),e(Kn.encode(t))})}var ei=(i,e)=>{if(typeof i!="string")return{type:"message",data:Vs(i,e)};let t=i.charAt(0);if(t==="b"){let n=Buffer.from(i.substring(1),"base64");return{type:"message",data:Vs(n,e)}}return Jt[t]?i.length>1?{type:Jt[t],data:i.substring(1)}:{type:Jt[t]}:Qt},Vs=(i,e)=>{switch(e){case"arraybuffer":return i instanceof ArrayBuffer?i:Buffer.isBuffer(i)?i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength):i.buffer;case"nodebuffer":default:return Buffer.isBuffer(i)?i:Buffer.from(i)}};var Fs="",Ps=(i,e)=>{let t=i.length,n=new Array(t),r=0;i.forEach((s,c)=>{Zt(s,!1,d=>{n[c]=d,++r===t&&e(n.join(Fs))})})},Rs=(i,e)=>{let t=i.split(Fs),n=[];for(let r=0;r<t.length;r++){let s=ei(t[r],e);if(n.push(s),s.type==="error")break}return n};function Ls(){return new TransformStream({transform(i,e){Is(i,t=>{let n=t.length,r;if(n<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,n);else if(n<65536){r=new Uint8Array(3);let s=new DataView(r.buffer);s.setUint8(0,126),s.setUint16(1,n)}else{r=new Uint8Array(9);let s=new DataView(r.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(n))}i.data&&typeof i.data!="string"&&(r[0]|=128),e.enqueue(r),e.enqueue(t)})}})}var Yn;function en(i){return i.reduce((e,t)=>e+t.length,0)}function tn(i,e){if(i[0].length===e)return i.shift();let t=new Uint8Array(e),n=0;for(let r=0;r<e;r++)t[r]=i[0][n++],n===i[0].length&&(i.shift(),n=0);return i.length&&n<i[0].length&&(i[0]=i[0].slice(n)),t}function Bs(i,e){Yn||(Yn=new TextDecoder);let t=[],n=0,r=-1,s=!1;return new TransformStream({transform(c,d){for(t.push(c);;){if(n===0){if(en(t)<1)break;let u=tn(t,1);s=(u[0]&128)===128,r=u[0]&127,r<126?n=3:r===126?n=1:n=2}else if(n===1){if(en(t)<2)break;let u=tn(t,2);r=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),n=3}else if(n===2){if(en(t)<8)break;let u=tn(t,8),p=new DataView(u.buffer,u.byteOffset,u.length),h=p.getUint32(0);if(h>Math.pow(2,21)-1){d.enqueue(Qt);break}r=h*Math.pow(2,32)+p.getUint32(4),n=3}else{if(en(t)<r)break;let u=tn(t,r);d.enqueue(ei(s?u:Yn.decode(u),e)),n=0}if(r===0||r>i){d.enqueue(Qt);break}}}})}var Xn=4;function B(i){if(i)return Bl(i)}function Bl(i){for(var e in B.prototype)i[e]=B.prototype[e];return i}B.prototype.on=B.prototype.addEventListener=function(i,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(e),this};B.prototype.once=function(i,e){function t(){this.off(i,t),e.apply(this,arguments)}return t.fn=e,this.on(i,t),this};B.prototype.off=B.prototype.removeListener=B.prototype.removeAllListeners=B.prototype.removeEventListener=function(i,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+i];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var n,r=0;r<t.length;r++)if(n=t[r],n===e||n.fn===e){t.splice(r,1);break}return t.length===0&&delete this._callbacks["$"+i],this};B.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+i],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){t=t.slice(0);for(var n=0,r=t.length;n<r;++n)t[n].apply(this,e)}return this};B.prototype.emitReserved=B.prototype.emit;B.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]};B.prototype.hasListeners=function(i){return!!this.listeners(i).length};var $e=process.nextTick,Ce=global,Us="nodebuffer";function js(){return new Jn}function Ul(i){let e=i.split("; "),t=e[0].indexOf("=");if(t===-1)return;let n=e[0].substring(0,t).trim();if(!n.length)return;let r=e[0].substring(t+1).trim();r.charCodeAt(0)===34&&(r=r.slice(1,-1));let s={name:n,value:r};for(let c=1;c<e.length;c++){let d=e[c].split("=");if(d.length!==2)continue;let u=d[0].trim(),p=d[1].trim();switch(u){case"Expires":s.expires=new Date(p);break;case"Max-Age":let h=new Date;h.setUTCSeconds(h.getUTCSeconds()+parseInt(p,10)),s.expires=h;break;default:}}return s}var Jn=class{constructor(){this._cookies=new Map}parseCookies(e){e&&e.forEach(t=>{let n=Ul(t);n&&this._cookies.set(n.name,n)})}get cookies(){let e=Date.now();return this._cookies.forEach((t,n)=>{var r;((r=t.expires)===null||r===void 0?void 0:r.getTime())<e&&this._cookies.delete(n)}),this._cookies.entries()}addCookies(e){let t=[];for(let[n,r]of this.cookies)t.push(`${n}=${r.value}`);t.length&&(e.setDisableHeaderCheck(!0),e.setRequestHeader("cookie",t.join("; ")))}appendCookies(e){for(let[t,n]of this.cookies)e.append("cookie",`${t}=${n.value}`)}};function nn(i,...e){return e.reduce((t,n)=>(i.hasOwnProperty(n)&&(t[n]=i[n]),t),{})}var jl=Ce.setTimeout,Wl=Ce.clearTimeout;function ze(i,e){e.useNativeTimers?(i.setTimeoutFn=jl.bind(Ce),i.clearTimeoutFn=Wl.bind(Ce)):(i.setTimeoutFn=Ce.setTimeout.bind(Ce),i.clearTimeoutFn=Ce.clearTimeout.bind(Ce))}var Gl=1.33;function Ws(i){return typeof i=="string"?ql(i):Math.ceil((i.byteLength||i.size)*Gl)}function ql(i){let e=0,t=0;for(let n=0,r=i.length;n<r;n++)e=i.charCodeAt(n),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(n++,t+=4);return t}function rn(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Gs(i){let e="";for(let t in i)i.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(i[t]));return e}function qs(i){let e={},t=i.split("&");for(let n=0,r=t.length;n<r;n++){let s=t[n].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}var to=ce(Oe(),1),pc=(0,to.default)("engine.io-client:transport"),cn=class extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}},Ke=class extends B{constructor(e){super(),this.writable=!1,ze(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new cn(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"?this.write(e):pc("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){let t=ei(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){let e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){let t=Gs(e);return t.length?"?"+t:""}};var io=ce(Oe(),1),Be=(0,io.default)("engine.io-client:polling"),ti=class extends Ke{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";let t=()=>{Be("paused"),this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(Be("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){Be("pre-pause polling complete"),--n||t()})),this.writable||(Be("we are currently writing - waiting to pause"),n++,this.once("drain",function(){Be("pre-pause writing complete"),--n||t()}))}else t()}_poll(){Be("polling"),this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){Be("polling got data %s",e);let t=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Rs(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"?this._poll():Be('ignoring poll - transport state "%s"',this.readyState))}doClose(){let e=()=>{Be("writing close packet"),this.write([{type:"close"}])};this.readyState==="open"?(Be("transport open - closing"),e()):(Be("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,Ps(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=rn()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}};var no=!1;try{no=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}var ro=no;var oo=ce(Oe(),1),tr=(0,oo.default)("engine.io-client:polling");function mc(){}var dn=class extends ti{constructor(e){if(super(e),typeof location<"u"){let t=location.protocol==="https:",n=location.port;n||(n=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){let n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(r,s)=>{this.onError("xhr post error",r,s)})}doPoll(){tr("xhr poll");let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,n)=>{this.onError("xhr poll error",t,n)}),this.pollXhr=e}},ii=(()=>{class i extends B{constructor(t,n,r){super(),this.createRequest=t,ze(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;let n=nn(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;let r=this._xhr=this.createRequest(n);try{tr("xhr open %s: %s",this._method,this._uri),r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},tr("xhr data %s",this._data),r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=i.requestsCount++,i.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=mc,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete i.requests[this._index],this._xhr=null}}_onLoad(){let t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}return i.requestsCount=0,i.requests={},i})();if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",so);else if(typeof addEventListener=="function"){let i="onpagehide"in Ce?"pagehide":"unload";addEventListener(i,so,!1)}}function so(){for(let i in ii.requests)ii.requests.hasOwnProperty(i)&&ii.requests[i].abort()}var Sf=function(){let i=gc({xdomain:!1});return i&&i.responseType!==null}();function gc(i){let e=i.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||ro))return new XMLHttpRequest}catch{}if(!e)try{return new Ce[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}var _c=ir.default||ir,ni=class extends dn{request(e={}){var t;return Object.assign(e,{xd:this.xd,cookieJar:(t=this.socket)===null||t===void 0?void 0:t._cookieJar},this.opts),new ii(n=>new _c(n),this.uri(),e)}};var Dd=ce(uo(),1),Ad=ce(fr(),1),Md=ce(mr(),1),Sr=ce(xr(),1),Td=ce(la(),1);var ca=ce(Oe(),1),Nd=(0,ca.default)("engine.io-client:websocket"),Od=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",Sn=class extends Ke{get name(){return"websocket"}doOpen(){let e=this.uri(),t=this.opts.protocols,n=Od?{}:nn(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let n=e[t],r=t===e.length-1;Zt(n,this.supportsBinary,s=>{try{this.doWrite(n,s)}catch{Nd("websocket closed before onclose event")}r&&$e(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=rn()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}},ep=Ce.WebSocket||Ce.MozWebSocket;var pi=class extends Sn{createSocket(e,t,n){var r;if(!((r=this.socket)===null||r===void 0)&&r._cookieJar){n.headers=n.headers||{},n.headers.cookie=typeof n.headers.cookie=="string"?[n.headers.cookie]:n.headers.cookie||[];for(let[s,c]of this.socket._cookieJar.cookies)n.headers.cookie.push(`${s}=${c.value}`)}return new Sr.default(e,t,n)}doWrite(e,t){let n={};e.options&&(n.compress=e.options.compress),this.opts.perMessageDeflate&&(typeof t=="string"?Buffer.byteLength(t):t.length)<this.opts.perMessageDeflate.threshold&&(n.compress=!1),this.ws.send(t,n)}};var da=ce(Oe(),1),mi=(0,da.default)("engine.io-client:webtransport"),gi=class extends Ke{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{mi("transport closed gracefully"),this.onClose()}).catch(e=>{mi("transport closed due to %s",e),this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{let t=Bs(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=Ls();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();let s=()=>{n.read().then(({done:d,value:u})=>{if(d){mi("session is closed");return}mi("received chunk: %o",u),this.onPacket(u),s()}).catch(d=>{mi("an error occurred while reading: %s",d)})};s();let c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let n=e[t],r=t===e.length-1;this._writer.write(n).then(()=>{r&&$e(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}};var wr={websocket:pi,webtransport:gi,polling:ni};var Id=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Vd=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Dt(i){if(i.length>8e3)throw"URI too long";let e=i,t=i.indexOf("["),n=i.indexOf("]");t!=-1&&n!=-1&&(i=i.substring(0,t)+i.substring(t,n).replace(/:/g,";")+i.substring(n,i.length));let r=Id.exec(i||""),s={},c=14;for(;c--;)s[Vd[c]]=r[c]||"";return t!=-1&&n!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=Fd(s,s.path),s.queryKey=Pd(s,s.query),s}function Fd(i,e){let t=/\/{2,9}/g,n=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function Pd(i,e){let t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,r,s){r&&(t[r]=s)}),t}var ua=ce(Oe(),1),R=(0,ua.default)("engine.io-client:socket"),kr=typeof addEventListener=="function"&&typeof removeEventListener=="function",_i=[];kr&&addEventListener("offline",()=>{R("closing %d connection(s) because the network was lost",_i.length),_i.forEach(i=>i())},!1);var wn=(()=>{class i extends B{constructor(t,n){if(super(),this.binaryType=Us,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){let r=Dt(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=Dt(n.host).host);ze(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{let s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=qs(this.opts.query)),kr&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(R("adding listener for the 'offline' event"),this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},_i.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=js()),this._open()}createTransport(t){R('creating transport "%s"',t);let n=Object.assign({},this.opts.query);n.EIO=Xn,n.transport=t,this.id&&(n.sid=this.id);let r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return R("options: %j",r),new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}let t=this.opts.rememberUpgrade&&i.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";let n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){R("setting transport %s",t.name),this.transport&&(R("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){R("socket open"),this.readyState="open",i.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(R('socket receive: type "%s", data "%s"',t.type,t.data),this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}else R('packet received with socket readyState "%s"',this.readyState)}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let t=this._getWritablePackets();R("flushing %d packets in socket",t.length),this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){let s=this.writeBuffer[r].data;if(s&&(n+=Ws(s)),r>0&&n>this._maxPayload)return R("only send %d out of %d packets",r,this.writeBuffer.length),this.writeBuffer.slice(0,r);n+=2}return R("payload size is %d (max: %d)",n,this._maxPayload),this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let t=Date.now()>this._pingTimeoutTime;return t&&(R("throttled timer detected, scheduling connection close"),this._pingTimeoutTime=0,$e(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;let c={type:t,data:n,options:r};this.emitReserved("packetCreate",c),this.writeBuffer.push(c),s&&this.once("flush",s),this.flush()}close(){let t=()=>{this._onClose("forced close"),R("socket closing - telling transport to close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(R("socket error %j",t),i.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return R("trying next transport"),this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(R('socket close with reason: "%s"',t),this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),kr&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let r=_i.indexOf(this._offlineEventListener);r!==-1&&(R("removing listener for the 'offline' event"),_i.splice(r,1))}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}return i.protocol=Xn,i})(),kn=class extends wn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade){R("starting upgrade probes");for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}}_probe(e){R('probing transport "%s"',e);let t=this.createTransport(e),n=!1;wn.priorWebsocketSuccess=!1;let r=()=>{n||(R('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",m=>{if(!n)if(m.type==="pong"&&m.data==="probe"){if(R('probe transport "%s" pong',e),this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;wn.priorWebsocketSuccess=t.name==="websocket",R('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{n||this.readyState!=="closed"&&(R("changing transport and sending upgrade packet"),h(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{R('probe transport "%s" failed',e);let _=new Error("probe error");_.transport=t.name,this.emitReserved("upgradeError",_)}}))};function s(){n||(n=!0,h(),t.close(),t=null)}let c=m=>{let _=new Error("probe error: "+m);_.transport=t.name,s(),R('probe transport "%s" failed because of error: %s',e,m),this.emitReserved("upgradeError",_)};function d(){c("transport closed")}function u(){c("socket closed")}function p(m){t&&m.name!==t.name&&(R('"%s" works - aborting "%s"',m.name,t.name),s())}let h=()=>{t.removeListener("open",r),t.removeListener("error",c),t.removeListener("close",d),this.off("close",u),this.off("upgrading",p)};t.once("open",r),t.once("error",c),t.once("close",d),this.once("close",u),this.once("upgrading",p),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){let t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}},At=class extends kn{constructor(e,t={}){let n=typeof e=="object"?e:t;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(r=>wr[r]).filter(r=>!!r)),super(e,n)}};var Ap=At.protocol;var fa=ce(Oe(),1),ha=(0,fa.default)("socket.io-client:url");function pa(i,e="",t){let n=i;t=t||typeof location<"u"&&location,i==null&&(i=t.protocol+"//"+t.host),typeof i=="string"&&(i.charAt(0)==="/"&&(i.charAt(1)==="/"?i=t.protocol+i:i=t.host+i),/^(https?|wss?):\/\//.test(i)||(ha("protocol-less url %s",i),typeof t<"u"?i=t.protocol+"//"+i:i="https://"+i),ha("parse %s",i),n=Dt(i)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";let s=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port+e,n.href=n.protocol+"://"+s+(t&&t.port===n.port?"":":"+n.port),n}var Ir={};Pa(Ir,{Decoder:()=>Nr,Encoder:()=>Tr,PacketType:()=>S,protocol:()=>ba});var Rd=typeof ArrayBuffer=="function",Ld=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i.buffer instanceof ArrayBuffer,ma=Object.prototype.toString,Bd=typeof Blob=="function"||typeof Blob<"u"&&ma.call(Blob)==="[object BlobConstructor]",Ud=typeof File=="function"||typeof File<"u"&&ma.call(File)==="[object FileConstructor]";function yi(i){return Rd&&(i instanceof ArrayBuffer||Ld(i))||Bd&&i instanceof Blob||Ud&&i instanceof File}function vi(i,e){if(!i||typeof i!="object")return!1;if(Array.isArray(i)){for(let t=0,n=i.length;t<n;t++)if(vi(i[t]))return!0;return!1}if(yi(i))return!0;if(i.toJSON&&typeof i.toJSON=="function"&&arguments.length===1)return vi(i.toJSON(),!0);for(let t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&vi(i[t]))return!0;return!1}function ga(i){let e=[],t=i.data,n=i;return n.data=Dr(t,e),n.attachments=e.length,{packet:n,buffers:e}}function Dr(i,e){if(!i)return i;if(yi(i)){let t={_placeholder:!0,num:e.length};return e.push(i),t}else if(Array.isArray(i)){let t=new Array(i.length);for(let n=0;n<i.length;n++)t[n]=Dr(i[n],e);return t}else if(typeof i=="object"&&!(i instanceof Date)){let t={};for(let n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=Dr(i[n],e));return t}return i}function _a(i,e){return i.data=Ar(i.data,e),delete i.attachments,i}function Ar(i,e){if(!i)return i;if(i&&i._placeholder===!0){if(typeof i.num=="number"&&i.num>=0&&i.num<e.length)return e[i.num];throw new Error("illegal attachments")}else if(Array.isArray(i))for(let t=0;t<i.length;t++)i[t]=Ar(i[t],e);else if(typeof i=="object")for(let t in i)Object.prototype.hasOwnProperty.call(i,t)&&(i[t]=Ar(i[t],e));return i}var ya=ce(Oe(),1),Mr=(0,ya.default)("socket.io-parser"),jd=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ba=5,S=function(i){return i[i.CONNECT=0]="CONNECT",i[i.DISCONNECT=1]="DISCONNECT",i[i.EVENT=2]="EVENT",i[i.ACK=3]="ACK",i[i.CONNECT_ERROR=4]="CONNECT_ERROR",i[i.BINARY_EVENT=5]="BINARY_EVENT",i[i.BINARY_ACK=6]="BINARY_ACK",i}(S||{}),Tr=class{constructor(e){this.replacer=e}encode(e){return Mr("encoding packet %j",e),(e.type===S.EVENT||e.type===S.ACK)&&vi(e)?this.encodeAsBinary({type:e.type===S.EVENT?S.BINARY_EVENT:S.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===S.BINARY_EVENT||e.type===S.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),Mr("encoded %j as %s",e,t),t}encodeAsBinary(e){let t=ga(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}};function va(i){return Object.prototype.toString.call(i)==="[object Object]"}var Nr=class i extends B{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);let n=t.type===S.BINARY_EVENT;n||t.type===S.BINARY_ACK?(t.type=n?S.EVENT:S.ACK,this.reconstructor=new Or(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(yi(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0,n={type:Number(e.charAt(0))};if(S[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===S.BINARY_EVENT||n.type===S.BINARY_ACK){let s=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);let c=e.substring(s,t);if(c!=Number(c)||e.charAt(t)!=="-")throw new Error("Illegal attachments");n.attachments=Number(c)}if(e.charAt(t+1)==="/"){let s=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););n.nsp=e.substring(s,t)}else n.nsp="/";let r=e.charAt(t+1);if(r!==""&&Number(r)==r){let s=t+1;for(;++t;){let c=e.charAt(t);if(c==null||Number(c)!=c){--t;break}if(t===e.length)break}n.id=Number(e.substring(s,t+1))}if(e.charAt(++t)){let s=this.tryParse(e.substr(t));if(i.isPayloadValid(n.type,s))n.data=s;else throw new Error("invalid payload")}return Mr("decoded %s as %j",e,n),n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case S.CONNECT:return va(t);case S.DISCONNECT:return t===void 0;case S.CONNECT_ERROR:return typeof t=="string"||va(t);case S.EVENT:case S.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&jd.indexOf(t[0])===-1);case S.ACK:case S.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}},Or=class{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){let t=_a(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function Te(i,e,t){return i.on(e,t),function(){i.off(e,t)}}var Ca=ce(Oe(),1),re=(0,Ca.default)("socket.io-client:socket"),Wd=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Mt=class extends B{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let e=this.io;this.subs=[Te(e,"open",this.onopen.bind(this)),Te(e,"packet",this.onpacket.bind(this)),Te(e,"error",this.onerror.bind(this)),Te(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,r,s;if(Wd.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;let c={type:S.EVENT,data:t};if(c.options={},c.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){let h=this.ids++;re("emitting packet with ack id %d",h);let m=t.pop();this._registerAckCallback(h,m),c.id=h}let d=(r=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||r===void 0?void 0:r.writable,u=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!d?re("discard packet as the transport is not currently writable"):u?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c),this.flags={},this}_registerAckCallback(e,t){var n;let r=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(r===void 0){this.acks[e]=t;return}let s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let d=0;d<this.sendBuffer.length;d++)this.sendBuffer[d].id===e&&(re("removing packet with ack id %d from the buffer",e),this.sendBuffer.splice(d,1));re("event with ack id %d has timed out after %d ms",e,r),t.call(this,new Error("operation has timed out"))},r),c=(...d)=>{this.io.clearTimeoutFn(s),t.apply(this,d)};c.withError=!0,this.acks[e]=c}emitWithAck(e,...t){return new Promise((n,r)=>{let s=(c,d)=>c?r(c):n(d);s.withError=!0,t.push(s),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());let n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...s)=>n!==this._queue[0]?void 0:(r!==null?n.tryCount>this._opts.retries&&(re("packet [%d] is discarded after %d tries",n.id,n.tryCount),this._queue.shift(),t&&t(r)):(re("packet [%d] was successfully sent",n.id),this._queue.shift(),t&&t(null,...s)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(re("draining queue"),!this.connected||this._queue.length===0)return;let t=this._queue[0];if(t.pending&&!e){re("packet [%d] has already been sent and is waiting for an ack",t.id);return}t.pending=!0,t.tryCount++,re("sending packet [%d] (try n\xB0%d)",t.id,t.tryCount),this.flags=t.flags,this.emit.apply(this,t.args)}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){re("transport is open - connecting"),typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:S.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){re("close (%s)",e),this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){let n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case S.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case S.EVENT:case S.BINARY_EVENT:this.onevent(e);break;case S.ACK:case S.BINARY_ACK:this.onack(e);break;case S.DISCONNECT:this.ondisconnect();break;case S.CONNECT_ERROR:this.destroy();let n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){let t=e.data||[];re("emitting event %j",t),e.id!=null&&(re("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){let t=this._anyListeners.slice();for(let n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){let t=this,n=!1;return function(...r){n||(n=!0,re("sending ack %j",r),t.packet({type:S.ACK,id:e,data:r}))}}onack(e){let t=this.acks[e.id];if(typeof t!="function"){re("bad ack %s",e.id);return}delete this.acks[e.id],re("calling ack %s with %j",e.id,e.data),t.withError&&e.data.unshift(null),t.apply(this,e.data)}onconnect(e,t){re("socket connected with id %s",e),this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){re("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(re("performing disconnect (%s)",this.nsp),this.packet({type:S.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let t=this._anyOutgoingListeners.slice();for(let n of t)n.apply(this,e.data)}}};function ut(i){i=i||{},this.ms=i.min||100,this.max=i.max||1e4,this.factor=i.factor||2,this.jitter=i.jitter>0&&i.jitter<=1?i.jitter:0,this.attempts=0}ut.prototype.duration=function(){var i=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*i);i=Math.floor(e*10)&1?i+t:i-t}return Math.min(i,this.max)|0};ut.prototype.reset=function(){this.attempts=0};ut.prototype.setMin=function(i){this.ms=i};ut.prototype.setMax=function(i){this.max=i};ut.prototype.setJitter=function(i){this.jitter=i};var xa=ce(Oe(),1),de=(0,xa.default)("socket.io-client:manager"),Tt=class extends B{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,ze(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((n=t.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new ut({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;let r=t.parser||Ir;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(de("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;de("opening %s",this.uri),this.engine=new At(this.uri,this.opts);let t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;let r=Te(t,"open",function(){n.onopen(),e&&e()}),s=d=>{de("error"),this.cleanup(),this._readyState="closed",this.emitReserved("error",d),e?e(d):this.maybeReconnectOnOpen()},c=Te(t,"error",s);if(this._timeout!==!1){let d=this._timeout;de("connect attempt will timeout after %d",d);let u=this.setTimeoutFn(()=>{de("connect attempt timed out after %d",d),r(),s(new Error("timeout")),t.close()},d);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(r),this.subs.push(c),this}connect(e){return this.open(e)}onopen(){de("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(Te(e,"ping",this.onping.bind(this)),Te(e,"data",this.ondata.bind(this)),Te(e,"error",this.onerror.bind(this)),Te(e,"close",this.onclose.bind(this)),Te(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){$e(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){de("error",e),this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Mt(this,e,t),this.nsps[e]=n),n}_destroy(e){let t=Object.keys(this.nsps);for(let n of t)if(this.nsps[n].active){de("socket %s is still active, skipping close",n);return}this._close()}_packet(e){de("writing packet %j",e);let t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){de("cleanup"),this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){de("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;de("closed due to %s",e),this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)de("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let t=this.backoff.duration();de("will wait %dms before reconnect attempt",t),this._reconnecting=!0;let n=this.setTimeoutFn(()=>{e.skipReconnect||(de("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(de("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):(de("reconnect success"),e.onreconnect())}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}};var Sa=ce(Oe(),1),Ea=(0,Sa.default)("socket.io-client"),bi={};function Qe(i,e){typeof i=="object"&&(e=i,i=void 0),e=e||{};let t=pa(i,e.path||"/socket.io"),n=t.source,r=t.id,s=t.path,c=bi[r]&&s in bi[r].nsps,d=e.forceNew||e["force new connection"]||e.multiplex===!1||c,u;return d?(Ea("ignoring socket cache for %s",n),u=new Tt(n,e)):(bi[r]||(Ea("new io instance for %s",n),bi[r]=new Tt(n,e)),u=bi[r]),t.query&&!e.query&&(e.query=t.queryKey),u.socket(t.path,e)}Object.assign(Qe,{Manager:Tt,Socket:Mt,io:Qe,connect:Qe});function Gd(i,e){if(i&1){let t=pe();a(0,"tr")(1,"td"),l(2),o(),a(3,"td"),l(4),o(),a(5,"td",13),l(6),o(),a(7,"td")(8,"button",14),E("click",function(){let r=j(t).$implicit,s=k(2);return W(s.translate(r.package_description,r._id))}),l(9,"Translate"),o()()()}if(i&2){let t=e.$implicit;f(2),F(t.package_title),f(2),F(t.package_description),f(),me("id",t._id),f(),F(t.translated)}}function qd(i,e){if(i&1&&(a(0,"table",10)(1,"thead",11)(2,"tr")(3,"th"),l(4,"Title"),o(),a(5,"th"),l(6,"Description"),o(),a(7,"th"),l(8,"Translated Description"),o(),a(9,"th"),l(10,"Translate Description"),o()()(),a(11,"tbody"),I(12,Gd,10,4,"tr",12),o()()),i&2){let t=k();f(12),M("ngForOf",t.packages)}}var wa=Qe(),Dn=class i{constructor(e,t){this.databaseService=t}packages=[];target="ar";loading=!0;ngOnInit(){wa.on("translate",e=>{let t=document.getElementById(e.id);t&&(t.innerHTML=e.text)}),this.databaseService.getPackages().subscribe(e=>{this.packages=e,this.loading=!1})}translate(e,t){let n=document.getElementById(t);n&&(n.innerHTML="Translating..."),wa.emit("translate",{target:this.target,text:e,id:t})}static \u0275fac=function(t){return new(t||i)(v(ki),v(w))};static \u0275cmp=C({type:i,selectors:[["app-translate-description"]],standalone:!0,features:[x],decls:15,vars:2,consts:[[2,"height","70%","display","flex","justify-content","center","align-items","center"],[1,"card",2,"padding","20px","width","1000px","display","flex","flex-direction","column"],[2,"text-align","center","margin-bottom","20px"],[1,"mb-3",2,"margin-left","280px"],[1,"form-label"],["aria-label","Default select example",1,"form-select",2,"width","400px",3,"ngModelChange","ngModel"],["value","ar","selected",""],["value","fr"],["value","de"],["class","table","style","margin-top: 0px;",4,"ngIf"],[1,"table",2,"margin-top","0px"],[1,"table"],[4,"ngFor","ngForOf"],[3,"id"],[1,"btn","btn-primary",2,"margin-bottom","0",3,"click"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"form",1)(2,"h2",2),l(3,"Translate Description"),o(),a(4,"div",3)(5,"label",4),l(6,"Target Language"),o(),a(7,"select",5),O("ngModelChange",function(s){return N(n.target,s)||(n.target=s),s}),a(8,"option",6),l(9,"Arabic"),o(),a(10,"option",7),l(11,"French"),o(),a(12,"option",8),l(13,"German"),o()()(),I(14,qd,13,1,"table",9),o()()),t&2&&(f(7),T("ngModel",n.target),f(7),M("ngIf",!n.loading))},dependencies:[L,z,Se,we,_e,ae,$,ne,q,Z,Q,ge]})};function Hd(i,e){if(i&1){let t=pe();a(0,"tr")(1,"td"),l(2),o(),a(3,"td"),l(4),o(),fe(5,"td",7),a(6,"td")(7,"button",8),E("click",function(){let r=j(t).$implicit,s=k(2);return W(s.textToSpeech(r.driver_licence,r._id))}),l(8,"Generate"),o()()()}if(i&2){let t=e.$implicit;f(2),F(t.driver_name),f(2),F(t.driver_licence),f(),me("id",t._id)}}function $d(i,e){if(i&1&&(a(0,"table",4)(1,"thead",5)(2,"tr")(3,"th"),l(4,"Name"),o(),a(5,"th"),l(6,"Licence"),o(),a(7,"th"),l(8,"Licence Audio"),o(),a(9,"th"),l(10,"Generate Audio"),o()()(),a(11,"tbody"),I(12,Hd,9,3,"tr",6),o()()),i&2){let t=k();f(12),M("ngForOf",t.drivers)}}var ka=Qe(),An=class i{constructor(e){this.databaseService=e}drivers=[];loading=!0;ngOnInit(){ka.on("textToSpeech",e=>{let t=new window.AudioContext;t.decodeAudioData(e.audioContent,n=>{let r=t.createBufferSource();r.buffer=n,r.connect(t.destination),r.start(0);let s=new Blob([e.audioContent],{type:"audio/mp3"}),c=URL.createObjectURL(s),d=document.createElement("audio");d.src=c,d.controls=!0;let u=document.getElementById(e.id);u&&(u.innerHTML="",u.appendChild(d))},n=>{console.error("Error decoding audio data:",n)})}),this.databaseService.getDrivers().subscribe(e=>{this.drivers=e,this.loading=!1})}textToSpeech(e,t){let n=document.getElementById(t);n&&(n.innerHTML="Generating Speech..."),ka.emit("textToSpeech",{licence:e,id:t})}static \u0275fac=function(t){return new(t||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-text-to-speech"]],standalone:!0,features:[x],decls:5,vars:1,consts:[[2,"height","70%","display","flex","justify-content","center","align-items","center"],[1,"card",2,"padding","20px","width","1000px","display","flex","flex-direction","column"],[2,"text-align","center","margin-bottom","20px"],["class","table","style","margin-top: 0px;",4,"ngIf"],[1,"table",2,"margin-top","0px"],[1,"table"],[4,"ngFor","ngForOf"],[3,"id"],[1,"btn","btn-primary",2,"margin-bottom","0",3,"click"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"form",1)(2,"h2",2),l(3,"Generate Licence Audio"),o(),I(4,$d,13,1,"table",3),o()()),t&2&&(f(4),M("ngIf",!n.loading))},dependencies:[L,z,$,q,Z,Q,ge]})};function zd(i,e){if(i&1){let t=pe();a(0,"tr")(1,"td"),l(2),o(),a(3,"td"),l(4),o(),fe(5,"td",7),a(6,"td")(7,"button",8),E("click",function(){let r=j(t).$implicit,s=k(2);return W(s.calculateDistance(r.package_destination,r._id))}),l(8,"Calculate"),o()()()}if(i&2){let t=e.$implicit;f(2),F(t.package_title),f(2),F(t.package_destination),f(),me("id",t._id)}}function Kd(i,e){if(i&1&&(a(0,"table",4)(1,"thead",5)(2,"tr")(3,"th"),l(4,"Title"),o(),a(5,"th"),l(6,"Destination"),o(),a(7,"th"),l(8,"Distance"),o(),a(9,"th"),l(10,"Calculate Distance"),o()()(),a(11,"tbody"),I(12,zd,9,3,"tr",6),o()()),i&2){let t=k();f(12),M("ngForOf",t.packages)}}var Da=Qe(),Mn=class i{constructor(e,t){this.databaseService=t}packages=[];loading=!0;ngOnInit(){Da.on("generateText",e=>{let t=document.getElementById(e.id);t&&(t.innerHTML=e.text.response.candidates[0].content.parts[0].text)}),this.databaseService.getPackages().subscribe(e=>{this.packages=e,this.loading=!1})}calculateDistance(e,t){Da.emit("generateText",{text:e,id:t})}static \u0275fac=function(t){return new(t||i)(v(ki),v(w))};static \u0275cmp=C({type:i,selectors:[["app-generative-ai"]],standalone:!0,features:[x],decls:5,vars:1,consts:[[2,"height","70%","display","flex","justify-content","center","align-items","center"],[1,"card",2,"padding","20px","width","1000px","display","flex","flex-direction","column"],[2,"text-align","center","margin-bottom","20px"],["class","table","style","margin-top: 0px;",4,"ngIf"],[1,"table",2,"margin-top","0px"],[1,"table"],[4,"ngFor","ngForOf"],[3,"id"],[1,"btn","btn-primary",2,"margin-bottom","0",3,"click"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"form",1)(2,"h2",2),l(3,"Distance Calculator (AI)"),o(),I(4,Kd,13,1,"table",3),o()()),t&2&&(f(4),M("ngIf",!n.loading))},dependencies:[L,z,$,q,Z,Q,ge]})};var Aa=[{path:"",component:Oi},{path:"login",component:Ji},{path:"signup",component:Qi},{path:"drivers",component:Hi,canActivate:[De]},{path:"drivers/add",component:ji,canActivate:[De]},{path:"drivers/update",component:Ki,canActivate:[De]},{path:"drivers/delete",component:Gi,canActivate:[De]},{path:"packages",component:zi,canActivate:[De]},{path:"packages/add",component:Wi,canActivate:[De]},{path:"packages/update",component:Yi,canActivate:[De]},{path:"packages/delete",component:qi,canActivate:[De]},{path:"stats",component:Xi,canActivate:[De]},{path:"translate",component:Dn,canActivate:[De]},{path:"text-to-speech",component:An,canActivate:[De]},{path:"generative-ai",component:Mn,canActivate:[De]},{path:"invalid",component:Zi},{path:"**",component:Ni,pathMatch:"full"}];var Ma={providers:[Hr({eventCoalescing:!0}),ns(Aa),Zr(),Jr()]};var Yd={providers:[es()]},Ta=Kr(Ma,Yd);var Xd=()=>Qr(Ti,Ta),og=Xd;export{$s as a,og as b};
