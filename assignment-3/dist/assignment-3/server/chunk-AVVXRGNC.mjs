import './polyfills.server.mjs';
import{$ as E,A as C,Aa as ys,B as Bi,Ba as ir,C as te,Ca as ji,D as us,E as hs,Ea as Z,F as Xn,Fa as ge,G as j,Ga as Wi,H as W,Ha as Q,I as He,Ia as nr,J as Jn,Ja as bs,K as jt,Ka as Cs,L as fs,La as xs,M as Wt,Ma as Es,N as Zn,Na as Ss,O as p,P as v,Q as Gt,Qa as ws,R as qt,S as xe,T as I,U as Ui,Ua as ks,V as M,W as Qn,Wa as oe,X as a,Xa as Ds,Y as o,Ya as As,Z as fe,_ as pe,a as Ii,aa as k,b as Vi,ba as me,c as Fi,ca as c,d as rs,da as F,e as ss,ea as G,f as Pi,fa as T,g as qe,ga as N,h as os,ha as O,i as zn,ia as Fe,j as as,ja as x,k as Kn,ka as Ht,l as Yn,la as $t,m as mt,n as Lt,na as ps,o as lt,oa as ms,p as ls,pa as er,q as cs,r as Bt,s as ds,sa as gs,t as Ri,u as Ve,ua as tr,v as gt,va as _s,w as Li,x as tt,xa as vs,y as Ut,ya as zt,z as J,za as it}from"./chunk-N6MRK2K2.mjs";import{a as R,b as ee,c as P,e as K,f as cl,g as ce,h as Oi}from"./chunk-5XUXGTUW.mjs";var io=K((bf,to)=>{"use strict";var xt=P("fs"),eo=P("url"),uc=P("child_process").spawn;to.exports=fr;fr.XMLHttpRequest=fr;function fr(i){"use strict";i=i||{};var t=this,e=P("http"),n=P("https"),r,s,l={},d=!1,u={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},f=Object.assign({},u),h=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],m=["TRACE","TRACK","CONNECT"],_=!1,D=!1,V=!1,y={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),this.status=null,this.statusText=null;var A=function(g){return d||g&&h.indexOf(g.toLowerCase())===-1},ue=function(g){return g&&m.indexOf(g)===-1};this.open=function(g,b,he,se,ke){if(this.abort(),D=!1,V=!1,!ue(g))throw new Error("SecurityError: Request method not allowed");l={method:g,url:b.toString(),async:typeof he!="boolean"?!0:he,user:se||null,password:ke||null},X(this.OPENED)},this.setDisableHeaderCheck=function(g){d=g},this.setRequestHeader=function(g,b){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!A(g))return console.warn('Refused to set unsafe header "'+g+'"'),!1;if(_)throw new Error("INVALID_STATE_ERR: send flag is true");return f[g]=b,!0},this.getResponseHeader=function(g){return typeof g=="string"&&this.readyState>this.OPENED&&s.headers[g.toLowerCase()]&&!D?s.headers[g.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||D)return"";var g="";for(var b in s.headers)b!=="set-cookie"&&b!=="set-cookie2"&&(g+=b+": "+s.headers[b]+`\r
`);return g.substr(0,g.length-2)},this.getRequestHeader=function(g){return typeof g=="string"&&f[g]?f[g]:""},this.send=function(g){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(_)throw new Error("INVALID_STATE_ERR: send has already been called");var b=!1,he=!1,se=eo.parse(l.url),ke;switch(se.protocol){case"https:":b=!0;case"http:":ke=se.hostname;break;case"file:":he=!0;break;case void 0:case"":ke="localhost";break;default:throw new Error("Protocol not supported.")}if(he){if(l.method!=="GET")throw new Error("XMLHttpRequest: Only GET method is supported");if(l.async)xt.readFile(unescape(se.pathname),function(Ne,at){Ne?t.handleError(Ne,Ne.errno||-1):(t.status=200,t.responseText=at.toString("utf8"),t.response=at,X(t.DONE))});else try{this.response=xt.readFileSync(unescape(se.pathname)),this.responseText=this.response.toString("utf8"),this.status=200,X(t.DONE)}catch(Ne){this.handleError(Ne,Ne.errno||-1)}return}var We=se.port||(b?443:80),ot=se.pathname+(se.search?se.search:"");if(f.Host=ke,b&&We===443||We===80||(f.Host+=":"+se.port),l.user){typeof l.password>"u"&&(l.password="");var Hn=new Buffer(l.user+":"+l.password);f.Authorization="Basic "+Hn.toString("base64")}l.method==="GET"||l.method==="HEAD"?g=null:g?(f["Content-Length"]=Buffer.isBuffer(g)?g.length:Buffer.byteLength(g),f["Content-Type"]||(f["Content-Type"]="text/plain;charset=UTF-8")):l.method==="POST"&&(f["Content-Length"]=0);var rl=i.agent||!1,Ge={host:ke,port:We,path:ot,method:l.method,headers:f,agent:rl};if(b&&(Ge.pfx=i.pfx,Ge.key=i.key,Ge.passphrase=i.passphrase,Ge.cert=i.cert,Ge.ca=i.ca,Ge.ciphers=i.ciphers,Ge.rejectUnauthorized=i.rejectUnauthorized!==!1),D=!1,l.async){var ts=b?n.request:e.request;_=!0,t.dispatchEvent("readystatechange");var is=function(Ne){if(s=Ne,s.statusCode===302||s.statusCode===303||s.statusCode===307){l.url=s.headers.location;var at=eo.parse(l.url);ke=at.hostname;var et={hostname:at.hostname,port:at.port,path:at.path,method:s.statusCode===303?"GET":l.method,headers:f};b&&(et.pfx=i.pfx,et.key=i.key,et.passphrase=i.passphrase,et.cert=i.cert,et.ca=i.ca,et.ciphers=i.ciphers,et.rejectUnauthorized=i.rejectUnauthorized!==!1),r=ts(et,is).on("error",ns),r.end();return}X(t.HEADERS_RECEIVED),t.status=s.statusCode,s.on("data",function(Ni){if(Ni){var ll=Buffer.from(Ni);t.response=Buffer.concat([t.response,ll])}_&&X(t.LOADING)}),s.on("end",function(){_&&(_=!1,X(t.DONE),t.responseText=t.response.toString("utf8"))}),s.on("error",function(Ni){t.handleError(Ni)})},ns=function(Ne){t.handleError(Ne)};r=ts(Ge,is).on("error",ns),i.autoUnref&&r.on("socket",Ne=>{Ne.unref()}),g&&r.write(g),r.end(),t.dispatchEvent("loadstart")}else{var Pt=".node-xmlhttprequest-content-"+process.pid,Rt=".node-xmlhttprequest-sync-"+process.pid;xt.writeFileSync(Rt,"","utf8");for(var sl="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(b?"s":"")+".request;var options = "+JSON.stringify(Ge)+";var responseText = '';var responseData = Buffer.alloc(0);var req = doRequest(options, function(response) {response.on('data', function(chunk) {  var data = Buffer.from(chunk);  responseText += data.toString('utf8');  responseData = Buffer.concat([responseData, data]);});response.on('end', function() {fs.writeFileSync('"+Pt+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText, data: responseData.toString('base64')}}), 'utf8');fs.unlinkSync('"+Rt+"');});response.on('error', function(error) {fs.writeFileSync('"+Pt+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+Rt+"');});}).on('error', function(error) {fs.writeFileSync('"+Pt+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+Rt+"');});"+(g?"req.write('"+JSON.stringify(g).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",ol=uc(process.argv[0],["-e",sl]),Mu;xt.existsSync(Rt););if(t.responseText=xt.readFileSync(Pt,"utf8"),ol.stdin.end(),xt.unlinkSync(Pt),t.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var al=JSON.parse(t.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,""));t.handleError(al,503)}else{t.status=t.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1");var $n=JSON.parse(t.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1"));s={statusCode:t.status,headers:$n.data.headers},t.responseText=$n.data.text,t.response=Buffer.from($n.data.data,"base64"),X(t.DONE,!0)}}},this.handleError=function(g,b){this.status=b||0,this.statusText=g,this.responseText=g.stack,D=!0,X(this.DONE)},this.abort=function(){r&&(r.abort(),r=null),f=Object.assign({},u),this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),D=V=!0,this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||_)&&this.readyState!==this.DONE&&(_=!1,X(this.DONE)),this.readyState=this.UNSENT},this.addEventListener=function(g,b){g in y||(y[g]=[]),y[g].push(b)},this.removeEventListener=function(g,b){g in y&&(y[g]=y[g].filter(function(he){return he!==b}))},this.dispatchEvent=function(g){if(typeof t["on"+g]=="function"&&(this.readyState===this.DONE&&l.async?setTimeout(function(){t["on"+g]()},0):t["on"+g]()),g in y)for(let b=0,he=y[g].length;b<he;b++)this.readyState===this.DONE?setTimeout(function(){y[g][b].call(t)},0):y[g][b].call(t)};var X=function(g){if(!(t.readyState===g||t.readyState===t.UNSENT&&V)&&(t.readyState=g,(l.async||t.readyState<t.OPENED||t.readyState===t.DONE)&&t.dispatchEvent("readystatechange"),t.readyState===t.DONE)){let b;V?b="abort":D?b="error":b="load",t.dispatchEvent(b),t.dispatchEvent("loadend")}}}});var vo=K((Ff,_o)=>{"use strict";var Et=1e3,St=Et*60,wt=St*60,ct=wt*24,vc=ct*7,yc=ct*365.25;_o.exports=function(i,t){t=t||{};var e=typeof i;if(e==="string"&&i.length>0)return bc(i);if(e==="number"&&isFinite(i))return t.long?xc(i):Cc(i);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))};function bc(i){if(i=String(i),!(i.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(t){var e=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return e*yc;case"weeks":case"week":case"w":return e*vc;case"days":case"day":case"d":return e*ct;case"hours":case"hour":case"hrs":case"hr":case"h":return e*wt;case"minutes":case"minute":case"mins":case"min":case"m":return e*St;case"seconds":case"second":case"secs":case"sec":case"s":return e*Et;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return e;default:return}}}}function Cc(i){var t=Math.abs(i);return t>=ct?Math.round(i/ct)+"d":t>=wt?Math.round(i/wt)+"h":t>=St?Math.round(i/St)+"m":t>=Et?Math.round(i/Et)+"s":i+"ms"}function xc(i){var t=Math.abs(i);return t>=ct?bn(i,t,ct,"day"):t>=wt?bn(i,t,wt,"hour"):t>=St?bn(i,t,St,"minute"):t>=Et?bn(i,t,Et,"second"):i+" ms"}function bn(i,t,e,n){var r=t>=e*1.5;return Math.round(i/e)+" "+n+(r?"s":"")}});var vr=K((Pf,yo)=>{"use strict";function Ec(i){e.debug=e,e.default=e,e.coerce=u,e.disable=s,e.enable=r,e.enabled=l,e.humanize=vo(),e.destroy=f,Object.keys(i).forEach(h=>{e[h]=i[h]}),e.names=[],e.skips=[],e.formatters={};function t(h){let m=0;for(let _=0;_<h.length;_++)m=(m<<5)-m+h.charCodeAt(_),m|=0;return e.colors[Math.abs(m)%e.colors.length]}e.selectColor=t;function e(h){let m,_=null,D,V;function y(...A){if(!y.enabled)return;let ue=y,X=Number(new Date),g=X-(m||X);ue.diff=g,ue.prev=m,ue.curr=X,m=X,A[0]=e.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let b=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(se,ke)=>{if(se==="%%")return"%";b++;let We=e.formatters[ke];if(typeof We=="function"){let ot=A[b];se=We.call(ue,ot),A.splice(b,1),b--}return se}),e.formatArgs.call(ue,A),(ue.log||e.log).apply(ue,A)}return y.namespace=h,y.useColors=e.useColors(),y.color=e.selectColor(h),y.extend=n,y.destroy=e.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>_!==null?_:(D!==e.namespaces&&(D=e.namespaces,V=e.enabled(h)),V),set:A=>{_=A}}),typeof e.init=="function"&&e.init(y),y}function n(h,m){let _=e(this.namespace+(typeof m>"u"?":":m)+h);return _.log=this.log,_}function r(h){e.save(h),e.namespaces=h,e.names=[],e.skips=[];let m,_=(typeof h=="string"?h:"").split(/[\s,]+/),D=_.length;for(m=0;m<D;m++)_[m]&&(h=_[m].replace(/\*/g,".*?"),h[0]==="-"?e.skips.push(new RegExp("^"+h.slice(1)+"$")):e.names.push(new RegExp("^"+h+"$")))}function s(){let h=[...e.names.map(d),...e.skips.map(d).map(m=>"-"+m)].join(",");return e.enable(""),h}function l(h){if(h[h.length-1]==="*")return!0;let m,_;for(m=0,_=e.skips.length;m<_;m++)if(e.skips[m].test(h))return!1;for(m=0,_=e.names.length;m<_;m++)if(e.names[m].test(h))return!0;return!1}function d(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}function u(h){return h instanceof Error?h.stack||h.message:h}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return e.enable(e.load()),e}yo.exports=Ec});var bo=K((Ae,Cn)=>{"use strict";Ae.formatArgs=wc;Ae.save=kc;Ae.load=Dc;Ae.useColors=Sc;Ae.storage=Ac();Ae.destroy=(()=>{let i=!1;return()=>{i||(i=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ae.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Sc(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let i;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(i=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(i[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function wc(i){if(i[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+i[0]+(this.useColors?"%c ":" ")+"+"+Cn.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;i.splice(1,0,t,"color: inherit");let e=0,n=0;i[0].replace(/%[a-zA-Z%]/g,r=>{r!=="%%"&&(e++,r==="%c"&&(n=e))}),i.splice(n,0,t)}Ae.log=console.debug||console.log||(()=>{});function kc(i){try{i?Ae.storage.setItem("debug",i):Ae.storage.removeItem("debug")}catch{}}function Dc(){let i;try{i=Ae.storage.getItem("debug")}catch{}return!i&&typeof process<"u"&&"env"in process&&(i=process.env.DEBUG),i}function Ac(){try{return localStorage}catch{}}Cn.exports=vr()(Ae);var{formatters:Mc}=Cn.exports;Mc.j=function(i){try{return JSON.stringify(i)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var xo=K((Rf,Co)=>{"use strict";Co.exports=(i,t)=>{t=t||process.argv;let e=i.startsWith("-")?"":i.length===1?"-":"--",n=t.indexOf(e+i),r=t.indexOf("--");return n!==-1&&(r===-1?!0:n<r)}});var So=K((Lf,Eo)=>{"use strict";var Tc=P("os"),Le=xo(),ve=process.env,kt;Le("no-color")||Le("no-colors")||Le("color=false")?kt=!1:(Le("color")||Le("colors")||Le("color=true")||Le("color=always"))&&(kt=!0);"FORCE_COLOR"in ve&&(kt=ve.FORCE_COLOR.length===0||parseInt(ve.FORCE_COLOR,10)!==0);function Nc(i){return i===0?!1:{level:i,hasBasic:!0,has256:i>=2,has16m:i>=3}}function Oc(i){if(kt===!1)return 0;if(Le("color=16m")||Le("color=full")||Le("color=truecolor"))return 3;if(Le("color=256"))return 2;if(i&&!i.isTTY&&kt!==!0)return 0;let t=kt?1:0;if(process.platform==="win32"){let e=Tc.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in ve)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in ve)||ve.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in ve)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ve.TEAMCITY_VERSION)?1:0;if(ve.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in ve){let e=parseInt((ve.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ve.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ve.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ve.TERM)||"COLORTERM"in ve?1:(ve.TERM==="dumb",t)}function yr(i){let t=Oc(i);return Nc(t)}Eo.exports={supportsColor:yr,stdout:yr(process.stdout),stderr:yr(process.stderr)}});var ko=K((le,En)=>{"use strict";var Ic=P("tty"),xn=P("util");le.init=Uc;le.log=Rc;le.formatArgs=Fc;le.save=Lc;le.load=Bc;le.useColors=Vc;le.destroy=xn.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");le.colors=[6,2,3,4,5,1];try{let i=So();i&&(i.stderr||i).level>=2&&(le.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}le.inspectOpts=Object.keys(process.env).filter(i=>/^debug_/i.test(i)).reduce((i,t)=>{let e=t.substring(6).toLowerCase().replace(/_([a-z])/g,(r,s)=>s.toUpperCase()),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),i[e]=n,i},{});function Vc(){return"colors"in le.inspectOpts?!!le.inspectOpts.colors:Ic.isatty(process.stderr.fd)}function Fc(i){let{namespace:t,useColors:e}=this;if(e){let n=this.color,r="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${r};1m${t} \x1B[0m`;i[0]=s+i[0].split(`
`).join(`
`+s),i.push(r+"m+"+En.exports.humanize(this.diff)+"\x1B[0m")}else i[0]=Pc()+t+" "+i[0]}function Pc(){return le.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Rc(...i){return process.stderr.write(xn.formatWithOptions(le.inspectOpts,...i)+`
`)}function Lc(i){i?process.env.DEBUG=i:delete process.env.DEBUG}function Bc(){return process.env.DEBUG}function Uc(i){i.inspectOpts={};let t=Object.keys(le.inspectOpts);for(let e=0;e<t.length;e++)i.inspectOpts[t[e]]=le.inspectOpts[t[e]]}En.exports=vr()(le);var{formatters:wo}=En.exports;wo.o=function(i){return this.inspectOpts.colors=this.useColors,xn.inspect(i,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};wo.O=function(i){return this.inspectOpts.colors=this.useColors,xn.inspect(i,this.inspectOpts)}});var Oe=K((Bf,br)=>{"use strict";typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?br.exports=bo():br.exports=ko()});var Po=K((sp,Fo)=>{"use strict";var{Duplex:Hc}=P("stream");function Io(i){i.emit("close")}function $c(){!this.destroyed&&this._writableState.finished&&this.destroy()}function Vo(i){this.removeListener("error",Vo),this.destroy(),this.listenerCount("error")===0&&this.emit("error",i)}function zc(i,t){let e=!0,n=new Hc(ee(R({},t),{autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1}));return i.on("message",function(s,l){let d=!l&&n._readableState.objectMode?s.toString():s;n.push(d)||i.pause()}),i.once("error",function(s){n.destroyed||(e=!1,n.destroy(s))}),i.once("close",function(){n.destroyed||n.push(null)}),n._destroy=function(r,s){if(i.readyState===i.CLOSED){s(r),process.nextTick(Io,n);return}let l=!1;i.once("error",function(u){l=!0,s(u)}),i.once("close",function(){l||s(r),process.nextTick(Io,n)}),e&&i.terminate()},n._final=function(r){if(i.readyState===i.CONNECTING){i.once("open",function(){n._final(r)});return}i._socket!==null&&(i._socket._writableState.finished?(r(),n._readableState.endEmitted&&n.destroy()):(i._socket.once("finish",function(){r()}),i.close()))},n._read=function(){i.isPaused&&i.resume()},n._write=function(r,s,l){if(i.readyState===i.CONNECTING){i.once("open",function(){n._write(r,s,l)});return}i.send(r,l)},n.on("end",$c),n.on("error",Vo),n}Fo.exports=zc});var nt=K((ap,Ro)=>{"use strict";Ro.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var hi=K((lp,kn)=>{"use strict";var{EMPTY_BUFFER:Kc}=nt(),Er=Buffer[Symbol.species];function Yc(i,t){if(i.length===0)return Kc;if(i.length===1)return i[0];let e=Buffer.allocUnsafe(t),n=0;for(let r=0;r<i.length;r++){let s=i[r];e.set(s,n),n+=s.length}return n<t?new Er(e.buffer,e.byteOffset,n):e}function Lo(i,t,e,n,r){for(let s=0;s<r;s++)e[n+s]=i[s]^t[s&3]}function Bo(i,t){for(let e=0;e<i.length;e++)i[e]^=t[e&3]}function Xc(i){return i.length===i.buffer.byteLength?i.buffer:i.buffer.slice(i.byteOffset,i.byteOffset+i.length)}function Sr(i){if(Sr.readOnly=!0,Buffer.isBuffer(i))return i;let t;return i instanceof ArrayBuffer?t=new Er(i):ArrayBuffer.isView(i)?t=new Er(i.buffer,i.byteOffset,i.byteLength):(t=Buffer.from(i),Sr.readOnly=!1),t}kn.exports={concat:Yc,mask:Lo,toArrayBuffer:Xc,toBuffer:Sr,unmask:Bo};if(!process.env.WS_NO_BUFFER_UTIL)try{let i=P("bufferutil");kn.exports.mask=function(t,e,n,r,s){s<48?Lo(t,e,n,r,s):i.mask(t,e,n,r,s)},kn.exports.unmask=function(t,e){t.length<32?Bo(t,e):i.unmask(t,e)}}catch{}});var Wo=K((cp,jo)=>{"use strict";var Uo=Symbol("kDone"),wr=Symbol("kRun"),kr=class{constructor(t){this[Uo]=()=>{this.pending--,this[wr]()},this.concurrency=t||1/0,this.jobs=[],this.pending=0}add(t){this.jobs.push(t),this[wr]()}[wr](){if(this.pending!==this.concurrency&&this.jobs.length){let t=this.jobs.shift();this.pending++,t(this[Uo])}}};jo.exports=kr});var mi=K((dp,$o)=>{"use strict";var fi=P("zlib"),Go=hi(),Jc=Wo(),{kStatusCode:qo}=nt(),Zc=Buffer[Symbol.species],Qc=Buffer.from([0,0,255,255]),Mn=Symbol("permessage-deflate"),Xe=Symbol("total-length"),pi=Symbol("callback"),rt=Symbol("buffers"),An=Symbol("error"),Dn,Dr=class{constructor(t,e,n){if(this._maxPayload=n|0,this._options=t||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!e,this._deflate=null,this._inflate=null,this.params=null,!Dn){let r=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;Dn=new Jc(r)}}static get extensionName(){return"permessage-deflate"}offer(){let t={};return this._options.serverNoContextTakeover&&(t.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(t.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(t.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?t.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(t.client_max_window_bits=!0),t}accept(t){return t=this.normalizeParams(t),this.params=this._isServer?this.acceptAsServer(t):this.acceptAsClient(t),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let t=this._deflate[pi];this._deflate.close(),this._deflate=null,t&&t(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(t){let e=this._options,n=t.find(r=>!(e.serverNoContextTakeover===!1&&r.server_no_context_takeover||r.server_max_window_bits&&(e.serverMaxWindowBits===!1||typeof e.serverMaxWindowBits=="number"&&e.serverMaxWindowBits>r.server_max_window_bits)||typeof e.clientMaxWindowBits=="number"&&!r.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return e.serverNoContextTakeover&&(n.server_no_context_takeover=!0),e.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof e.serverMaxWindowBits=="number"&&(n.server_max_window_bits=e.serverMaxWindowBits),typeof e.clientMaxWindowBits=="number"?n.client_max_window_bits=e.clientMaxWindowBits:(n.client_max_window_bits===!0||e.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(t){let e=t[0];if(this._options.clientNoContextTakeover===!1&&e.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!e.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(e.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&e.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return e}normalizeParams(t){return t.forEach(e=>{Object.keys(e).forEach(n=>{let r=e[n];if(r.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(r=r[0],n==="client_max_window_bits"){if(r!==!0){let s=+r;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${n}": ${r}`);r=s}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${r}`)}else if(n==="server_max_window_bits"){let s=+r;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${n}": ${r}`);r=s}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(r!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${r}`)}else throw new Error(`Unknown parameter "${n}"`);e[n]=r})}),t}decompress(t,e,n){Dn.add(r=>{this._decompress(t,e,(s,l)=>{r(),n(s,l)})})}compress(t,e,n){Dn.add(r=>{this._compress(t,e,(s,l)=>{r(),n(s,l)})})}_decompress(t,e,n){let r=this._isServer?"client":"server";if(!this._inflate){let s=`${r}_max_window_bits`,l=typeof this.params[s]!="number"?fi.Z_DEFAULT_WINDOWBITS:this.params[s];this._inflate=fi.createInflateRaw(ee(R({},this._options.zlibInflateOptions),{windowBits:l})),this._inflate[Mn]=this,this._inflate[Xe]=0,this._inflate[rt]=[],this._inflate.on("error",td),this._inflate.on("data",Ho)}this._inflate[pi]=n,this._inflate.write(t),e&&this._inflate.write(Qc),this._inflate.flush(()=>{let s=this._inflate[An];if(s){this._inflate.close(),this._inflate=null,n(s);return}let l=Go.concat(this._inflate[rt],this._inflate[Xe]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[Xe]=0,this._inflate[rt]=[],e&&this.params[`${r}_no_context_takeover`]&&this._inflate.reset()),n(null,l)})}_compress(t,e,n){let r=this._isServer?"server":"client";if(!this._deflate){let s=`${r}_max_window_bits`,l=typeof this.params[s]!="number"?fi.Z_DEFAULT_WINDOWBITS:this.params[s];this._deflate=fi.createDeflateRaw(ee(R({},this._options.zlibDeflateOptions),{windowBits:l})),this._deflate[Xe]=0,this._deflate[rt]=[],this._deflate.on("data",ed)}this._deflate[pi]=n,this._deflate.write(t),this._deflate.flush(fi.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let s=Go.concat(this._deflate[rt],this._deflate[Xe]);e&&(s=new Zc(s.buffer,s.byteOffset,s.length-4)),this._deflate[pi]=null,this._deflate[Xe]=0,this._deflate[rt]=[],e&&this.params[`${r}_no_context_takeover`]&&this._deflate.reset(),n(null,s)})}};$o.exports=Dr;function ed(i){this[rt].push(i),this[Xe]+=i.length}function Ho(i){if(this[Xe]+=i.length,this[Mn]._maxPayload<1||this[Xe]<=this[Mn]._maxPayload){this[rt].push(i);return}this[An]=new RangeError("Max payload size exceeded"),this[An].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[An][qo]=1009,this.removeListener("data",Ho),this.reset()}function td(i){this[Mn]._inflate=null,i[qo]=1007,this[pi](i)}});var gi=K((hp,Tn)=>{"use strict";var{isUtf8:zo}=P("buffer"),id=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function nd(i){return i>=1e3&&i<=1014&&i!==1004&&i!==1005&&i!==1006||i>=3e3&&i<=4999}function Ar(i){let t=i.length,e=0;for(;e<t;)if(!(i[e]&128))e++;else if((i[e]&224)===192){if(e+1===t||(i[e+1]&192)!==128||(i[e]&254)===192)return!1;e+=2}else if((i[e]&240)===224){if(e+2>=t||(i[e+1]&192)!==128||(i[e+2]&192)!==128||i[e]===224&&(i[e+1]&224)===128||i[e]===237&&(i[e+1]&224)===160)return!1;e+=3}else if((i[e]&248)===240){if(e+3>=t||(i[e+1]&192)!==128||(i[e+2]&192)!==128||(i[e+3]&192)!==128||i[e]===240&&(i[e+1]&240)===128||i[e]===244&&i[e+1]>143||i[e]>244)return!1;e+=4}else return!1;return!0}Tn.exports={isValidStatusCode:nd,isValidUTF8:Ar,tokenChars:id};if(zo)Tn.exports.isValidUTF8=function(i){return i.length<24?Ar(i):zo(i)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let i=P("utf-8-validate");Tn.exports.isValidUTF8=function(t){return t.length<32?Ar(t):i(t)}}catch{}});var Ir=K((fp,ea)=>{"use strict";var{Writable:rd}=P("stream"),Ko=mi(),{BINARY_TYPES:sd,EMPTY_BUFFER:Yo,kStatusCode:od,kWebSocket:ad}=nt(),{concat:Mr,toArrayBuffer:ld,unmask:cd}=hi(),{isValidStatusCode:dd,isValidUTF8:Xo}=gi(),Nn=Buffer[Symbol.species],Ie=0,Jo=1,Zo=2,Qo=3,Tr=4,Nr=5,On=6,Or=class extends rd{constructor(t={}){super(),this._allowSynchronousEvents=t.allowSynchronousEvents!==void 0?t.allowSynchronousEvents:!0,this._binaryType=t.binaryType||sd[0],this._extensions=t.extensions||{},this._isServer=!!t.isServer,this._maxPayload=t.maxPayload|0,this._skipUTF8Validation=!!t.skipUTF8Validation,this[ad]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=Ie}_write(t,e,n){if(this._opcode===8&&this._state==Ie)return n();this._bufferedBytes+=t.length,this._buffers.push(t),this.startLoop(n)}consume(t){if(this._bufferedBytes-=t,t===this._buffers[0].length)return this._buffers.shift();if(t<this._buffers[0].length){let n=this._buffers[0];return this._buffers[0]=new Nn(n.buffer,n.byteOffset+t,n.length-t),new Nn(n.buffer,n.byteOffset,t)}let e=Buffer.allocUnsafe(t);do{let n=this._buffers[0],r=e.length-t;t>=n.length?e.set(this._buffers.shift(),r):(e.set(new Uint8Array(n.buffer,n.byteOffset,t),r),this._buffers[0]=new Nn(n.buffer,n.byteOffset+t,n.length-t)),t-=n.length}while(t>0);return e}startLoop(t){this._loop=!0;do switch(this._state){case Ie:this.getInfo(t);break;case Jo:this.getPayloadLength16(t);break;case Zo:this.getPayloadLength64(t);break;case Qo:this.getMask();break;case Tr:this.getData(t);break;case Nr:case On:this._loop=!1;return}while(this._loop);this._errored||t()}getInfo(t){if(this._bufferedBytes<2){this._loop=!1;return}let e=this.consume(2);if(e[0]&48){let r=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");t(r);return}let n=(e[0]&64)===64;if(n&&!this._extensions[Ko.extensionName]){let r=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");t(r);return}if(this._fin=(e[0]&128)===128,this._opcode=e[0]&15,this._payloadLength=e[1]&127,this._opcode===0){if(n){let r=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");t(r);return}if(!this._fragmented){let r=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");t(r);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let r=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");t(r);return}this._compressed=n}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let r=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");t(r);return}if(n){let r=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");t(r);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let r=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");t(r);return}}else{let r=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");t(r);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(e[1]&128)===128,this._isServer){if(!this._masked){let r=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");t(r);return}}else if(this._masked){let r=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");t(r);return}this._payloadLength===126?this._state=Jo:this._payloadLength===127?this._state=Zo:this.haveLength(t)}getPayloadLength16(t){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(t)}getPayloadLength64(t){if(this._bufferedBytes<8){this._loop=!1;return}let e=this.consume(8),n=e.readUInt32BE(0);if(n>Math.pow(2,21)-1){let r=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");t(r);return}this._payloadLength=n*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength(t)}haveLength(t){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let e=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");t(e);return}this._masked?this._state=Qo:this._state=Tr}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=Tr}getData(t){let e=Yo;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}e=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&cd(e,this._mask)}if(this._opcode>7){this.controlMessage(e,t);return}if(this._compressed){this._state=Nr,this.decompress(e,t);return}e.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(e)),this.dataMessage(t)}decompress(t,e){this._extensions[Ko.extensionName].decompress(t,this._fin,(r,s)=>{if(r)return e(r);if(s.length){if(this._messageLength+=s.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let l=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(l);return}this._fragments.push(s)}this.dataMessage(e),this._state===Ie&&this.startLoop(e)})}dataMessage(t){if(!this._fin){this._state=Ie;return}let e=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let r;this._binaryType==="nodebuffer"?r=Mr(n,e):this._binaryType==="arraybuffer"?r=ld(Mr(n,e)):r=n,this._allowSynchronousEvents?(this.emit("message",r,!0),this._state=Ie):(this._state=On,setImmediate(()=>{this.emit("message",r,!0),this._state=Ie,this.startLoop(t)}))}else{let r=Mr(n,e);if(!this._skipUTF8Validation&&!Xo(r)){let s=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");t(s);return}this._state===Nr||this._allowSynchronousEvents?(this.emit("message",r,!1),this._state=Ie):(this._state=On,setImmediate(()=>{this.emit("message",r,!1),this._state=Ie,this.startLoop(t)}))}}controlMessage(t,e){if(this._opcode===8){if(t.length===0)this._loop=!1,this.emit("conclude",1005,Yo),this.end();else{let n=t.readUInt16BE(0);if(!dd(n)){let s=this.createError(RangeError,`invalid status code ${n}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");e(s);return}let r=new Nn(t.buffer,t.byteOffset+2,t.length-2);if(!this._skipUTF8Validation&&!Xo(r)){let s=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(s);return}this._loop=!1,this.emit("conclude",n,r),this.end()}this._state=Ie;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",t),this._state=Ie):(this._state=On,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",t),this._state=Ie,this.startLoop(e)}))}createError(t,e,n,r,s){this._loop=!1,this._errored=!0;let l=new t(n?`Invalid WebSocket frame: ${e}`:e);return Error.captureStackTrace(l,this.createError),l.code=s,l[od]=r,l}};ea.exports=Or});var Fr=K((mp,na)=>{"use strict";var{Duplex:pp}=P("stream"),{randomFillSync:ud}=P("crypto"),ta=mi(),{EMPTY_BUFFER:hd}=nt(),{isValidStatusCode:fd}=gi(),{mask:ia,toBuffer:Dt}=hi(),Ue=Symbol("kByteLength"),pd=Buffer.alloc(4),In=8*1024,dt,At=In,Vr=class i{constructor(t,e,n){this._extensions=e||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=t,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(t,e){let n,r=!1,s=2,l=!1;e.mask&&(n=e.maskBuffer||pd,e.generateMask?e.generateMask(n):(At===In&&(dt===void 0&&(dt=Buffer.alloc(In)),ud(dt,0,In),At=0),n[0]=dt[At++],n[1]=dt[At++],n[2]=dt[At++],n[3]=dt[At++]),l=(n[0]|n[1]|n[2]|n[3])===0,s=6);let d;typeof t=="string"?(!e.mask||l)&&e[Ue]!==void 0?d=e[Ue]:(t=Buffer.from(t),d=t.length):(d=t.length,r=e.mask&&e.readOnly&&!l);let u=d;d>=65536?(s+=8,u=127):d>125&&(s+=2,u=126);let f=Buffer.allocUnsafe(r?d+s:s);return f[0]=e.fin?e.opcode|128:e.opcode,e.rsv1&&(f[0]|=64),f[1]=u,u===126?f.writeUInt16BE(d,2):u===127&&(f[2]=f[3]=0,f.writeUIntBE(d,4,6)),e.mask?(f[1]|=128,f[s-4]=n[0],f[s-3]=n[1],f[s-2]=n[2],f[s-1]=n[3],l?[f,t]:r?(ia(t,n,f,s,d),[f]):(ia(t,n,t,0,d),[f,t])):[f,t]}close(t,e,n,r){let s;if(t===void 0)s=hd;else{if(typeof t!="number"||!fd(t))throw new TypeError("First argument must be a valid error code number");if(e===void 0||!e.length)s=Buffer.allocUnsafe(2),s.writeUInt16BE(t,0);else{let d=Buffer.byteLength(e);if(d>123)throw new RangeError("The message must not be greater than 123 bytes");s=Buffer.allocUnsafe(2+d),s.writeUInt16BE(t,0),typeof e=="string"?s.write(e,2):s.set(e,2)}}let l={[Ue]:s.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,s,!1,l,r]):this.sendFrame(i.frame(s,l),r)}ping(t,e,n){let r,s;if(typeof t=="string"?(r=Buffer.byteLength(t),s=!1):(t=Dt(t),r=t.length,s=Dt.readOnly),r>125)throw new RangeError("The data size must not be greater than 125 bytes");let l={[Ue]:r,fin:!0,generateMask:this._generateMask,mask:e,maskBuffer:this._maskBuffer,opcode:9,readOnly:s,rsv1:!1};this._deflating?this.enqueue([this.dispatch,t,!1,l,n]):this.sendFrame(i.frame(t,l),n)}pong(t,e,n){let r,s;if(typeof t=="string"?(r=Buffer.byteLength(t),s=!1):(t=Dt(t),r=t.length,s=Dt.readOnly),r>125)throw new RangeError("The data size must not be greater than 125 bytes");let l={[Ue]:r,fin:!0,generateMask:this._generateMask,mask:e,maskBuffer:this._maskBuffer,opcode:10,readOnly:s,rsv1:!1};this._deflating?this.enqueue([this.dispatch,t,!1,l,n]):this.sendFrame(i.frame(t,l),n)}send(t,e,n){let r=this._extensions[ta.extensionName],s=e.binary?2:1,l=e.compress,d,u;if(typeof t=="string"?(d=Buffer.byteLength(t),u=!1):(t=Dt(t),d=t.length,u=Dt.readOnly),this._firstFragment?(this._firstFragment=!1,l&&r&&r.params[r._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(l=d>=r._threshold),this._compress=l):(l=!1,s=0),e.fin&&(this._firstFragment=!0),r){let f={[Ue]:d,fin:e.fin,generateMask:this._generateMask,mask:e.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:u,rsv1:l};this._deflating?this.enqueue([this.dispatch,t,this._compress,f,n]):this.dispatch(t,this._compress,f,n)}else this.sendFrame(i.frame(t,{[Ue]:d,fin:e.fin,generateMask:this._generateMask,mask:e.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:u,rsv1:!1}),n)}dispatch(t,e,n,r){if(!e){this.sendFrame(i.frame(t,n),r);return}let s=this._extensions[ta.extensionName];this._bufferedBytes+=n[Ue],this._deflating=!0,s.compress(t,n.fin,(l,d)=>{if(this._socket.destroyed){let u=new Error("The socket was closed while data was being compressed");typeof r=="function"&&r(u);for(let f=0;f<this._queue.length;f++){let h=this._queue[f],m=h[h.length-1];typeof m=="function"&&m(u)}return}this._bufferedBytes-=n[Ue],this._deflating=!1,n.readOnly=!1,this.sendFrame(i.frame(d,n),r),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let t=this._queue.shift();this._bufferedBytes-=t[3][Ue],Reflect.apply(t[0],this,t.slice(1))}}enqueue(t){this._bufferedBytes+=t[3][Ue],this._queue.push(t)}sendFrame(t,e){t.length===2?(this._socket.cork(),this._socket.write(t[0]),this._socket.write(t[1],e),this._socket.uncork()):this._socket.write(t[0],e)}};na.exports=Vr});var ha=K((gp,ua)=>{"use strict";var{kForOnEventAttribute:_i,kListener:Pr}=nt(),ra=Symbol("kCode"),sa=Symbol("kData"),oa=Symbol("kError"),aa=Symbol("kMessage"),la=Symbol("kReason"),Mt=Symbol("kTarget"),ca=Symbol("kType"),da=Symbol("kWasClean"),Je=class{constructor(t){this[Mt]=null,this[ca]=t}get target(){return this[Mt]}get type(){return this[ca]}};Object.defineProperty(Je.prototype,"target",{enumerable:!0});Object.defineProperty(Je.prototype,"type",{enumerable:!0});var ut=class extends Je{constructor(t,e={}){super(t),this[ra]=e.code===void 0?0:e.code,this[la]=e.reason===void 0?"":e.reason,this[da]=e.wasClean===void 0?!1:e.wasClean}get code(){return this[ra]}get reason(){return this[la]}get wasClean(){return this[da]}};Object.defineProperty(ut.prototype,"code",{enumerable:!0});Object.defineProperty(ut.prototype,"reason",{enumerable:!0});Object.defineProperty(ut.prototype,"wasClean",{enumerable:!0});var Tt=class extends Je{constructor(t,e={}){super(t),this[oa]=e.error===void 0?null:e.error,this[aa]=e.message===void 0?"":e.message}get error(){return this[oa]}get message(){return this[aa]}};Object.defineProperty(Tt.prototype,"error",{enumerable:!0});Object.defineProperty(Tt.prototype,"message",{enumerable:!0});var vi=class extends Je{constructor(t,e={}){super(t),this[sa]=e.data===void 0?null:e.data}get data(){return this[sa]}};Object.defineProperty(vi.prototype,"data",{enumerable:!0});var md={addEventListener(i,t,e={}){for(let r of this.listeners(i))if(!e[_i]&&r[Pr]===t&&!r[_i])return;let n;if(i==="message")n=function(s,l){let d=new vi("message",{data:l?s:s.toString()});d[Mt]=this,Vn(t,this,d)};else if(i==="close")n=function(s,l){let d=new ut("close",{code:s,reason:l.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});d[Mt]=this,Vn(t,this,d)};else if(i==="error")n=function(s){let l=new Tt("error",{error:s,message:s.message});l[Mt]=this,Vn(t,this,l)};else if(i==="open")n=function(){let s=new Je("open");s[Mt]=this,Vn(t,this,s)};else return;n[_i]=!!e[_i],n[Pr]=t,e.once?this.once(i,n):this.on(i,n)},removeEventListener(i,t){for(let e of this.listeners(i))if(e[Pr]===t&&!e[_i]){this.removeListener(i,e);break}}};ua.exports={CloseEvent:ut,ErrorEvent:Tt,Event:Je,EventTarget:md,MessageEvent:vi};function Vn(i,t,e){typeof i=="object"&&i.handleEvent?i.handleEvent.call(i,e):i.call(t,e)}});var Rr=K((_p,fa)=>{"use strict";var{tokenChars:yi}=gi();function je(i,t,e){i[t]===void 0?i[t]=[e]:i[t].push(e)}function gd(i){let t=Object.create(null),e=Object.create(null),n=!1,r=!1,s=!1,l,d,u=-1,f=-1,h=-1,m=0;for(;m<i.length;m++)if(f=i.charCodeAt(m),l===void 0)if(h===-1&&yi[f]===1)u===-1&&(u=m);else if(m!==0&&(f===32||f===9))h===-1&&u!==-1&&(h=m);else if(f===59||f===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${m}`);h===-1&&(h=m);let D=i.slice(u,h);f===44?(je(t,D,e),e=Object.create(null)):l=D,u=h=-1}else throw new SyntaxError(`Unexpected character at index ${m}`);else if(d===void 0)if(h===-1&&yi[f]===1)u===-1&&(u=m);else if(f===32||f===9)h===-1&&u!==-1&&(h=m);else if(f===59||f===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${m}`);h===-1&&(h=m),je(e,i.slice(u,h),!0),f===44&&(je(t,l,e),e=Object.create(null),l=void 0),u=h=-1}else if(f===61&&u!==-1&&h===-1)d=i.slice(u,m),u=h=-1;else throw new SyntaxError(`Unexpected character at index ${m}`);else if(r){if(yi[f]!==1)throw new SyntaxError(`Unexpected character at index ${m}`);u===-1?u=m:n||(n=!0),r=!1}else if(s)if(yi[f]===1)u===-1&&(u=m);else if(f===34&&u!==-1)s=!1,h=m;else if(f===92)r=!0;else throw new SyntaxError(`Unexpected character at index ${m}`);else if(f===34&&i.charCodeAt(m-1)===61)s=!0;else if(h===-1&&yi[f]===1)u===-1&&(u=m);else if(u!==-1&&(f===32||f===9))h===-1&&(h=m);else if(f===59||f===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${m}`);h===-1&&(h=m);let D=i.slice(u,h);n&&(D=D.replace(/\\/g,""),n=!1),je(e,d,D),f===44&&(je(t,l,e),e=Object.create(null),l=void 0),d=void 0,u=h=-1}else throw new SyntaxError(`Unexpected character at index ${m}`);if(u===-1||s||f===32||f===9)throw new SyntaxError("Unexpected end of input");h===-1&&(h=m);let _=i.slice(u,h);return l===void 0?je(t,_,e):(d===void 0?je(e,_,!0):n?je(e,d,_.replace(/\\/g,"")):je(e,d,_),je(t,l,e)),t}function _d(i){return Object.keys(i).map(t=>{let e=i[t];return Array.isArray(e)||(e=[e]),e.map(n=>[t].concat(Object.keys(n).map(r=>{let s=n[r];return Array.isArray(s)||(s=[s]),s.map(l=>l===!0?r:`${r}=${l}`).join("; ")})).join("; ")).join(", ")}).join(", ")}fa.exports={format:_d,parse:gd}});var Wr=K((bp,Sa)=>{"use strict";var vd=P("events"),yd=P("https"),bd=P("http"),ga=P("net"),Cd=P("tls"),{randomBytes:xd,createHash:Ed}=P("crypto"),{Duplex:vp,Readable:yp}=P("stream"),{URL:Lr}=P("url"),st=mi(),Sd=Ir(),wd=Fr(),{BINARY_TYPES:pa,EMPTY_BUFFER:Fn,GUID:kd,kForOnEventAttribute:Br,kListener:Dd,kStatusCode:Ad,kWebSocket:ye,NOOP:_a}=nt(),{EventTarget:{addEventListener:Md,removeEventListener:Td}}=ha(),{format:Nd,parse:Od}=Rr(),{toBuffer:Id}=hi(),Vd=30*1e3,va=Symbol("kAborted"),Ur=[8,13],Ze=["CONNECTING","OPEN","CLOSING","CLOSED"],Fd=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,Y=class i extends vd{constructor(t,e,n){super(),this._binaryType=pa[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=Fn,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=i.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,t!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,e===void 0?e=[]:Array.isArray(e)||(typeof e=="object"&&e!==null?(n=e,e=[]):e=[e]),ya(this,t,e,n)):(this._autoPong=n.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(t){pa.includes(t)&&(this._binaryType=t,this._receiver&&(this._receiver._binaryType=t))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(t,e,n){let r=new Sd({allowSynchronousEvents:n.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation});this._sender=new wd(t,this._extensions,n.generateMask),this._receiver=r,this._socket=t,r[ye]=this,t[ye]=this,r.on("conclude",Ld),r.on("drain",Bd),r.on("error",Ud),r.on("message",jd),r.on("ping",Wd),r.on("pong",Gd),t.setTimeout&&t.setTimeout(0),t.setNoDelay&&t.setNoDelay(),e.length>0&&t.unshift(e),t.on("close",Ca),t.on("data",Rn),t.on("end",xa),t.on("error",Ea),this._readyState=i.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=i.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[st.extensionName]&&this._extensions[st.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=i.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(t,e){if(this.readyState!==i.CLOSED){if(this.readyState===i.CONNECTING){Me(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===i.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=i.CLOSING,this._sender.close(t,e,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),Vd)}}pause(){this.readyState===i.CONNECTING||this.readyState===i.CLOSED||(this._paused=!0,this._socket.pause())}ping(t,e,n){if(this.readyState===i.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"?(n=t,t=e=void 0):typeof e=="function"&&(n=e,e=void 0),typeof t=="number"&&(t=t.toString()),this.readyState!==i.OPEN){jr(this,t,n);return}e===void 0&&(e=!this._isServer),this._sender.ping(t||Fn,e,n)}pong(t,e,n){if(this.readyState===i.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"?(n=t,t=e=void 0):typeof e=="function"&&(n=e,e=void 0),typeof t=="number"&&(t=t.toString()),this.readyState!==i.OPEN){jr(this,t,n);return}e===void 0&&(e=!this._isServer),this._sender.pong(t||Fn,e,n)}resume(){this.readyState===i.CONNECTING||this.readyState===i.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(t,e,n){if(this.readyState===i.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"&&(n=e,e={}),typeof t=="number"&&(t=t.toString()),this.readyState!==i.OPEN){jr(this,t,n);return}let r=R({binary:typeof t!="string",mask:!this._isServer,compress:!0,fin:!0},e);this._extensions[st.extensionName]||(r.compress=!1),this._sender.send(t||Fn,r,n)}terminate(){if(this.readyState!==i.CLOSED){if(this.readyState===i.CONNECTING){Me(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=i.CLOSING,this._socket.destroy())}}};Object.defineProperty(Y,"CONNECTING",{enumerable:!0,value:Ze.indexOf("CONNECTING")});Object.defineProperty(Y.prototype,"CONNECTING",{enumerable:!0,value:Ze.indexOf("CONNECTING")});Object.defineProperty(Y,"OPEN",{enumerable:!0,value:Ze.indexOf("OPEN")});Object.defineProperty(Y.prototype,"OPEN",{enumerable:!0,value:Ze.indexOf("OPEN")});Object.defineProperty(Y,"CLOSING",{enumerable:!0,value:Ze.indexOf("CLOSING")});Object.defineProperty(Y.prototype,"CLOSING",{enumerable:!0,value:Ze.indexOf("CLOSING")});Object.defineProperty(Y,"CLOSED",{enumerable:!0,value:Ze.indexOf("CLOSED")});Object.defineProperty(Y.prototype,"CLOSED",{enumerable:!0,value:Ze.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(i=>{Object.defineProperty(Y.prototype,i,{enumerable:!0})});["open","error","close","message"].forEach(i=>{Object.defineProperty(Y.prototype,`on${i}`,{enumerable:!0,get(){for(let t of this.listeners(i))if(t[Br])return t[Dd];return null},set(t){for(let e of this.listeners(i))if(e[Br]){this.removeListener(i,e);break}typeof t=="function"&&this.addEventListener(i,t,{[Br]:!0})}})});Y.prototype.addEventListener=Md;Y.prototype.removeEventListener=Td;Sa.exports=Y;function ya(i,t,e,n){let r=ee(R({allowSynchronousEvents:!0,autoPong:!0,protocolVersion:Ur[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10},n),{socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0});if(i._autoPong=r.autoPong,!Ur.includes(r.protocolVersion))throw new RangeError(`Unsupported protocol version: ${r.protocolVersion} (supported versions: ${Ur.join(", ")})`);let s;if(t instanceof Lr)s=t;else try{s=new Lr(t)}catch{throw new SyntaxError(`Invalid URL: ${t}`)}s.protocol==="http:"?s.protocol="ws:":s.protocol==="https:"&&(s.protocol="wss:"),i._url=s.href;let l=s.protocol==="wss:",d=s.protocol==="ws+unix:",u;if(s.protocol!=="ws:"&&!l&&!d?u=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`:d&&!s.pathname?u="The URL's pathname is empty":s.hash&&(u="The URL contains a fragment identifier"),u){let y=new SyntaxError(u);if(i._redirects===0)throw y;Pn(i,y);return}let f=l?443:80,h=xd(16).toString("base64"),m=l?yd.request:bd.request,_=new Set,D;if(r.createConnection=r.createConnection||(l?Rd:Pd),r.defaultPort=r.defaultPort||f,r.port=s.port||f,r.host=s.hostname.startsWith("[")?s.hostname.slice(1,-1):s.hostname,r.headers=ee(R({},r.headers),{"Sec-WebSocket-Version":r.protocolVersion,"Sec-WebSocket-Key":h,Connection:"Upgrade",Upgrade:"websocket"}),r.path=s.pathname+s.search,r.timeout=r.handshakeTimeout,r.perMessageDeflate&&(D=new st(r.perMessageDeflate!==!0?r.perMessageDeflate:{},!1,r.maxPayload),r.headers["Sec-WebSocket-Extensions"]=Nd({[st.extensionName]:D.offer()})),e.length){for(let y of e){if(typeof y!="string"||!Fd.test(y)||_.has(y))throw new SyntaxError("An invalid or duplicated subprotocol was specified");_.add(y)}r.headers["Sec-WebSocket-Protocol"]=e.join(",")}if(r.origin&&(r.protocolVersion<13?r.headers["Sec-WebSocket-Origin"]=r.origin:r.headers.Origin=r.origin),(s.username||s.password)&&(r.auth=`${s.username}:${s.password}`),d){let y=r.path.split(":");r.socketPath=y[0],r.path=y[1]}let V;if(r.followRedirects){if(i._redirects===0){i._originalIpc=d,i._originalSecure=l,i._originalHostOrSocketPath=d?r.socketPath:s.host;let y=n&&n.headers;if(n=ee(R({},n),{headers:{}}),y)for(let[A,ue]of Object.entries(y))n.headers[A.toLowerCase()]=ue}else if(i.listenerCount("redirect")===0){let y=d?i._originalIpc?r.socketPath===i._originalHostOrSocketPath:!1:i._originalIpc?!1:s.host===i._originalHostOrSocketPath;(!y||i._originalSecure&&!l)&&(delete r.headers.authorization,delete r.headers.cookie,y||delete r.headers.host,r.auth=void 0)}r.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(r.auth).toString("base64")),V=i._req=m(r),i._redirects&&i.emit("redirect",i.url,V)}else V=i._req=m(r);r.timeout&&V.on("timeout",()=>{Me(i,V,"Opening handshake has timed out")}),V.on("error",y=>{V===null||V[va]||(V=i._req=null,Pn(i,y))}),V.on("response",y=>{let A=y.headers.location,ue=y.statusCode;if(A&&r.followRedirects&&ue>=300&&ue<400){if(++i._redirects>r.maxRedirects){Me(i,V,"Maximum redirects exceeded");return}V.abort();let X;try{X=new Lr(A,t)}catch{let b=new SyntaxError(`Invalid URL: ${A}`);Pn(i,b);return}ya(i,X,e,n)}else i.emit("unexpected-response",V,y)||Me(i,V,`Unexpected server response: ${y.statusCode}`)}),V.on("upgrade",(y,A,ue)=>{if(i.emit("upgrade",y),i.readyState!==Y.CONNECTING)return;V=i._req=null;let X=y.headers.upgrade;if(X===void 0||X.toLowerCase()!=="websocket"){Me(i,A,"Invalid Upgrade header");return}let g=Ed("sha1").update(h+kd).digest("base64");if(y.headers["sec-websocket-accept"]!==g){Me(i,A,"Invalid Sec-WebSocket-Accept header");return}let b=y.headers["sec-websocket-protocol"],he;if(b!==void 0?_.size?_.has(b)||(he="Server sent an invalid subprotocol"):he="Server sent a subprotocol but none was requested":_.size&&(he="Server sent no subprotocol"),he){Me(i,A,he);return}b&&(i._protocol=b);let se=y.headers["sec-websocket-extensions"];if(se!==void 0){if(!D){Me(i,A,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let ke;try{ke=Od(se)}catch{Me(i,A,"Invalid Sec-WebSocket-Extensions header");return}let We=Object.keys(ke);if(We.length!==1||We[0]!==st.extensionName){Me(i,A,"Server indicated an extension that was not requested");return}try{D.accept(ke[st.extensionName])}catch{Me(i,A,"Invalid Sec-WebSocket-Extensions header");return}i._extensions[st.extensionName]=D}i.setSocket(A,ue,{allowSynchronousEvents:r.allowSynchronousEvents,generateMask:r.generateMask,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation})}),r.finishRequest?r.finishRequest(V,i):V.end()}function Pn(i,t){i._readyState=Y.CLOSING,i.emit("error",t),i.emitClose()}function Pd(i){return i.path=i.socketPath,ga.connect(i)}function Rd(i){return i.path=void 0,!i.servername&&i.servername!==""&&(i.servername=ga.isIP(i.host)?"":i.host),Cd.connect(i)}function Me(i,t,e){i._readyState=Y.CLOSING;let n=new Error(e);Error.captureStackTrace(n,Me),t.setHeader?(t[va]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(Pn,i,n)):(t.destroy(n),t.once("error",i.emit.bind(i,"error")),t.once("close",i.emitClose.bind(i)))}function jr(i,t,e){if(t){let n=Id(t).length;i._socket?i._sender._bufferedBytes+=n:i._bufferedAmount+=n}if(e){let n=new Error(`WebSocket is not open: readyState ${i.readyState} (${Ze[i.readyState]})`);process.nextTick(e,n)}}function Ld(i,t){let e=this[ye];e._closeFrameReceived=!0,e._closeMessage=t,e._closeCode=i,e._socket[ye]!==void 0&&(e._socket.removeListener("data",Rn),process.nextTick(ba,e._socket),i===1005?e.close():e.close(i,t))}function Bd(){let i=this[ye];i.isPaused||i._socket.resume()}function Ud(i){let t=this[ye];t._socket[ye]!==void 0&&(t._socket.removeListener("data",Rn),process.nextTick(ba,t._socket),t.close(i[Ad])),t.emit("error",i)}function ma(){this[ye].emitClose()}function jd(i,t){this[ye].emit("message",i,t)}function Wd(i){let t=this[ye];t._autoPong&&t.pong(i,!this._isServer,_a),t.emit("ping",i)}function Gd(i){this[ye].emit("pong",i)}function ba(i){i.resume()}function Ca(){let i=this[ye];this.removeListener("close",Ca),this.removeListener("data",Rn),this.removeListener("end",xa),i._readyState=Y.CLOSING;let t;!this._readableState.endEmitted&&!i._closeFrameReceived&&!i._receiver._writableState.errorEmitted&&(t=i._socket.read())!==null&&i._receiver.write(t),i._receiver.end(),this[ye]=void 0,clearTimeout(i._closeTimer),i._receiver._writableState.finished||i._receiver._writableState.errorEmitted?i.emitClose():(i._receiver.on("error",ma),i._receiver.on("finish",ma))}function Rn(i){this[ye]._receiver.write(i)||this.pause()}function xa(){let i=this[ye];i._readyState=Y.CLOSING,i._receiver.end(),this.end()}function Ea(){let i=this[ye];this.removeListener("error",Ea),this.on("error",_a),i&&(i._readyState=Y.CLOSING,this.destroy())}});var ka=K((xp,wa)=>{"use strict";var{tokenChars:qd}=gi();function Hd(i){let t=new Set,e=-1,n=-1,r=0;for(r;r<i.length;r++){let l=i.charCodeAt(r);if(n===-1&&qd[l]===1)e===-1&&(e=r);else if(r!==0&&(l===32||l===9))n===-1&&e!==-1&&(n=r);else if(l===44){if(e===-1)throw new SyntaxError(`Unexpected character at index ${r}`);n===-1&&(n=r);let d=i.slice(e,n);if(t.has(d))throw new SyntaxError(`The "${d}" subprotocol is duplicated`);t.add(d),e=n=-1}else throw new SyntaxError(`Unexpected character at index ${r}`)}if(e===-1||n!==-1)throw new SyntaxError("Unexpected end of input");let s=i.slice(e,r);if(t.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);return t.add(s),t}wa.exports={parse:Hd}});var Ia=K((Sp,Oa)=>{"use strict";var $d=P("events"),Ln=P("http"),{Duplex:Ep}=P("stream"),{createHash:zd}=P("crypto"),Da=Rr(),ht=mi(),Kd=ka(),Yd=Wr(),{GUID:Xd,kWebSocket:Jd}=nt(),Zd=/^[+/0-9A-Za-z]{22}==$/,Aa=0,Ma=1,Na=2,Gr=class extends $d{constructor(t,e){if(super(),t=R({allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:Yd},t),t.port==null&&!t.server&&!t.noServer||t.port!=null&&(t.server||t.noServer)||t.server&&t.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(t.port!=null?(this._server=Ln.createServer((n,r)=>{let s=Ln.STATUS_CODES[426];r.writeHead(426,{"Content-Length":s.length,"Content-Type":"text/plain"}),r.end(s)}),this._server.listen(t.port,t.host,t.backlog,e)):t.server&&(this._server=t.server),this._server){let n=this.emit.bind(this,"connection");this._removeListeners=Qd(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(r,s,l)=>{this.handleUpgrade(r,s,l,n)}})}t.perMessageDeflate===!0&&(t.perMessageDeflate={}),t.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=t,this._state=Aa}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(t){if(this._state===Na){t&&this.once("close",()=>{t(new Error("The server is not running"))}),process.nextTick(bi,this);return}if(t&&this.once("close",t),this._state!==Ma)if(this._state=Ma,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(bi,this):process.nextTick(bi,this);else{let e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close(()=>{bi(this)})}}shouldHandle(t){if(this.options.path){let e=t.url.indexOf("?");if((e!==-1?t.url.slice(0,e):t.url)!==this.options.path)return!1}return!0}handleUpgrade(t,e,n,r){e.on("error",Ta);let s=t.headers["sec-websocket-key"],l=t.headers.upgrade,d=+t.headers["sec-websocket-version"];if(t.method!=="GET"){ft(this,t,e,405,"Invalid HTTP method");return}if(l===void 0||l.toLowerCase()!=="websocket"){ft(this,t,e,400,"Invalid Upgrade header");return}if(s===void 0||!Zd.test(s)){ft(this,t,e,400,"Missing or invalid Sec-WebSocket-Key header");return}if(d!==8&&d!==13){ft(this,t,e,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(t)){Ci(e,400);return}let u=t.headers["sec-websocket-protocol"],f=new Set;if(u!==void 0)try{f=Kd.parse(u)}catch{ft(this,t,e,400,"Invalid Sec-WebSocket-Protocol header");return}let h=t.headers["sec-websocket-extensions"],m={};if(this.options.perMessageDeflate&&h!==void 0){let _=new ht(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let D=Da.parse(h);D[ht.extensionName]&&(_.accept(D[ht.extensionName]),m[ht.extensionName]=_)}catch{ft(this,t,e,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let _={origin:t.headers[`${d===8?"sec-websocket-origin":"origin"}`],secure:!!(t.socket.authorized||t.socket.encrypted),req:t};if(this.options.verifyClient.length===2){this.options.verifyClient(_,(D,V,y,A)=>{if(!D)return Ci(e,V||401,y,A);this.completeUpgrade(m,s,f,t,e,n,r)});return}if(!this.options.verifyClient(_))return Ci(e,401)}this.completeUpgrade(m,s,f,t,e,n,r)}completeUpgrade(t,e,n,r,s,l,d){if(!s.readable||!s.writable)return s.destroy();if(s[Jd])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>Aa)return Ci(s,503);let f=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${zd("sha1").update(e+Xd).digest("base64")}`],h=new this.options.WebSocket(null,void 0,this.options);if(n.size){let m=this.options.handleProtocols?this.options.handleProtocols(n,r):n.values().next().value;m&&(f.push(`Sec-WebSocket-Protocol: ${m}`),h._protocol=m)}if(t[ht.extensionName]){let m=t[ht.extensionName].params,_=Da.format({[ht.extensionName]:[m]});f.push(`Sec-WebSocket-Extensions: ${_}`),h._extensions=t}this.emit("headers",f,r),s.write(f.concat(`\r
`).join(`\r
`)),s.removeListener("error",Ta),h.setSocket(s,l,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(h),h.on("close",()=>{this.clients.delete(h),this._shouldEmitClose&&!this.clients.size&&process.nextTick(bi,this)})),d(h,r)}};Oa.exports=Gr;function Qd(i,t){for(let e of Object.keys(t))i.on(e,t[e]);return function(){for(let n of Object.keys(t))i.removeListener(n,t[n])}}function bi(i){i._state=Na,i.emit("close")}function Ta(){this.destroy()}function Ci(i,t,e,n){e=e||Ln.STATUS_CODES[t],n=R({Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(e)},n),i.once("finish",i.destroy),i.end(`HTTP/1.1 ${t} ${Ln.STATUS_CODES[t]}\r
`+Object.keys(n).map(r=>`${r}: ${n[r]}`).join(`\r
`)+`\r
\r
`+e)}function ft(i,t,e,n,r){if(i.listenerCount("wsClientError")){let s=new Error(r);Error.captureStackTrace(s,ft),i.emit("wsClientError",s,e,t)}else Ci(e,n,r)}});var Gi=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=C({type:i,selectors:[["app-navbar"]],standalone:!0,features:[x],decls:53,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-body-tertiary",2,"height","8%","border-bottom-style","solid","border-color","rgba(0, 0, 0, 0.09)","margin-bottom","20px"],[1,"container-fluid"],["id","navbarCenteredExample",1,"collapse","navbar-collapse","justify-content-center"],[1,"navbar-nav","mb-2","mb-lg-0"],[1,"nav-item","px-2"],["routerLink","/",1,"nav-link"],[1,"btn-group","nav-link"],["type","button","data-bs-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle"],[1,"dropdown-menu"],["routerLink","/drivers",1,"dropdown-item"],[1,"dropdown-divider"],["routerLink","/drivers/add",1,"dropdown-item"],["routerLink","/drivers/update",1,"dropdown-item"],["routerLink","/drivers/delete",1,"dropdown-item"],["routerLink","/packages",1,"dropdown-item"],["routerLink","/packages/add",1,"dropdown-item"],["routerLink","/packages/update",1,"dropdown-item"],["routerLink","/packages/delete",1,"dropdown-item"],["routerLink","/login",1,"nav-link"],["routerLink","/signup",1,"nav-link"],["routerLink","/stats",1,"nav-link"],["routerLink","/translate",1,"nav-link"],["routerLink","/text-to-speech",1,"nav-link"],["routerLink","/generative-ai",1,"nav-link"]],template:function(e,n){e&1&&(a(0,"nav",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li",4)(5,"a",5),c(6,"Home"),o()(),a(7,"li",4)(8,"div",6)(9,"div",7),c(10," Drivers "),o(),a(11,"div",8)(12,"a",9),c(13,"List Drivers"),o(),fe(14,"div",10),a(15,"a",11),c(16,"Add Driver"),o(),a(17,"a",12),c(18,"Update Driver"),o(),a(19,"a",13),c(20,"Delete Driver"),o()()()(),a(21,"li",4)(22,"div",6)(23,"div",7),c(24," Packages "),o(),a(25,"div",8)(26,"a",14),c(27,"List Packages"),o(),fe(28,"div",10),a(29,"a",15),c(30,"Add Package"),o(),a(31,"a",16),c(32,"Update Package"),o(),a(33,"a",17),c(34,"Delete Package"),o()()()(),a(35,"li",4)(36,"a",18),c(37,"Login"),o()(),a(38,"li",4)(39,"a",19),c(40,"Sign Up"),o()(),a(41,"li",4)(42,"a",20),c(43,"Stats"),o()(),a(44,"li",4)(45,"a",21),c(46,"Translate"),o()(),a(47,"li",4)(48,"a",22),c(49,"Text to Speech"),o()(),a(50,"li",4)(51,"a",23),c(52,"Generative AI"),o()()()()()())},dependencies:[Ds]})};var qi=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=C({type:i,selectors:[["app-footer"]],standalone:!0,features:[x],decls:6,vars:0,consts:[[1,"py-3","my-4","fixed-bottom"],[1,"nav","justify-content-center","border-bottom","pb-3","mb-3"],[1,"nav-item"],[1,"text-center","text-muted"]],template:function(e,n){e&1&&(a(0,"footer",0)(1,"ul",1)(2,"li",2),c(3,"0412 345 678 mn@hotmail.com"),o()(),a(4,"p",3),c(5,"\xA9 Massimo Nodin | 33892962 | Monash University"),o()())}})};var Hi=class i{title="assignment-3";static \u0275fac=function(e){return new(e||i)};static \u0275cmp=C({type:i,selectors:[["app-root"]],standalone:!0,features:[x],decls:3,vars:0,template:function(e,n){e&1&&fe(0,"app-navbar")(1,"router-outlet")(2,"app-footer")},dependencies:[ks,Gi,qi]})};var $i=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=C({type:i,selectors:[["app-pagenotfound"]],standalone:!0,features:[x],decls:8,vars:0,consts:[[2,"display","flex","width","100%","height","80%","flex-direction","column","justify-content","center","align-items","center"],[2,"color","rgb(235, 74, 74)"],["type","button","href","/",1,"btn","btn-primary"]],template:function(e,n){e&1&&(a(0,"body")(1,"div",0)(2,"h1",1),c(3,"404"),o(),a(4,"h2"),c(5,"Page Not Found"),o(),a(6,"a",2),c(7,"Homepage"),o()()())}})};var ju={withCredentials:!0,headers:new bs({"Content-Type":"application/json"})},w=class i{constructor(t){this.http=t}URL_BACKEND=location.origin+"/33892962/Massimo/api/v1";isAuthenticated(){return this.http.get(this.URL_BACKEND+"/authenticated")}getDrivers(){return this.http.get(this.URL_BACKEND+"/drivers")}getDriverPackages(){return this.http.get(this.URL_BACKEND+"/driverspackages")}getDriver(t){return this.http.get(this.URL_BACKEND+"/drivers?id="+t)}addDriver(t){return this.http.post(this.URL_BACKEND+"/drivers/add",t)}updateDriver(t){return this.http.put(this.URL_BACKEND+"/drivers",t)}deleteDriver(t){return this.http.delete(this.URL_BACKEND+"/drivers/delete",{body:{driver_id:t}})}getPackages(){return this.http.get(this.URL_BACKEND+"/packages")}getPackage(t){return this.http.get(this.URL_BACKEND+"/packages?id="+t)}addPackage(t){return this.http.post(this.URL_BACKEND+"/packages/add",t)}updatePackage(t){return this.http.put(this.URL_BACKEND+"/packages",t)}deletePackage(t){return this.http.delete(this.URL_BACKEND+"/packages/delete",{body:{package_id:t}})}getStatistics(){return this.http.get(this.URL_BACKEND+"/stats")}login(t,e){return this.http.post(this.URL_BACKEND+"/login",{username:t,password:e})}signUp(t,e){return this.http.post(this.URL_BACKEND+"/signup",{username:t,password:e})}static \u0275fac=function(e){return new(e||i)(Ut(Cs))};static \u0275prov=gt({token:i,factory:i.\u0275fac,providedIn:"root"})};var zi=class i{constructor(t){this.databaseService=t}driverAmount;packageAmount;ngOnInit(){this.databaseService.getDriverPackages().subscribe({next:t=>{t&&typeof t=="object"&&"drivers"in t&&"packages"in t?(this.driverAmount=t.drivers,this.packageAmount=t.packages):(this.driverAmount=0,this.packageAmount=0)},error:t=>{this.driverAmount=0,this.packageAmount=0}})}static \u0275fac=function(e){return new(e||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-index"]],standalone:!0,features:[x],decls:15,vars:2,consts:[[2,"display","flex","width","100%","justify-content","center","justify-items","center"],[1,"table",2,"margin-top","0px","width","400px","text-align","center","border-style","solid","border-width","2px","border-radius","5px"],[1,"table"],[2,"vertical-align","middle"],["src","Logo.png",2,"display","block","margin-left","auto","margin-right","auto","width","50%"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr")(4,"th"),c(5,"Number of Drivers"),o(),a(6,"th"),c(7,"Number of Packages"),o()()(),a(8,"tbody")(9,"tr",3)(10,"td"),c(11),o(),a(12,"td"),c(13),o()()()()(),fe(14,"img",4)),e&2&&(p(11),G(" ",n.driverAmount," "),p(2),G(" ",n.packageAmount," "))}})};var Ls=(()=>{class i{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(n){return new(n||i)(v(Gt),v(Wt))}}static{this.\u0275dir=te({type:i})}}return i})(),ei=(()=>{class i extends Ls{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})()}static{this.\u0275dir=te({type:i,features:[xe]})}}return i})(),Ct=new tt(""),dl={provide:Ct,useExisting:Ve(()=>ti),multi:!0},ti=(()=>{class i extends ei{writeValue(e){this.setProperty("checked",e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})()}static{this.\u0275dir=te({type:i,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(n,r){n&1&&E("change",function(l){return r.onChange(l.target.checked)})("blur",function(){return r.onTouched()})},features:[Fe([dl]),xe]})}}return i})(),ul={provide:Ct,useExisting:Ve(()=>Ee),multi:!0};function hl(){let i=ir()?ir().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var fl=new tt(""),Ee=(()=>{class i extends Ls{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!hl())}writeValue(e){let n=e??"";this.setProperty("value",n)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(n){return new(n||i)(v(Gt),v(Wt),v(fl,8))}}static{this.\u0275dir=te({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){n&1&&E("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[Fe([ul]),xe]})}}return i})();function rr(i){return i==null||(typeof i=="string"||Array.isArray(i))&&i.length===0}function Bs(i){return i!=null&&typeof i.length=="number"}var ii=new tt(""),Us=new tt("");function pl(i){return t=>{if(rr(t.value)||rr(i))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<i?{min:{min:i,actual:t.value}}:null}}function ml(i){return t=>rr(t.value)||!Bs(t.value)?null:t.value.length<i?{minlength:{requiredLength:i,actualLength:t.value.length}}:null}function gl(i){return t=>Bs(t.value)&&t.value.length>i?{maxlength:{requiredLength:i,actualLength:t.value.length}}:null}function Ms(i){return null}function js(i){return i!=null}function Ws(i){return ps(i)?Vi(i):i}function Gs(i){let t={};return i.forEach(e=>{t=e!=null?R(R({},t),e):t}),Object.keys(t).length===0?null:t}function qs(i,t){return t.map(e=>e(i))}function _l(i){return!i.validate}function Hs(i){return i.map(t=>_l(t)?t:e=>t.validate(e))}function vl(i){if(!i)return null;let t=i.filter(js);return t.length==0?null:function(e){return Gs(qs(e,t))}}function or(i){return i!=null?vl(Hs(i)):null}function yl(i){if(!i)return null;let t=i.filter(js);return t.length==0?null:function(e){let n=qs(e,t).map(Ws);return as(n).pipe(qe(Gs))}}function ar(i){return i!=null?yl(Hs(i)):null}function Ts(i,t){return i===null?[t]:Array.isArray(i)?[...i,t]:[i,t]}function bl(i){return i._rawValidators}function Cl(i){return i._rawAsyncValidators}function sr(i){return i?Array.isArray(i)?i:[i]:[]}function Yi(i,t){return Array.isArray(i)?i.includes(t):i===t}function Ns(i,t){let e=sr(t);return sr(i).forEach(r=>{Yi(e,r)||e.push(r)}),e}function Os(i,t){return sr(t).filter(e=>!Yi(i,e))}var Xi=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=or(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=ar(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},yt=class extends Xi{get formDirective(){return null}get path(){return null}},Qt=class extends Xi{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ji=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},xl={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},sh=ee(R({},xl),{"[class.ng-submitted]":"isSubmitted"}),ae=(()=>{class i extends Ji{constructor(e){super(e)}static{this.\u0275fac=function(n){return new(n||i)(v(Qt,2))}}static{this.\u0275dir=te({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){n&2&&Qn("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[xe]})}}return i})(),$=(()=>{class i extends Ji{constructor(e){super(e)}static{this.\u0275fac=function(n){return new(n||i)(v(yt,10))}}static{this.\u0275dir=te({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,r){n&2&&Qn("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[xe]})}}return i})();var Kt="VALID",Ki="INVALID",_t="PENDING",Yt="DISABLED",bt=class{},Zi=class extends bt{constructor(t,e){super(),this.value=t,this.source=e}},Jt=class extends bt{constructor(t,e){super(),this.pristine=t,this.source=e}},Zt=class extends bt{constructor(t,e){super(),this.touched=t,this.source=e}},vt=class extends bt{constructor(t,e){super(),this.status=t,this.source=e}};function $s(i){return(tn(i)?i.validators:i)||null}function El(i){return Array.isArray(i)?or(i):i||null}function zs(i,t){return(tn(t)?t.asyncValidators:i)||null}function Sl(i){return Array.isArray(i)?ar(i):i||null}function tn(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function wl(i,t,e){let n=i.controls;if(!(t?Object.keys(n):n).length)throw new Ri(1e3,"");if(!n[e])throw new Ri(1001,"")}function kl(i,t,e){i._forEachChild((n,r)=>{if(e[r]===void 0)throw new Ri(1002,"")})}var Qi=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=zt(()=>this.statusReactive()),this.statusReactive=qt(void 0),this._pristine=zt(()=>this.pristineReactive()),this.pristineReactive=qt(!0),this._touched=zt(()=>this.touchedReactive()),this.touchedReactive=qt(!1),this._events=new Ii,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return it(this.statusReactive)}set status(t){it(()=>this.statusReactive.set(t))}get valid(){return this.status===Kt}get invalid(){return this.status===Ki}get pending(){return this.status==_t}get disabled(){return this.status===Yt}get enabled(){return this.status!==Yt}get pristine(){return it(this.pristineReactive)}set pristine(t){it(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return it(this.touchedReactive)}set touched(t){it(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Ns(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Ns(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Os(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Os(t,this._rawAsyncValidators))}hasValidator(t){return Yi(this._rawValidators,t)}hasAsyncValidator(t){return Yi(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(ee(R({},t),{sourceControl:n})),e&&t.emitEvent!==!1&&this._events.next(new Zt(!0,n))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:n})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n),e&&t.emitEvent!==!1&&this._events.next(new Zt(!1,n))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(ee(R({},t),{sourceControl:n})),e&&t.emitEvent!==!1&&this._events.next(new Jt(!1,n))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),e&&t.emitEvent!==!1&&this._events.next(new Jt(!0,n))}markAsPending(t={}){this.status=_t;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new vt(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(ee(R({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Yt,this.errors=null,this._forEachChild(r=>{r.disable(ee(R({},t),{onlySelf:!0}))}),this._updateValue();let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Zi(this.value,n)),this._events.next(new vt(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ee(R({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Kt,this._forEachChild(n=>{n.enable(ee(R({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(ee(R({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Kt||this.status===_t)&&this._runAsyncValidator(n,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Zi(this.value,e)),this._events.next(new vt(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(ee(R({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Yt:Kt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=_t,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let n=Ws(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((n,r)=>n&&n._find(r),this)}getError(t,e){let n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,n){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||n)&&this._events.next(new vt(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,n)}_initObservables(){this.valueChanges=new jt,this.statusChanges=new jt}_calculateStatus(){return this._allControlsDisabled()?Yt:this.errors?Ki:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_t)?_t:this._anyControlsHaveStatus(Ki)?Ki:Kt}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let n=!this._anyControlsDirty(),r=this.pristine!==n;this.pristine=n,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new Jt(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Zt(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){tn(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=El(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Sl(this._rawAsyncValidators)}},en=class extends Qi{constructor(t,e,n){super($s(e),zs(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){kl(this,!0,t),Object.keys(t).forEach(n=>{wl(this,!0,n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(n=>{let r=this.controls[n];r&&r.patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,n)=>n._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,n]of Object.entries(this.controls))if(this.contains(e)&&t(n))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,n,r)=>((n.enabled||this.disabled)&&(e[r]=n.value),e))}_reduceChildren(t,e){let n=t;return this._forEachChild((r,s)=>{n=e(n,r,s)}),n}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var lr=new tt("CallSetDisabledState",{providedIn:"root",factory:()=>cr}),cr="always";function Dl(i,t){return[...t.path,i]}function Ks(i,t,e=cr){Ys(i,t),t.valueAccessor.writeValue(i.value),(i.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(i.disabled),Ml(i,t),Nl(i,t),Tl(i,t),Al(i,t)}function Is(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Al(i,t){if(t.valueAccessor.setDisabledState){let e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}function Ys(i,t){let e=bl(i);t.validator!==null?i.setValidators(Ts(e,t.validator)):typeof e=="function"&&i.setValidators([e]);let n=Cl(i);t.asyncValidator!==null?i.setAsyncValidators(Ts(n,t.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let r=()=>i.updateValueAndValidity();Is(t._rawValidators,r),Is(t._rawAsyncValidators,r)}function Ml(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&Xs(i,t)})}function Tl(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&Xs(i,t),i.updateOn!=="submit"&&i.markAsTouched()})}function Xs(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function Nl(i,t){let e=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}function Ol(i,t){i==null,Ys(i,t)}function Il(i,t){if(!i.hasOwnProperty("model"))return!1;let e=i.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function Vl(i){return Object.getPrototypeOf(i.constructor)===ei}function Fl(i,t){i._syncPendingControls(),t.forEach(e=>{let n=e.control;n.updateOn==="submit"&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function Pl(i,t){if(!t)return null;Array.isArray(t);let e,n,r;return t.forEach(s=>{s.constructor===Ee?e=s:Vl(s)?n=s:r=s}),r||n||e||null}var Rl={provide:yt,useExisting:Ve(()=>H)},Xt=Promise.resolve(),H=(()=>{class i extends yt{get submitted(){return it(this.submittedReactive)}constructor(e,n,r){super(),this.callSetDisabledState=r,this._submitted=zt(()=>this.submittedReactive()),this.submittedReactive=qt(!1),this._directives=new Set,this.ngSubmit=new jt,this.form=new en({},or(e),ar(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Xt.then(()=>{let n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),Ks(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Xt.then(()=>{let n=this._findContainer(e.path);n&&n.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Xt.then(()=>{let n=this._findContainer(e.path),r=new en({});Ol(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Xt.then(()=>{let n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){Xt.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),Fl(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static{this.\u0275fac=function(n){return new(n||i)(v(ii,10),v(Us,10),v(lr,8))}}static{this.\u0275dir=te({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,r){n&1&&E("submit",function(l){return r.onSubmit(l)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Fe([Rl]),xe]})}}return i})();function Vs(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}function Fs(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var Ll=class extends Qi{constructor(t=null,e,n){super($s(e),zs(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),tn(e)&&(e.nonNullable||e.initialValueIsDefault)&&(Fs(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Vs(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Vs(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Fs(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var Bl={provide:Qt,useExisting:Ve(()=>ne)},Ps=Promise.resolve(),ne=(()=>{class i extends Qt{constructor(e,n,r,s,l,d){super(),this._changeDetectorRef=l,this.callSetDisabledState=d,this.control=new Ll,this._registered=!1,this.name="",this.update=new jt,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=Pl(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Il(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ks(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){Ps.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let n=e.isDisabled.currentValue,r=n!==0&&vs(n);Ps.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?Dl(e,this._parent):[e]}static{this.\u0275fac=function(n){return new(n||i)(v(yt,9),v(ii,10),v(Us,10),v(Ct,10),v(_s,8),v(lr,8))}}static{this.\u0275dir=te({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Fe([Bl]),xe,Xn]})}}return i})(),z=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=te({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return i})(),Ul={provide:Ct,useExisting:Ve(()=>dr),multi:!0},dr=(()=>{class i extends ei{writeValue(e){let n=e??"";this.setProperty("value",n)}registerOnChange(e){this.onChange=n=>{e(n==""?null:parseFloat(n))}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})()}static{this.\u0275dir=te({type:i,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(n,r){n&1&&E("input",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},features:[Fe([Ul]),xe]})}}return i})();var jl={provide:Ct,useExisting:Ve(()=>_e),multi:!0};function Js(i,t){return i==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${i}: ${t}`.slice(0,50))}function Wl(i){return i.split(":")[0]}var _e=(()=>{class i extends ei{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let n=this._getOptionId(e),r=Js(n,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=n=>{this.value=this._getOptionValue(n),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n),e))return n;return null}_getOptionValue(e){let n=Wl(e);return this._optionMap.has(n)?this._optionMap.get(n):e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})()}static{this.\u0275dir=te({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,r){n&1&&E("change",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Fe([jl]),xe]})}}return i})(),Se=(()=>{class i{constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(Js(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(n){return new(n||i)(v(Wt),v(Gt),v(_e,9))}}static{this.\u0275dir=te({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return i})(),Gl={provide:Ct,useExisting:Ve(()=>Zs),multi:!0};function Rs(i,t){return i==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${i}: ${t}`.slice(0,50))}function ql(i){return i.split(":")[0]}var Zs=(()=>{class i extends ei{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let n;if(Array.isArray(e)){let r=e.map(s=>this._getOptionId(s));n=(s,l)=>{s._setSelected(r.indexOf(l.toString())>-1)}}else n=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(e){this.onChange=n=>{let r=[],s=n.selectedOptions;if(s!==void 0){let l=s;for(let d=0;d<l.length;d++){let u=l[d],f=this._getOptionValue(u.value);r.push(f)}}else{let l=n.options;for(let d=0;d<l.length;d++){let u=l[d];if(u.selected){let f=this._getOptionValue(u.value);r.push(f)}}}this.value=r,e(r)}}_registerOption(e){let n=(this._idCounter++).toString();return this._optionMap.set(n,e),n}_getOptionId(e){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n)._value,e))return n;return null}_getOptionValue(e){let n=ql(e);return this._optionMap.has(n)?this._optionMap.get(n)._value:e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})()}static{this.\u0275dir=te({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,r){n&1&&E("change",function(l){return r.onChange(l.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Fe([Gl]),xe]})}}return i})(),we=(()=>{class i{constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(Rs(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(Rs(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(n){return new(n||i)(v(Wt),v(Gt),v(Zs,9))}}static{this.\u0275dir=te({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return i})();function Qs(i){return typeof i=="number"?i:parseInt(i,10)}function Hl(i){return typeof i=="number"?i:parseFloat(i)}var ur=(()=>{class i{constructor(){this._validator=Ms}ngOnChanges(e){if(this.inputName in e){let n=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):Ms,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=te({type:i,features:[Xn]})}}return i})();var $l={provide:ii,useExisting:Ve(()=>hr),multi:!0},hr=(()=>{class i extends ur{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=e=>Hl(e),this.createValidator=e=>pl(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})()}static{this.\u0275dir=te({type:i,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(n,r){n&2&&Ui("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[Fe([$l]),xe]})}}return i})();var zl={provide:ii,useExisting:Ve(()=>ni),multi:!0},ni=(()=>{class i extends ur{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=e=>Qs(e),this.createValidator=e=>ml(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})()}static{this.\u0275dir=te({type:i,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(n,r){n&2&&Ui("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},features:[Fe([zl]),xe]})}}return i})(),Kl={provide:ii,useExisting:Ve(()=>ri),multi:!0},ri=(()=>{class i extends ur{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>Qs(e),this.createValidator=e=>gl(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=He(i)))(r||i)}})()}static{this.\u0275dir=te({type:i,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(n,r){n&2&&Ui("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Fe([Kl]),xe]})}}return i})();var Yl=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Bi({type:i})}static{this.\u0275inj=Li({})}}return i})();var B=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:lr,useValue:e.callSetDisabledState??cr}]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Bi({type:i})}static{this.\u0275inj=Li({imports:[Yl]})}}return i})();var nn=class i{constructor(t){this.databaseService=t}router=J(oe);driverInformation={driver_name:"",driver_department:"",driver_licence:"",driver_isActive:!1};addDriver(){this.databaseService.addDriver(this.driverInformation).subscribe(t=>{if(t.error)this.router.navigate(["/invalid"]);else{this.router.navigate(["/"]);return}})}static \u0275fac=function(e){return new(e||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-add-driver"]],standalone:!0,features:[x],decls:29,vars:4,consts:[[2,"height","70%","display","flex","justify-content","center","align-items","center"],[1,"card",2,"padding","20px","width","400px","display","flex","flex-direction","column"],[2,"text-align","center","margin-bottom","20px"],[1,"mb-3"],[1,"form-label"],["type","text","name","driverName","placeholder","Enter driver name",1,"form-control",3,"ngModelChange","ngModel"],["aria-label","Default select example","name","driverDepartment",1,"form-select",3,"ngModelChange","ngModel"],["value","food","selected",""],["value","furniture"],["value","electronic"],["type","text","name","driverLicense","placeholder","Enter driver license",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-check"],["type","checkbox","name","driverIsActive",1,"form-check-input",3,"ngModelChange","ngModel"],["for","flexCheckChecked",1,"form-check-label"],[1,"btn","btn-primary",3,"click"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"form",1)(2,"h2",2),c(3,"Add New Driver"),o(),a(4,"div",3)(5,"label",4),c(6,"Driver Name"),o(),a(7,"input",5),O("ngModelChange",function(s){return N(n.driverInformation.driver_name,s)||(n.driverInformation.driver_name=s),s}),o()(),a(8,"div",3)(9,"label",4),c(10,"Driver Department"),o(),a(11,"select",6),O("ngModelChange",function(s){return N(n.driverInformation.driver_department,s)||(n.driverInformation.driver_department=s),s}),a(12,"option",7),c(13,"Food"),o(),a(14,"option",8),c(15,"Furniture"),o(),a(16,"option",9),c(17,"Electronic"),o()()(),a(18,"div",3)(19,"label",4),c(20,"Driver License"),o(),a(21,"input",10),O("ngModelChange",function(s){return N(n.driverInformation.driver_licence,s)||(n.driverInformation.driver_licence=s),s}),o()(),a(22,"div",3)(23,"div",11)(24,"input",12),O("ngModelChange",function(s){return N(n.driverInformation.driver_isActive,s)||(n.driverInformation.driver_isActive=s),s}),o(),a(25,"label",13),c(26," is Active "),o()()(),a(27,"button",14),E("click",function(){return n.addDriver()}),c(28,"Submit"),o()()()),e&2&&(p(7),T("ngModel",n.driverInformation.driver_name),p(4),T("ngModel",n.driverInformation.driver_department),p(10),T("ngModel",n.driverInformation.driver_licence),p(3),T("ngModel",n.driverInformation.driver_isActive))},dependencies:[B,z,Se,we,Ee,ti,_e,ae,$,ne,H]})};function Xl(i,t){if(i&1&&(a(0,"option",16),c(1),o()),i&2){let e=t.$implicit;me("value",e._id),p(),G(" ",e.driver_name," ")}}function Jl(i,t){if(i&1){let e=pe();a(0,"div",1)(1,"form",2)(2,"h2",3),c(3,"Add New Package"),o(),a(4,"div",4)(5,"label",5),c(6,"Package Title"),o(),a(7,"input",6),O("ngModelChange",function(r){j(e);let s=k();return N(s.packageInformation.package_title,r)||(s.packageInformation.package_title=r),W(r)}),o()(),a(8,"div",4)(9,"label",5),c(10,"Package Weight"),o(),a(11,"input",7),O("ngModelChange",function(r){j(e);let s=k();return N(s.packageInformation.package_weight,r)||(s.packageInformation.package_weight=r),W(r)}),o()(),a(12,"div",4)(13,"label",5),c(14,"Package Destination"),o(),a(15,"input",8),O("ngModelChange",function(r){j(e);let s=k();return N(s.packageInformation.package_destination,r)||(s.packageInformation.package_destination=r),W(r)}),o()(),a(16,"div",4)(17,"label",5),c(18,"Package Description (Optional)"),o(),a(19,"input",9),O("ngModelChange",function(r){j(e);let s=k();return N(s.packageInformation.package_description,r)||(s.packageInformation.package_description=r),W(r)}),o()(),a(20,"div",4)(21,"div",10)(22,"input",11),O("ngModelChange",function(r){j(e);let s=k();return N(s.packageInformation.isAllocated,r)||(s.packageInformation.isAllocated=r),W(r)}),o(),a(23,"label",12),c(24," is Allocated "),o()()(),a(25,"div",4)(26,"label",5),c(27,"Driver"),o(),a(28,"select",13),O("ngModelChange",function(r){j(e);let s=k();return N(s.packageInformation.driver_id,r)||(s.packageInformation.driver_id=r),W(r)}),I(29,Xl,2,2,"option",14),o()(),a(30,"button",15),E("click",function(){j(e);let r=k();return W(r.addPackage())}),c(31,"Submit"),o()()()}if(i&2){let e=k();p(7),T("ngModel",e.packageInformation.package_title),p(4),T("ngModel",e.packageInformation.package_weight),p(4),T("ngModel",e.packageInformation.package_destination),p(4),T("ngModel",e.packageInformation.package_description),p(3),T("ngModel",e.packageInformation.isAllocated),p(6),T("ngModel",e.packageInformation.driver_id),p(),M("ngForOf",e.drivers)}}var rn=class i{constructor(t){this.databaseService=t}drivers=[];loading=!0;router=J(oe);packageInformation={package_title:"",package_weight:0,package_destination:"",package_description:"",isAllocated:!1,driver_id:null};ngOnInit(){this.databaseService.getDrivers().subscribe(t=>{this.drivers=t,this.loading=!1})}addPackage(){this.databaseService.addPackage(this.packageInformation).subscribe(t=>{if(t.error)console.log(t),this.router.navigate(["/invalid"]);else{this.router.navigate(["/"]);return}})}static \u0275fac=function(e){return new(e||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-add-package"]],standalone:!0,features:[x],decls:1,vars:1,consts:[["style","height: 70%; display: flex; justify-content: center; align-items: center;",4,"ngIf"],[2,"height","70%","display","flex","justify-content","center","align-items","center"],[1,"card",2,"padding","20px","width","400px","display","flex","flex-direction","column"],[2,"text-align","center","margin-bottom","20px"],[1,"mb-3"],[1,"form-label"],["type","text","name","packageTitle","placeholder","Enter package title",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","1","value","1","name","packageWeight","placeholder","Enter package weight",3,"ngModelChange","ngModel"],["type","text","name","packageDestination","placeholder","Enter package destination",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","packageDescription","placeholder","Enter package description",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-check"],["type","checkbox","name","isAllocated",1,"form-check-input",3,"ngModelChange","ngModel"],["for","flexCheckChecked",1,"form-check-label"],["aria-label","Default select example","name","driverID",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[3,"value"]],template:function(e,n){e&1&&I(0,Jl,32,7,"div",0),e&2&&M("ngIf",!n.loading)},dependencies:[B,z,Se,we,Ee,dr,ti,_e,ae,$,hr,ne,H,Q,Z,ge]})};function Zl(i,t){if(i&1&&(a(0,"option",9),c(1),o()),i&2){let e=t.$implicit;me("value",e.driver_id),p(),G(" ",e.driver_id," ")}}function Ql(i,t){if(i&1){let e=pe();a(0,"div",1)(1,"form",2)(2,"h2",3),c(3,"Delete Driver"),o(),a(4,"div",4)(5,"label",5),c(6,"Driver"),o(),a(7,"select",6),O("ngModelChange",function(r){j(e);let s=k();return N(s.driver_id,r)||(s.driver_id=r),W(r)}),I(8,Zl,2,2,"option",7),o()(),a(9,"button",8),E("click",function(){j(e);let r=k();return W(r.deleteDriver())}),c(10,"Submit"),o()()()}if(i&2){let e=k();p(7),T("ngModel",e.driver_id),p(),M("ngForOf",e.drivers)}}var sn=class i{constructor(t){this.databaseService=t}drivers=[];loading=!0;driver_id=0;router=J(oe);ngOnInit(){this.databaseService.getDrivers().subscribe(t=>{this.drivers=t,this.loading=!1})}deleteDriver(){this.databaseService.deleteDriver(this.driver_id).subscribe(t=>{this.router.navigate(["/drivers"])})}static \u0275fac=function(e){return new(e||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-delete-driver"]],standalone:!0,features:[x],decls:1,vars:1,consts:[["style","height: 70%; display: flex; justify-content: center; align-items: center;",4,"ngIf"],[2,"height","70%","display","flex","justify-content","center","align-items","center"],[1,"card",2,"padding","20px","width","400px","display","flex","flex-direction","column"],[2,"text-align","center","margin-bottom","20px"],[1,"mb-3"],[1,"form-label"],["aria-label","Default select example","name","driverID",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[3,"value"]],template:function(e,n){e&1&&I(0,Ql,11,2,"div",0),e&2&&M("ngIf",!n.loading)},dependencies:[B,z,Se,we,_e,ae,$,ne,H,Q,Z,ge]})};function ec(i,t){if(i&1&&(a(0,"option",9),c(1),o()),i&2){let e=t.$implicit;me("value",e.package_id),p(),G(" ",e.package_id," ")}}function tc(i,t){if(i&1){let e=pe();a(0,"div",1)(1,"form",2)(2,"h2",3),c(3,"Delete Package"),o(),a(4,"div",4)(5,"label",5),c(6,"Package"),o(),a(7,"select",6),O("ngModelChange",function(r){j(e);let s=k();return N(s.package_id,r)||(s.package_id=r),W(r)}),I(8,ec,2,2,"option",7),o()(),a(9,"button",8),E("click",function(){j(e);let r=k();return W(r.deletePackage())}),c(10,"Submit"),o()()()}if(i&2){let e=k();p(7),T("ngModel",e.package_id),p(),M("ngForOf",e.packages)}}var on=class i{constructor(t){this.databaseService=t}packages=[];loading=!0;package_id=0;router=J(oe);ngOnInit(){this.databaseService.getPackages().subscribe(t=>{this.packages=t,this.loading=!1})}deletePackage(){this.databaseService.deletePackage(this.package_id).subscribe(t=>{this.router.navigate(["/packages"])})}static \u0275fac=function(e){return new(e||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-delete-package"]],standalone:!0,features:[x],decls:1,vars:1,consts:[["style","height: 70%; display: flex; justify-content: center; align-items: center;",4,"ngIf"],[2,"height","70%","display","flex","justify-content","center","align-items","center"],[1,"card",2,"padding","20px","width","400px","display","flex","flex-direction","column"],[2,"text-align","center","margin-bottom","20px"],[1,"mb-3"],[1,"form-label"],["aria-label","Default select example","name","packageID",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[3,"value"]],template:function(e,n){e&1&&I(0,tc,11,2,"div",0),e&2&&M("ngIf",!n.loading)},dependencies:[B,z,Se,we,_e,ae,$,ne,H,Q,Z,ge]})};function ic(i,t){i&1&&(a(0,"a",8),c(1,"No Packages Assigned"),o())}function nc(i,t){if(i&1&&(a(0,"tr")(1,"td"),c(2),o(),a(3,"td"),c(4),o(),a(5,"td"),c(6),o()()),i&2){let e=t.$implicit;p(2),F(e.package_title),p(2),F(e.package_id),p(2),F(e.package_destination)}}function rc(i,t){if(i&1&&(a(0,"table",1)(1,"thead",2)(2,"tr")(3,"th"),c(4,"Title"),o(),a(5,"th"),c(6,"ID"),o(),a(7,"th"),c(8,"Destination"),o()()(),a(9,"tbody"),I(10,nc,7,3,"tr",3),o()()),i&2){let e=k().$implicit;p(10),M("ngForOf",e.driver_assigned_packages)}}function sc(i,t){if(i&1){let e=pe();a(0,"tr")(1,"td"),c(2),o(),a(3,"td"),c(4),Ht(5,"uppercase"),o(),a(6,"td"),c(7),o(),a(8,"td"),c(9),o(),a(10,"td"),c(11),o(),a(12,"td"),c(13),o(),a(14,"td")(15,"button",4),E("click",function(){let r=j(e).$implicit,s=k(2);return W(s.deleteDriver(r.driver_id))}),c(16,"Delete"),o()(),a(17,"td")(18,"div",5),c(19,"Packages"),o(),a(20,"div",6),I(21,ic,2,0,"a",7)(22,rc,11,1,"table",0),o()()()}if(i&2){let e=t.$implicit;p(2),F(e.driver_id),p(2),F($t(5,8,e.driver_name)),p(3),F(e.driver_department),p(2),F(e.driver_licence),p(2),F(e.driver_isActive),p(2),F(e.driver_createdAt),p(8),M("ngIf",e.driver_assigned_packages.length==0),p(),M("ngIf",e.driver_assigned_packages.length>0)}}function oc(i,t){if(i&1&&(a(0,"table",1)(1,"thead",2)(2,"tr")(3,"th"),c(4,"Driver ID"),o(),a(5,"th"),c(6,"Driver Name"),o(),a(7,"th"),c(8,"Department"),o(),a(9,"th"),c(10,"Driver License"),o(),a(11,"th"),c(12,"is Active"),o(),a(13,"th"),c(14,"Creation Date"),o(),a(15,"th"),c(16,"Delete Driver"),o(),a(17,"th"),c(18,"Packages"),o()()(),a(19,"tbody"),I(20,sc,23,10,"tr",3),o()()),i&2){let e=k();p(20),M("ngForOf",e.drivers)}}var an=class i{constructor(t){this.databaseService=t}drivers=[];loading=!0;ngOnInit(){this.databaseService.getDrivers().subscribe(t=>{this.drivers=t,this.loading=!1,console.log(this.drivers[0])})}deleteDriver(t){this.databaseService.deleteDriver(t).subscribe(e=>{this.ngOnInit()})}static \u0275fac=function(e){return new(e||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-list-driver"]],standalone:!0,features:[x],decls:1,vars:1,consts:[["class","table","style","margin-top: 0px;",4,"ngIf"],[1,"table",2,"margin-top","0px"],[1,"table"],[4,"ngFor","ngForOf"],[1,"btn","btn-danger",2,"margin-bottom","0",3,"click"],["type","button","data-bs-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle"],[1,"dropdown-menu"],["class","dropdown-item",4,"ngIf"],[1,"dropdown-item"]],template:function(e,n){e&1&&I(0,oc,21,1,"table",0),e&2&&M("ngIf",!n.loading)},dependencies:[B,Q,Z,ge,Wi]})};var ln=class i{transform(t,...e){return t*1e3+"g"}static \u0275fac=function(e){return new(e||i)};static \u0275pipe=us({name:"packageWeight",type:i,pure:!0,standalone:!0})};function ac(i,t){if(i&1){let e=pe();a(0,"tr")(1,"td"),c(2),o(),a(3,"td"),c(4),o(),a(5,"td"),c(6),Ht(7,"packageWeight"),o(),a(8,"td"),c(9),o(),a(10,"td"),c(11),o(),a(12,"td"),c(13),o(),a(14,"td"),c(15),o(),a(16,"td"),c(17),o(),a(18,"td")(19,"button",4),E("click",function(){let r=j(e).$implicit,s=k(2);return W(s.deletePackage(r.package_id))}),c(20,"Delete"),o()(),a(21,"td")(22,"div",5),c(23,"Driver"),o(),a(24,"div",6)(25,"a",7)(26,"strong"),c(27,"Name:"),o(),c(28),Ht(29,"uppercase"),fe(30,"br"),a(31,"strong"),c(32,"Driver ID:"),o(),c(33),fe(34,"br"),a(35,"strong"),c(36,"Licence:"),o(),c(37),fe(38,"br"),a(39,"strong"),c(40,"Department:"),o(),c(41),fe(42,"br"),a(43,"strong"),c(44,"is Active:"),o(),c(45),o()()()()}if(i&2){let e=t.$implicit;p(2),F(e.package_id),p(2),F(e.package_title),p(2),F($t(7,13,e.package_weight)),p(3),F(e.package_destination),p(2),F(e.package_description),p(2),F(e.package_createdAt),p(2),F(e.package_isAllocated),p(2),F(e.driver_id),p(11),G(" ",$t(29,15,e.driver_obj.driver_name),""),p(5),G(" ",e.driver_obj.driver_id,""),p(4),G(" ",e.driver_obj.driver_licence,""),p(4),G(" ",e.driver_obj.driver_department,""),p(4),G(" ",e.driver_obj.driver_isActive," ")}}function lc(i,t){if(i&1&&(a(0,"table",1)(1,"thead",2)(2,"tr")(3,"th"),c(4,"Package ID"),o(),a(5,"th"),c(6,"Title"),o(),a(7,"th"),c(8,"Weight"),o(),a(9,"th"),c(10,"Destination"),o(),a(11,"th"),c(12,"Description"),o(),a(13,"th"),c(14,"Creation Date"),o(),a(15,"th"),c(16,"is Allocated"),o(),a(17,"th"),c(18,"Driver ID"),o(),a(19,"th"),c(20,"Delete Package"),o(),a(21,"th"),c(22,"Driver Information"),o()()(),a(23,"tbody"),I(24,ac,46,17,"tr",3),o()()),i&2){let e=k();p(24),M("ngForOf",e.packages)}}var cn=class i{constructor(t){this.databaseService=t}packages=[];drivers=[];loading=!0;ngOnInit(){this.databaseService.getPackages().subscribe(t=>{this.packages=t}),this.databaseService.getDrivers().subscribe(t=>{this.drivers=t;for(let e=0;e<this.packages.length;e++)for(let n=0;n<this.drivers.length;n++)this.packages[e].driver_id===this.drivers[n].driver_id&&(this.packages[e].driver_obj=this.drivers[n]);this.loading=!1})}deletePackage(t){this.databaseService.deletePackage(t).subscribe(e=>{this.ngOnInit()})}static \u0275fac=function(e){return new(e||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-list-package"]],standalone:!0,features:[x],decls:1,vars:1,consts:[["class","table","style","margin-top: 0px;",4,"ngIf"],[1,"table",2,"margin-top","0px"],[1,"table"],[4,"ngFor","ngForOf"],[1,"btn","btn-danger",2,"margin-bottom","0",3,"click"],["type","button","data-bs-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle"],[1,"dropdown-menu"],[1,"dropdown-item"]],template:function(e,n){e&1&&I(0,lc,25,1,"table",0),e&2&&M("ngIf",!n.loading)},dependencies:[B,Q,Z,ge,Wi,ln]})};function cc(i,t){if(i&1&&(a(0,"option",13),c(1),o()),i&2){let e=t.$implicit,n=t.index;me("value",n),p(),G(" ",e.driver_name," ")}}var dn=class i{constructor(t){this.databaseService=t}drivers=[];driver_index=0;router=J(oe);driverInformation={id:"",driver_department:"",driver_licence:""};ngOnInit(){this.databaseService.getDrivers().subscribe(t=>{this.drivers=t,this.updateInformation()})}updateInformation(){this.driverInformation={id:this.drivers[this.driver_index]._id,driver_department:this.drivers[this.driver_index].driver_department,driver_licence:this.drivers[this.driver_index].driver_licence}}updateDriver(){this.databaseService.updateDriver(this.driverInformation).subscribe(t=>{if(t.error)this.router.navigate(["/invalid"]);else{this.router.navigate(["/drivers"]);return}})}static \u0275fac=function(e){return new(e||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-update-driver"]],standalone:!0,features:[x],decls:25,vars:4,consts:[[2,"height","70%","display","flex","justify-content","center","align-items","center"],[1,"card",2,"padding","20px","width","400px","display","flex","flex-direction","column"],[2,"text-align","center","margin-bottom","20px"],[1,"mb-3"],[1,"form-label"],["aria-label","Default select example","name","driverID",1,"form-select",3,"change","ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["aria-label","Default select example","name","driverDepartment",1,"form-select",3,"ngModelChange","ngModel"],["value","food","selected",""],["value","furniture"],["value","electronic"],["type","text","name","driverLicense","placeholder","Enter driver license",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click"],[3,"value"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"form",1)(2,"h2",2),c(3,"Update Driver"),o(),a(4,"div",3)(5,"label",4),c(6,"Driver"),o(),a(7,"select",5),E("change",function(){return n.updateInformation()}),O("ngModelChange",function(s){return N(n.driver_index,s)||(n.driver_index=s),s}),I(8,cc,2,2,"option",6),o()(),a(9,"div",3)(10,"label",4),c(11,"Driver Department"),o(),a(12,"select",7),O("ngModelChange",function(s){return N(n.driverInformation.driver_department,s)||(n.driverInformation.driver_department=s),s}),a(13,"option",8),c(14,"Food"),o(),a(15,"option",9),c(16,"Furniture"),o(),a(17,"option",10),c(18,"Electronic"),o()()(),a(19,"div",3)(20,"label",4),c(21,"Driver License"),o(),a(22,"input",11),O("ngModelChange",function(s){return N(n.driverInformation.driver_licence,s)||(n.driverInformation.driver_licence=s),s}),o()(),a(23,"button",12),E("click",function(){return n.updateDriver()}),c(24,"Update Driver"),o()()()),e&2&&(p(7),T("ngModel",n.driver_index),p(),M("ngForOf",n.drivers),p(4),T("ngModel",n.driverInformation.driver_department),p(10),T("ngModel",n.driverInformation.driver_licence))},dependencies:[B,z,Se,we,Ee,_e,ae,$,ne,H,Q,Z]})};function dc(i,t){if(i&1&&(a(0,"option",9),c(1),o()),i&2){let e=t.$implicit,n=t.index;me("value",n),p(),G(" ",e.package_title," ")}}var un=class i{constructor(t){this.databaseService=t}packages=[];package_index=0;router=J(oe);packageInformation={package_id:"",package_destination:""};ngOnInit(){this.databaseService.getPackages().subscribe(t=>{this.packages=t,this.updateInformation()})}updateInformation(){this.packageInformation={package_id:this.packages[this.package_index]._id,package_destination:this.packages[this.package_index].package_destination}}updatePackage(){this.databaseService.updatePackage(this.packageInformation).subscribe(t=>{if(t.error)this.router.navigate(["/invalid"]);else{this.router.navigate(["/packages"]);return}})}static \u0275fac=function(e){return new(e||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-update-package"]],standalone:!0,features:[x],decls:15,vars:3,consts:[[2,"height","70%","display","flex","justify-content","center","align-items","center"],[1,"card",2,"padding","20px","width","400px","display","flex","flex-direction","column"],[2,"text-align","center","margin-bottom","20px"],[1,"mb-3"],[1,"form-label"],["aria-label","Default select example","name","packageID",1,"form-select",3,"change","ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","text","name","packageDestination","placeholder","Enter package destination",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click"],[3,"value"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"form",1)(2,"h2",2),c(3,"Update Package"),o(),a(4,"div",3)(5,"label",4),c(6,"Package Title"),o(),a(7,"select",5),E("change",function(){return n.updateInformation()}),O("ngModelChange",function(s){return N(n.package_index,s)||(n.package_index=s),s}),I(8,dc,2,2,"option",6),o()(),a(9,"div",3)(10,"label",4),c(11,"Package Destination"),o(),a(12,"input",7),O("ngModelChange",function(s){return N(n.packageInformation.package_destination,s)||(n.packageInformation.package_destination=s),s}),o()(),a(13,"button",8),E("click",function(){return n.updatePackage()}),c(14,"Update Package"),o()()()),e&2&&(p(7),T("ngModel",n.package_index),p(),M("ngForOf",n.packages),p(4),T("ngModel",n.packageInformation.package_destination))},dependencies:[B,z,Se,we,Ee,_e,ae,$,ne,H,Q,Z]})};var hn=class i{constructor(t){this.databaseService=t}stats={insert:0,update:0,delete:0,retrieve:0};ngOnInit(){return Oi(this,null,function*(){this.databaseService.getStatistics().subscribe(t=>this.stats=t)})}static \u0275fac=function(e){return new(e||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-statistics"]],standalone:!0,features:[x],decls:31,vars:4,consts:[[2,"display","flex","width","100%","align-items","center","flex-direction","column"],[1,"table",2,"margin-top","0px","width","400px","text-align","center","border-style","solid","border-width","2px","border-radius","5px"],[1,"table"],[2,"vertical-align","middle"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"h1"),c(2,"MongoDB Stats"),o(),a(3,"table",1)(4,"thead",2)(5,"tr")(6,"th"),c(7,"Operation"),o(),a(8,"th"),c(9,"#"),o()()(),a(10,"tbody")(11,"tr",3)(12,"td"),c(13,"Insert"),o(),a(14,"td"),c(15),o()(),a(16,"tr",3)(17,"td"),c(18,"Retrieve"),o(),a(19,"td"),c(20),o()(),a(21,"tr",3)(22,"td"),c(23,"Update"),o(),a(24,"td"),c(25),o()(),a(26,"tr",3)(27,"td"),c(28,"Delete"),o(),a(29,"td"),c(30),o()()()()()),e&2&&(p(15),G(" ",n.stats.insert," "),p(5),G(" ",n.stats.retrieve," "),p(5),G(" ",n.stats.update," "),p(5),G(" ",n.stats.delete," "))}})};var fn=class i{constructor(t){this.databaseService=t}router=J(oe);loginInformation={username:"",password:""};login(){Pi(this.databaseService.login(this.loginInformation.username,this.loginInformation.password)).then(t=>{if(t.status=="Logged in"){this.router.navigate(["/"]);return}else this.router.navigate(["/invalid"])}).catch(t=>{this.router.navigate(["/invalid"])})}static \u0275fac=function(e){return new(e||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-login"]],standalone:!0,features:[x],decls:18,vars:2,consts:[[2,"height","70%","display","flex","justify-content","center","align-items","center"],[1,"card",2,"padding","20px","width","400px","display","flex","flex-direction","column"],[2,"text-align","center","margin-bottom","20px"],[1,"mb-3"],[1,"form-label"],[1,"input-group","mb-2","mr-sm-2"],[1,"input-group-prepend"],[1,"input-group-text"],["minlength","6","type","text","name","username","placeholder","Username",1,"form-control",3,"ngModelChange","ngModel"],["minlength","5","maxlength","10","type","password","name","password","placeholder","Password",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"form",1)(2,"h2",2),c(3,"Login"),o(),a(4,"div",3)(5,"label",4),c(6,"Username"),o(),a(7,"div",5)(8,"div",6)(9,"div",7),c(10,"@"),o()(),a(11,"input",8),O("ngModelChange",function(s){return N(n.loginInformation.username,s)||(n.loginInformation.username=s),s}),o()()(),a(12,"div",3)(13,"label",4),c(14,"Password"),o(),a(15,"input",9),O("ngModelChange",function(s){return N(n.loginInformation.password,s)||(n.loginInformation.password=s),s}),o()(),a(16,"button",10),E("click",function(){return n.login()}),c(17,"Login"),o()()()),e&2&&(p(11),T("ngModel",n.loginInformation.username),p(4),T("ngModel",n.loginInformation.password))},dependencies:[B,z,Ee,ae,$,ni,ri,ne,H]})};var pn=class i{constructor(t){this.databaseService=t}router=J(oe);loginInformation={username:"",password:""};signUp(){Pi(this.databaseService.signUp(this.loginInformation.username,this.loginInformation.password)).then(t=>{if(t.error)this.router.navigate(["/invalid"]);else{this.router.navigate(["/"]);return}}).catch(t=>{this.router.navigate(["/invalid"])})}static \u0275fac=function(e){return new(e||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-signup"]],standalone:!0,features:[x],decls:22,vars:2,consts:[[2,"height","70%","display","flex","justify-content","center","align-items","center"],[1,"card",2,"padding","20px","width","400px","display","flex","flex-direction","column"],[2,"text-align","center","margin-bottom","20px"],[1,"mb-3"],[1,"form-label"],[1,"input-group","mb-2","mr-sm-2"],[1,"input-group-prepend"],[1,"input-group-text"],["minlength","6","type","text","name","username","placeholder","Username",1,"form-control",3,"ngModelChange","ngModel"],["id","usernameHelpBlock",1,"form-text","text-muted"],["minlength","5","maxlength","10","type","password","name","password","placeholder","Password",1,"form-control",3,"ngModelChange","ngModel"],["id","passwordHelpBlock",1,"form-text","text-muted"],[1,"btn","btn-primary",3,"click"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"form",1)(2,"h2",2),c(3,"Sign Up"),o(),a(4,"div",3)(5,"label",4),c(6,"Username"),o(),a(7,"div",5)(8,"div",6)(9,"div",7),c(10,"@"),o()(),a(11,"input",8),O("ngModelChange",function(s){return N(n.loginInformation.username,s)||(n.loginInformation.username=s),s}),o()(),a(12,"small",9),c(13," Your username must be 6+ alphanumeric characters long. "),o()(),a(14,"div",3)(15,"label",4),c(16,"Password"),o(),a(17,"input",10),O("ngModelChange",function(s){return N(n.loginInformation.password,s)||(n.loginInformation.password=s),s}),o(),a(18,"small",11),c(19," Your password must be 5-10 characters long. "),o()(),a(20,"button",12),E("click",function(){return n.signUp()}),c(21,"Sign Up"),o()()()),e&2&&(p(11),T("ngModel",n.loginInformation.username),p(6),T("ngModel",n.loginInformation.password))},dependencies:[B,z,Ee,ae,$,ni,ri,ne,H]})};var De=(i,t)=>Oi(void 0,null,function*(){let e=J(w),n=J(oe);try{return(yield ss(e.isAuthenticated()))==!0?!0:(n.navigate(["/login"]),!1)}catch(r){return console.error("Error during authentication guard",r),n.navigate(["/login"]),!1}});var mn=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=C({type:i,selectors:[["app-invaliddata"]],standalone:!0,features:[x],decls:5,vars:0,consts:[[2,"display","flex","width","100%","height","80%","flex-direction","column","justify-content","center","align-items","center"],[2,"color","rgb(235, 74, 74)"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"h1",1),c(2,"Error"),o(),a(3,"h2"),c(4,"Invalid Data"),o()())}})};var xr=ce(io(),1);var Re=Object.create(null);Re.open="0";Re.close="1";Re.ping="2";Re.pong="3";Re.message="4";Re.upgrade="5";Re.noop="6";var si=Object.create(null);Object.keys(Re).forEach(i=>{si[Re[i]]=i});var oi={type:"error",data:"parser error"};var ai=({type:i,data:t},e,n)=>t instanceof ArrayBuffer||ArrayBuffer.isView(t)?n(e?t:"b"+no(t,!0).toString("base64")):n(Re[i]+(t||"")),no=(i,t)=>Buffer.isBuffer(i)||i instanceof Uint8Array&&!t?i:i instanceof ArrayBuffer?Buffer.from(i):Buffer.from(i.buffer,i.byteOffset,i.byteLength),pr;function ro(i,t){if(i.data instanceof ArrayBuffer||ArrayBuffer.isView(i.data))return t(no(i.data,!1));ai(i,!0,e=>{pr||(pr=new TextEncoder),t(pr.encode(e))})}var li=(i,t)=>{if(typeof i!="string")return{type:"message",data:so(i,t)};let e=i.charAt(0);if(e==="b"){let n=Buffer.from(i.substring(1),"base64");return{type:"message",data:so(n,t)}}return si[e]?i.length>1?{type:si[e],data:i.substring(1)}:{type:si[e]}:oi},so=(i,t)=>{switch(t){case"arraybuffer":return i instanceof ArrayBuffer?i:Buffer.isBuffer(i)?i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength):i.buffer;case"nodebuffer":default:return Buffer.isBuffer(i)?i:Buffer.from(i)}};var oo="",ao=(i,t)=>{let e=i.length,n=new Array(e),r=0;i.forEach((s,l)=>{ai(s,!1,d=>{n[l]=d,++r===e&&t(n.join(oo))})})},lo=(i,t)=>{let e=i.split(oo),n=[];for(let r=0;r<e.length;r++){let s=li(e[r],t);if(n.push(s),s.type==="error")break}return n};function co(){return new TransformStream({transform(i,t){ro(i,e=>{let n=e.length,r;if(n<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,n);else if(n<65536){r=new Uint8Array(3);let s=new DataView(r.buffer);s.setUint8(0,126),s.setUint16(1,n)}else{r=new Uint8Array(9);let s=new DataView(r.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(n))}i.data&&typeof i.data!="string"&&(r[0]|=128),t.enqueue(r),t.enqueue(e)})}})}var mr;function gn(i){return i.reduce((t,e)=>t+e.length,0)}function _n(i,t){if(i[0].length===t)return i.shift();let e=new Uint8Array(t),n=0;for(let r=0;r<t;r++)e[r]=i[0][n++],n===i[0].length&&(i.shift(),n=0);return i.length&&n<i[0].length&&(i[0]=i[0].slice(n)),e}function uo(i,t){mr||(mr=new TextDecoder);let e=[],n=0,r=-1,s=!1;return new TransformStream({transform(l,d){for(e.push(l);;){if(n===0){if(gn(e)<1)break;let u=_n(e,1);s=(u[0]&128)===128,r=u[0]&127,r<126?n=3:r===126?n=1:n=2}else if(n===1){if(gn(e)<2)break;let u=_n(e,2);r=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),n=3}else if(n===2){if(gn(e)<8)break;let u=_n(e,8),f=new DataView(u.buffer,u.byteOffset,u.length),h=f.getUint32(0);if(h>Math.pow(2,21)-1){d.enqueue(oi);break}r=h*Math.pow(2,32)+f.getUint32(4),n=3}else{if(gn(e)<r)break;let u=_n(e,r);d.enqueue(li(s?u:mr.decode(u),t)),n=0}if(r===0||r>i){d.enqueue(oi);break}}}})}var gr=4;function U(i){if(i)return hc(i)}function hc(i){for(var t in U.prototype)i[t]=U.prototype[t];return i}U.prototype.on=U.prototype.addEventListener=function(i,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(t),this};U.prototype.once=function(i,t){function e(){this.off(i,e),t.apply(this,arguments)}return e.fn=t,this.on(i,e),this};U.prototype.off=U.prototype.removeListener=U.prototype.removeAllListeners=U.prototype.removeEventListener=function(i,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+i];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var n,r=0;r<e.length;r++)if(n=e[r],n===t||n.fn===t){e.splice(r,1);break}return e.length===0&&delete this._callbacks["$"+i],this};U.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+i],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e){e=e.slice(0);for(var n=0,r=e.length;n<r;++n)e[n].apply(this,t)}return this};U.prototype.emitReserved=U.prototype.emit;U.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]};U.prototype.hasListeners=function(i){return!!this.listeners(i).length};var ze=process.nextTick,Ce=global,ho="nodebuffer";function fo(){return new _r}function fc(i){let t=i.split("; "),e=t[0].indexOf("=");if(e===-1)return;let n=t[0].substring(0,e).trim();if(!n.length)return;let r=t[0].substring(e+1).trim();r.charCodeAt(0)===34&&(r=r.slice(1,-1));let s={name:n,value:r};for(let l=1;l<t.length;l++){let d=t[l].split("=");if(d.length!==2)continue;let u=d[0].trim(),f=d[1].trim();switch(u){case"Expires":s.expires=new Date(f);break;case"Max-Age":let h=new Date;h.setUTCSeconds(h.getUTCSeconds()+parseInt(f,10)),s.expires=h;break;default:}}return s}var _r=class{constructor(){this._cookies=new Map}parseCookies(t){t&&t.forEach(e=>{let n=fc(e);n&&this._cookies.set(n.name,n)})}get cookies(){let t=Date.now();return this._cookies.forEach((e,n)=>{var r;((r=e.expires)===null||r===void 0?void 0:r.getTime())<t&&this._cookies.delete(n)}),this._cookies.entries()}addCookies(t){let e=[];for(let[n,r]of this.cookies)e.push(`${n}=${r.value}`);e.length&&(t.setDisableHeaderCheck(!0),t.setRequestHeader("cookie",e.join("; ")))}appendCookies(t){for(let[e,n]of this.cookies)t.append("cookie",`${e}=${n.value}`)}};function vn(i,...t){return t.reduce((e,n)=>(i.hasOwnProperty(n)&&(e[n]=i[n]),e),{})}var pc=Ce.setTimeout,mc=Ce.clearTimeout;function Ke(i,t){t.useNativeTimers?(i.setTimeoutFn=pc.bind(Ce),i.clearTimeoutFn=mc.bind(Ce)):(i.setTimeoutFn=Ce.setTimeout.bind(Ce),i.clearTimeoutFn=Ce.clearTimeout.bind(Ce))}var gc=1.33;function po(i){return typeof i=="string"?_c(i):Math.ceil((i.byteLength||i.size)*gc)}function _c(i){let t=0,e=0;for(let n=0,r=i.length;n<r;n++)t=i.charCodeAt(n),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(n++,e+=4);return e}function yn(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function mo(i){let t="";for(let e in i)i.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(i[e]));return t}function go(i){let t={},e=i.split("&");for(let n=0,r=e.length;n<r;n++){let s=e[n].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}var Do=ce(Oe(),1),jc=(0,Do.default)("engine.io-client:transport"),Sn=class extends Error{constructor(t,e,n){super(t),this.description=e,this.context=n,this.type="TransportError"}},Ye=class extends U{constructor(t){super(),this.writable=!1,Ke(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,n){return super.emitReserved("error",new Sn(t,e,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"?this.write(t):jc("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){let e=li(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){let t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){let e=mo(t);return e.length?"?"+e:""}};var Ao=ce(Oe(),1),Be=(0,Ao.default)("engine.io-client:polling"),ci=class extends Ye{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";let e=()=>{Be("paused"),this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(Be("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){Be("pre-pause polling complete"),--n||e()})),this.writable||(Be("we are currently writing - waiting to pause"),n++,this.once("drain",function(){Be("pre-pause writing complete"),--n||e()}))}else e()}_poll(){Be("polling"),this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){Be("polling got data %s",t);let e=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};lo(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"?this._poll():Be('ignoring poll - transport state "%s"',this.readyState))}doClose(){let t=()=>{Be("writing close packet"),this.write([{type:"close"}])};this.readyState==="open"?(Be("transport open - closing"),t()):(Be("transport not open - deferring close"),this.once("open",t))}write(t){this.writable=!1,ao(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=yn()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}};var Mo=!1;try{Mo=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}var To=Mo;var Oo=ce(Oe(),1),Cr=(0,Oo.default)("engine.io-client:polling");function Wc(){}var wn=class extends ci{constructor(t){if(super(t),typeof location<"u"){let e=location.protocol==="https:",n=location.port;n||(n=e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,e){let n=this.request({method:"POST",data:t});n.on("success",e),n.on("error",(r,s)=>{this.onError("xhr post error",r,s)})}doPoll(){Cr("xhr poll");let t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,n)=>{this.onError("xhr poll error",e,n)}),this.pollXhr=t}},di=(()=>{class i extends U{constructor(e,n,r){super(),this.createRequest=e,Ke(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;let n=vn(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;let r=this._xhr=this.createRequest(n);try{Cr("xhr open %s: %s",this._method,this._uri),r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},Cr("xhr data %s",this._data),r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=i.requestsCount++,i.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Wc,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete i.requests[this._index],this._xhr=null}}_onLoad(){let e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}return i.requestsCount=0,i.requests={},i})();if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",No);else if(typeof addEventListener=="function"){let i="onpagehide"in Ce?"pagehide":"unload";addEventListener(i,No,!1)}}function No(){for(let i in di.requests)di.requests.hasOwnProperty(i)&&di.requests[i].abort()}var tp=function(){let i=Gc({xdomain:!1});return i&&i.responseType!==null}();function Gc(i){let t=i.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||To))return new XMLHttpRequest}catch{}if(!t)try{return new Ce[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}var qc=xr.default||xr,ui=class extends wn{request(t={}){var e;return Object.assign(t,{xd:this.xd,cookieJar:(e=this.socket)===null||e===void 0?void 0:e._cookieJar},this.opts),new di(n=>new qc(n),this.uri(),t)}};var eu=ce(Po(),1),tu=ce(Ir(),1),iu=ce(Fr(),1),qr=ce(Wr(),1),nu=ce(Ia(),1);var Va=ce(Oe(),1),ru=(0,Va.default)("engine.io-client:websocket"),su=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",Bn=class extends Ye{get name(){return"websocket"}doOpen(){let t=this.uri(),e=this.opts.protocols,n=su?{}:vn(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,n)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let n=t[e],r=e===t.length-1;ai(n,this.supportsBinary,s=>{try{this.doWrite(n,s)}catch{ru("websocket closed before onclose event")}r&&ze(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=yn()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}},Np=Ce.WebSocket||Ce.MozWebSocket;var xi=class extends Bn{createSocket(t,e,n){var r;if(!((r=this.socket)===null||r===void 0)&&r._cookieJar){n.headers=n.headers||{},n.headers.cookie=typeof n.headers.cookie=="string"?[n.headers.cookie]:n.headers.cookie||[];for(let[s,l]of this.socket._cookieJar.cookies)n.headers.cookie.push(`${s}=${l.value}`)}return new qr.default(t,e,n)}doWrite(t,e){let n={};t.options&&(n.compress=t.options.compress),this.opts.perMessageDeflate&&(typeof e=="string"?Buffer.byteLength(e):e.length)<this.opts.perMessageDeflate.threshold&&(n.compress=!1),this.ws.send(e,n)}};var Fa=ce(Oe(),1),Ei=(0,Fa.default)("engine.io-client:webtransport"),Si=class extends Ye{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{Ei("transport closed gracefully"),this.onClose()}).catch(t=>{Ei("transport closed due to %s",t),this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{let e=uo(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(e).getReader(),r=co();r.readable.pipeTo(t.writable),this._writer=r.writable.getWriter();let s=()=>{n.read().then(({done:d,value:u})=>{if(d){Ei("session is closed");return}Ei("received chunk: %o",u),this.onPacket(u),s()}).catch(d=>{Ei("an error occurred while reading: %s",d)})};s();let l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let n=t[e],r=e===t.length-1;this._writer.write(n).then(()=>{r&&ze(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}};var Hr={websocket:xi,webtransport:Si,polling:ui};var ou=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,au=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Nt(i){if(i.length>8e3)throw"URI too long";let t=i,e=i.indexOf("["),n=i.indexOf("]");e!=-1&&n!=-1&&(i=i.substring(0,e)+i.substring(e,n).replace(/:/g,";")+i.substring(n,i.length));let r=ou.exec(i||""),s={},l=14;for(;l--;)s[au[l]]=r[l]||"";return e!=-1&&n!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=lu(s,s.path),s.queryKey=cu(s,s.query),s}function lu(i,t){let e=/\/{2,9}/g,n=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function cu(i,t){let e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,r,s){r&&(e[r]=s)}),e}var Pa=ce(Oe(),1),L=(0,Pa.default)("engine.io-client:socket"),$r=typeof addEventListener=="function"&&typeof removeEventListener=="function",wi=[];$r&&addEventListener("offline",()=>{L("closing %d connection(s) because the network was lost",wi.length),wi.forEach(i=>i())},!1);var Un=(()=>{class i extends U{constructor(e,n){if(super(),this.binaryType=ho,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){let r=Nt(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=Nt(n.host).host);Ke(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{let s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=go(this.opts.query)),$r&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(L("adding listener for the 'offline' event"),this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},wi.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=fo()),this._open()}createTransport(e){L('creating transport "%s"',e);let n=Object.assign({},this.opts.query);n.EIO=gr,n.transport=e,this.id&&(n.sid=this.id);let r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return L("options: %j",r),new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}let e=this.opts.rememberUpgrade&&i.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";let n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){L("setting transport %s",e.name),this.transport&&(L("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){L("socket open"),this.readyState="open",i.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(L('socket receive: type "%s", data "%s"',e.type,e.data),this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}else L('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let e=this._getWritablePackets();L("flushing %d packets in socket",e.length),this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){let s=this.writeBuffer[r].data;if(s&&(n+=po(s)),r>0&&n>this._maxPayload)return L("only send %d out of %d packets",r,this.writeBuffer.length),this.writeBuffer.slice(0,r);n+=2}return L("payload size is %d (max: %d)",n,this._maxPayload),this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let e=Date.now()>this._pingTimeoutTime;return e&&(L("throttled timer detected, scheduling connection close"),this._pingTimeoutTime=0,ze(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;let l={type:e,data:n,options:r};this.emitReserved("packetCreate",l),this.writeBuffer.push(l),s&&this.once("flush",s),this.flush()}close(){let e=()=>{this._onClose("forced close"),L("socket closing - telling transport to close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(L("socket error %j",e),i.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return L("trying next transport"),this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(L('socket close with reason: "%s"',e),this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),$r&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let r=wi.indexOf(this._offlineEventListener);r!==-1&&(L("removing listener for the 'offline' event"),wi.splice(r,1))}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}return i.protocol=gr,i})(),jn=class extends Un{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade){L("starting upgrade probes");for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}}_probe(t){L('probing transport "%s"',t);let e=this.createTransport(t),n=!1;Un.priorWebsocketSuccess=!1;let r=()=>{n||(L('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",m=>{if(!n)if(m.type==="pong"&&m.data==="probe"){if(L('probe transport "%s" pong',t),this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;Un.priorWebsocketSuccess=e.name==="websocket",L('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{n||this.readyState!=="closed"&&(L("changing transport and sending upgrade packet"),h(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{L('probe transport "%s" failed',t);let _=new Error("probe error");_.transport=e.name,this.emitReserved("upgradeError",_)}}))};function s(){n||(n=!0,h(),e.close(),e=null)}let l=m=>{let _=new Error("probe error: "+m);_.transport=e.name,s(),L('probe transport "%s" failed because of error: %s',t,m),this.emitReserved("upgradeError",_)};function d(){l("transport closed")}function u(){l("socket closed")}function f(m){e&&m.name!==e.name&&(L('"%s" works - aborting "%s"',m.name,e.name),s())}let h=()=>{e.removeListener("open",r),e.removeListener("error",l),e.removeListener("close",d),this.off("close",u),this.off("upgrading",f)};e.once("open",r),e.once("error",l),e.once("close",d),this.once("close",u),this.once("upgrading",f),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){let e=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}},Ot=class extends jn{constructor(t,e={}){let n=typeof t=="object"?t:e;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(r=>Hr[r]).filter(r=>!!r)),super(t,n)}};var sm=Ot.protocol;var La=ce(Oe(),1),Ra=(0,La.default)("socket.io-client:url");function Ba(i,t="",e){let n=i;e=e||typeof location<"u"&&location,i==null&&(i=e.protocol+"//"+e.host),typeof i=="string"&&(i.charAt(0)==="/"&&(i.charAt(1)==="/"?i=e.protocol+i:i=e.host+i),/^(https?|wss?):\/\//.test(i)||(Ra("protocol-less url %s",i),typeof e<"u"?i=e.protocol+"//"+i:i="https://"+i),Ra("parse %s",i),n=Nt(i)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";let s=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port+t,n.href=n.protocol+"://"+s+(e&&e.port===n.port?"":":"+n.port),n}var Qr={};cl(Qr,{Decoder:()=>Jr,Encoder:()=>Xr,PacketType:()=>S,protocol:()=>Ha});var du=typeof ArrayBuffer=="function",uu=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i.buffer instanceof ArrayBuffer,Ua=Object.prototype.toString,hu=typeof Blob=="function"||typeof Blob<"u"&&Ua.call(Blob)==="[object BlobConstructor]",fu=typeof File=="function"||typeof File<"u"&&Ua.call(File)==="[object FileConstructor]";function Di(i){return du&&(i instanceof ArrayBuffer||uu(i))||hu&&i instanceof Blob||fu&&i instanceof File}function ki(i,t){if(!i||typeof i!="object")return!1;if(Array.isArray(i)){for(let e=0,n=i.length;e<n;e++)if(ki(i[e]))return!0;return!1}if(Di(i))return!0;if(i.toJSON&&typeof i.toJSON=="function"&&arguments.length===1)return ki(i.toJSON(),!0);for(let e in i)if(Object.prototype.hasOwnProperty.call(i,e)&&ki(i[e]))return!0;return!1}function ja(i){let t=[],e=i.data,n=i;return n.data=zr(e,t),n.attachments=t.length,{packet:n,buffers:t}}function zr(i,t){if(!i)return i;if(Di(i)){let e={_placeholder:!0,num:t.length};return t.push(i),e}else if(Array.isArray(i)){let e=new Array(i.length);for(let n=0;n<i.length;n++)e[n]=zr(i[n],t);return e}else if(typeof i=="object"&&!(i instanceof Date)){let e={};for(let n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=zr(i[n],t));return e}return i}function Wa(i,t){return i.data=Kr(i.data,t),delete i.attachments,i}function Kr(i,t){if(!i)return i;if(i&&i._placeholder===!0){if(typeof i.num=="number"&&i.num>=0&&i.num<t.length)return t[i.num];throw new Error("illegal attachments")}else if(Array.isArray(i))for(let e=0;e<i.length;e++)i[e]=Kr(i[e],t);else if(typeof i=="object")for(let e in i)Object.prototype.hasOwnProperty.call(i,e)&&(i[e]=Kr(i[e],t));return i}var qa=ce(Oe(),1),Yr=(0,qa.default)("socket.io-parser"),pu=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Ha=5,S=function(i){return i[i.CONNECT=0]="CONNECT",i[i.DISCONNECT=1]="DISCONNECT",i[i.EVENT=2]="EVENT",i[i.ACK=3]="ACK",i[i.CONNECT_ERROR=4]="CONNECT_ERROR",i[i.BINARY_EVENT=5]="BINARY_EVENT",i[i.BINARY_ACK=6]="BINARY_ACK",i}(S||{}),Xr=class{constructor(t){this.replacer=t}encode(t){return Yr("encoding packet %j",t),(t.type===S.EVENT||t.type===S.ACK)&&ki(t)?this.encodeAsBinary({type:t.type===S.EVENT?S.BINARY_EVENT:S.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===S.BINARY_EVENT||t.type===S.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),Yr("encoded %j as %s",t,e),e}encodeAsBinary(t){let e=ja(t),n=this.encodeAsString(e.packet),r=e.buffers;return r.unshift(n),r}};function Ga(i){return Object.prototype.toString.call(i)==="[object Object]"}var Jr=class i extends U{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);let n=e.type===S.BINARY_EVENT;n||e.type===S.BINARY_ACK?(e.type=n?S.EVENT:S.ACK,this.reconstructor=new Zr(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(Di(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0,n={type:Number(t.charAt(0))};if(S[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===S.BINARY_EVENT||n.type===S.BINARY_ACK){let s=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);let l=t.substring(s,e);if(l!=Number(l)||t.charAt(e)!=="-")throw new Error("Illegal attachments");n.attachments=Number(l)}if(t.charAt(e+1)==="/"){let s=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););n.nsp=t.substring(s,e)}else n.nsp="/";let r=t.charAt(e+1);if(r!==""&&Number(r)==r){let s=e+1;for(;++e;){let l=t.charAt(e);if(l==null||Number(l)!=l){--e;break}if(e===t.length)break}n.id=Number(t.substring(s,e+1))}if(t.charAt(++e)){let s=this.tryParse(t.substr(e));if(i.isPayloadValid(n.type,s))n.data=s;else throw new Error("invalid payload")}return Yr("decoded %s as %j",t,n),n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case S.CONNECT:return Ga(e);case S.DISCONNECT:return e===void 0;case S.CONNECT_ERROR:return typeof e=="string"||Ga(e);case S.EVENT:case S.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&pu.indexOf(e[0])===-1);case S.ACK:case S.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}},Zr=class{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){let e=Wa(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function Te(i,t,e){return i.on(t,e),function(){i.off(t,e)}}var $a=ce(Oe(),1),re=(0,$a.default)("socket.io-client:socket"),mu=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),It=class extends U{constructor(t,e,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let t=this.io;this.subs=[Te(t,"open",this.onopen.bind(this)),Te(t,"packet",this.onpacket.bind(this)),Te(t,"error",this.onerror.bind(this)),Te(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var n,r,s;if(mu.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;let l={type:S.EVENT,data:e};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){let h=this.ids++;re("emitting packet with ack id %d",h);let m=e.pop();this._registerAckCallback(h,m),l.id=h}let d=(r=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||r===void 0?void 0:r.writable,u=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!d?re("discard packet as the transport is not currently writable"):u?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l),this.flags={},this}_registerAckCallback(t,e){var n;let r=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(r===void 0){this.acks[t]=e;return}let s=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let d=0;d<this.sendBuffer.length;d++)this.sendBuffer[d].id===t&&(re("removing packet with ack id %d from the buffer",t),this.sendBuffer.splice(d,1));re("event with ack id %d has timed out after %d ms",t,r),e.call(this,new Error("operation has timed out"))},r),l=(...d)=>{this.io.clearTimeoutFn(s),e.apply(this,d)};l.withError=!0,this.acks[t]=l}emitWithAck(t,...e){return new Promise((n,r)=>{let s=(l,d)=>l?r(l):n(d);s.withError=!0,e.push(s),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());let n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((r,...s)=>n!==this._queue[0]?void 0:(r!==null?n.tryCount>this._opts.retries&&(re("packet [%d] is discarded after %d tries",n.id,n.tryCount),this._queue.shift(),e&&e(r)):(re("packet [%d] was successfully sent",n.id),this._queue.shift(),e&&e(null,...s)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(re("draining queue"),!this.connected||this._queue.length===0)return;let e=this._queue[0];if(e.pending&&!t){re("packet [%d] has already been sent and is waiting for an ack",e.id);return}e.pending=!0,e.tryCount++,re("sending packet [%d] (try n\xB0%d)",e.id,e.tryCount),this.flags=e.flags,this.emit.apply(this,e.args)}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){re("transport is open - connecting"),typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:S.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){re("close (%s)",t),this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){let n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case S.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case S.EVENT:case S.BINARY_EVENT:this.onevent(t);break;case S.ACK:case S.BINARY_ACK:this.onack(t);break;case S.DISCONNECT:this.ondisconnect();break;case S.CONNECT_ERROR:this.destroy();let n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){let e=t.data||[];re("emitting event %j",e),t.id!=null&&(re("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){let e=this._anyListeners.slice();for(let n of e)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){let e=this,n=!1;return function(...r){n||(n=!0,re("sending ack %j",r),e.packet({type:S.ACK,id:t,data:r}))}}onack(t){let e=this.acks[t.id];if(typeof e!="function"){re("bad ack %s",t.id);return}delete this.acks[t.id],re("calling ack %s with %j",t.id,t.data),e.withError&&t.data.unshift(null),e.apply(this,t.data)}onconnect(t,e){re("socket connected with id %s",t),this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){re("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(re("performing disconnect (%s)",this.nsp),this.packet({type:S.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){let e=this._anyListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){let e=this._anyOutgoingListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let e=this._anyOutgoingListeners.slice();for(let n of e)n.apply(this,t.data)}}};function pt(i){i=i||{},this.ms=i.min||100,this.max=i.max||1e4,this.factor=i.factor||2,this.jitter=i.jitter>0&&i.jitter<=1?i.jitter:0,this.attempts=0}pt.prototype.duration=function(){var i=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*i);i=Math.floor(t*10)&1?i+e:i-e}return Math.min(i,this.max)|0};pt.prototype.reset=function(){this.attempts=0};pt.prototype.setMin=function(i){this.ms=i};pt.prototype.setMax=function(i){this.max=i};pt.prototype.setJitter=function(i){this.jitter=i};var za=ce(Oe(),1),de=(0,za.default)("socket.io-client:manager"),Vt=class extends U{constructor(t,e){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,Ke(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((n=e.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new pt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;let r=e.parser||Qr;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(de("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;de("opening %s",this.uri),this.engine=new Ot(this.uri,this.opts);let e=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;let r=Te(e,"open",function(){n.onopen(),t&&t()}),s=d=>{de("error"),this.cleanup(),this._readyState="closed",this.emitReserved("error",d),t?t(d):this.maybeReconnectOnOpen()},l=Te(e,"error",s);if(this._timeout!==!1){let d=this._timeout;de("connect attempt will timeout after %d",d);let u=this.setTimeoutFn(()=>{de("connect attempt timed out after %d",d),r(),s(new Error("timeout")),e.close()},d);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(r),this.subs.push(l),this}connect(t){return this.open(t)}onopen(){de("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");let t=this.engine;this.subs.push(Te(t,"ping",this.onping.bind(this)),Te(t,"data",this.ondata.bind(this)),Te(t,"error",this.onerror.bind(this)),Te(t,"close",this.onclose.bind(this)),Te(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){ze(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){de("error",t),this.emitReserved("error",t)}socket(t,e){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new It(this,t,e),this.nsps[t]=n),n}_destroy(t){let e=Object.keys(this.nsps);for(let n of e)if(this.nsps[n].active){de("socket %s is still active, skipping close",n);return}this._close()}_packet(t){de("writing packet %j",t);let e=this.encoder.encode(t);for(let n=0;n<e.length;n++)this.engine.write(e[n],t.options)}cleanup(){de("cleanup"),this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){de("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var n;de("closed due to %s",t),this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let t=this;if(this.backoff.attempts>=this._reconnectionAttempts)de("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let e=this.backoff.duration();de("will wait %dms before reconnect attempt",e),this._reconnecting=!0;let n=this.setTimeoutFn(()=>{t.skipReconnect||(de("attempting reconnect"),this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(r=>{r?(de("reconnect attempt error"),t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",r)):(de("reconnect success"),t.onreconnect())}))},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){let t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}};var Ya=ce(Oe(),1),Ka=(0,Ya.default)("socket.io-client"),Ai={};function Qe(i,t){typeof i=="object"&&(t=i,i=void 0),t=t||{};let e=Ba(i,t.path||"/socket.io"),n=e.source,r=e.id,s=e.path,l=Ai[r]&&s in Ai[r].nsps,d=t.forceNew||t["force new connection"]||t.multiplex===!1||l,u;return d?(Ka("ignoring socket cache for %s",n),u=new Vt(n,t)):(Ai[r]||(Ka("new io instance for %s",n),Ai[r]=new Vt(n,t)),u=Ai[r]),e.query&&!t.query&&(t.query=e.queryKey),u.socket(e.path,t)}Object.assign(Qe,{Manager:Vt,Socket:It,io:Qe,connect:Qe});function gu(i,t){if(i&1){let e=pe();a(0,"tr")(1,"td"),c(2),o(),a(3,"td"),c(4),o(),a(5,"td",13),c(6),o(),a(7,"td")(8,"button",14),E("click",function(){let r=j(e).$implicit,s=k(2);return W(s.translate(r.package_description,r._id))}),c(9,"Translate"),o()()()}if(i&2){let e=t.$implicit;p(2),F(e.package_title),p(2),F(e.package_description),p(),me("id",e._id),p(),F(e.translated)}}function _u(i,t){if(i&1&&(a(0,"table",10)(1,"thead",11)(2,"tr")(3,"th"),c(4,"Title"),o(),a(5,"th"),c(6,"Description"),o(),a(7,"th"),c(8,"Translated Description"),o(),a(9,"th"),c(10,"Translate Description"),o()()(),a(11,"tbody"),I(12,gu,10,4,"tr",12),o()()),i&2){let e=k();p(12),M("ngForOf",e.packages)}}var Xa=Qe(),Wn=class i{constructor(t,e){this.databaseService=e}packages=[];target="ar";loading=!0;ngOnInit(){Xa.on("translate",t=>{let e=document.getElementById(t.id);e&&(e.innerHTML=t.text)}),this.databaseService.getPackages().subscribe(t=>{this.packages=t,this.loading=!1})}translate(t,e){let n=document.getElementById(e);n&&(n.innerHTML="Translating..."),Xa.emit("translate",{target:this.target,text:t,id:e})}static \u0275fac=function(e){return new(e||i)(v(ji),v(w))};static \u0275cmp=C({type:i,selectors:[["app-translate-description"]],standalone:!0,features:[x],decls:15,vars:2,consts:[[2,"height","70%","display","flex","justify-content","center","align-items","center"],[1,"card",2,"padding","20px","width","1000px","display","flex","flex-direction","column"],[2,"text-align","center","margin-bottom","20px"],[1,"mb-3",2,"margin-left","280px"],[1,"form-label"],["aria-label","Default select example",1,"form-select",2,"width","400px",3,"ngModelChange","ngModel"],["value","ar","selected",""],["value","fr"],["value","de"],["class","table","style","margin-top: 0px;",4,"ngIf"],[1,"table",2,"margin-top","0px"],[1,"table"],[4,"ngFor","ngForOf"],[3,"id"],[1,"btn","btn-primary",2,"margin-bottom","0",3,"click"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"form",1)(2,"h2",2),c(3,"Translate Description"),o(),a(4,"div",3)(5,"label",4),c(6,"Target Language"),o(),a(7,"select",5),O("ngModelChange",function(s){return N(n.target,s)||(n.target=s),s}),a(8,"option",6),c(9,"Arabic"),o(),a(10,"option",7),c(11,"French"),o(),a(12,"option",8),c(13,"German"),o()()(),I(14,_u,13,1,"table",9),o()()),e&2&&(p(7),T("ngModel",n.target),p(7),M("ngIf",!n.loading))},dependencies:[B,z,Se,we,_e,ae,$,ne,H,Q,Z,ge]})};function vu(i,t){if(i&1){let e=pe();a(0,"tr")(1,"td"),c(2),o(),a(3,"td"),c(4),o(),fe(5,"td",7),a(6,"td")(7,"button",8),E("click",function(){let r=j(e).$implicit,s=k(2);return W(s.textToSpeech(r.driver_licence,r._id))}),c(8,"Generate"),o()()()}if(i&2){let e=t.$implicit;p(2),F(e.driver_name),p(2),F(e.driver_licence),p(),me("id",e._id)}}function yu(i,t){if(i&1&&(a(0,"table",4)(1,"thead",5)(2,"tr")(3,"th"),c(4,"Name"),o(),a(5,"th"),c(6,"Licence"),o(),a(7,"th"),c(8,"Licence Audio"),o(),a(9,"th"),c(10,"Generate Audio"),o()()(),a(11,"tbody"),I(12,vu,9,3,"tr",6),o()()),i&2){let e=k();p(12),M("ngForOf",e.drivers)}}var Ja=Qe(),Gn=class i{constructor(t){this.databaseService=t}drivers=[];loading=!0;ngOnInit(){Ja.on("textToSpeech",t=>{let e=new window.AudioContext;e.decodeAudioData(t.audioContent,n=>{let r=e.createBufferSource();r.buffer=n,r.connect(e.destination),r.start(0);let s=new Blob([t.audioContent],{type:"audio/mp3"}),l=URL.createObjectURL(s),d=document.createElement("audio");d.src=l,d.controls=!0;let u=document.getElementById(t.id);u&&(u.innerHTML="",u.appendChild(d))},n=>{console.error("Error decoding audio data:",n)})}),this.databaseService.getDrivers().subscribe(t=>{this.drivers=t,this.loading=!1})}textToSpeech(t,e){let n=document.getElementById(e);n&&(n.innerHTML="Generating Speech..."),Ja.emit("textToSpeech",{licence:t,id:e})}static \u0275fac=function(e){return new(e||i)(v(w))};static \u0275cmp=C({type:i,selectors:[["app-text-to-speech"]],standalone:!0,features:[x],decls:5,vars:1,consts:[[2,"height","70%","display","flex","justify-content","center","align-items","center"],[1,"card",2,"padding","20px","width","1000px","display","flex","flex-direction","column"],[2,"text-align","center","margin-bottom","20px"],["class","table","style","margin-top: 0px;",4,"ngIf"],[1,"table",2,"margin-top","0px"],[1,"table"],[4,"ngFor","ngForOf"],[3,"id"],[1,"btn","btn-primary",2,"margin-bottom","0",3,"click"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"form",1)(2,"h2",2),c(3,"Generate Licence Audio"),o(),I(4,yu,13,1,"table",3),o()()),e&2&&(p(4),M("ngIf",!n.loading))},dependencies:[B,z,$,H,Q,Z,ge]})};function bu(i,t){if(i&1){let e=pe();a(0,"tr")(1,"td"),c(2),o(),a(3,"td"),c(4),o(),fe(5,"td",7),a(6,"td")(7,"button",8),E("click",function(){let r=j(e).$implicit,s=k(2);return W(s.calculateDistance(r.package_destination,r._id))}),c(8,"Calculate"),o()()()}if(i&2){let e=t.$implicit;p(2),F(e.package_title),p(2),F(e.package_destination),p(),me("id",e._id)}}function Cu(i,t){if(i&1&&(a(0,"table",4)(1,"thead",5)(2,"tr")(3,"th"),c(4,"Title"),o(),a(5,"th"),c(6,"Destination"),o(),a(7,"th"),c(8,"Distance"),o(),a(9,"th"),c(10,"Calculate Distance"),o()()(),a(11,"tbody"),I(12,bu,9,3,"tr",6),o()()),i&2){let e=k();p(12),M("ngForOf",e.packages)}}var Za=Qe(),qn=class i{constructor(t,e){this.databaseService=e}packages=[];loading=!0;ngOnInit(){Za.on("generateText",t=>{let e=document.getElementById(t.id);e&&(e.innerHTML=t.text.response.candidates[0].content.parts[0].text)}),this.databaseService.getPackages().subscribe(t=>{this.packages=t,this.loading=!1})}calculateDistance(t,e){Za.emit("generateText",{text:t,id:e})}static \u0275fac=function(e){return new(e||i)(v(ji),v(w))};static \u0275cmp=C({type:i,selectors:[["app-generative-ai"]],standalone:!0,features:[x],decls:5,vars:1,consts:[[2,"height","70%","display","flex","justify-content","center","align-items","center"],[1,"card",2,"padding","20px","width","1000px","display","flex","flex-direction","column"],[2,"text-align","center","margin-bottom","20px"],["class","table","style","margin-top: 0px;",4,"ngIf"],[1,"table",2,"margin-top","0px"],[1,"table"],[4,"ngFor","ngForOf"],[3,"id"],[1,"btn","btn-primary",2,"margin-bottom","0",3,"click"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"form",1)(2,"h2",2),c(3,"Distance Calculator (AI)"),o(),I(4,Cu,13,1,"table",3),o()()),e&2&&(p(4),M("ngIf",!n.loading))},dependencies:[B,z,$,H,Q,Z,ge]})};var Qa=[{path:"",component:zi},{path:"login",component:fn},{path:"signup",component:pn},{path:"drivers",component:an,canActivate:[De]},{path:"drivers/add",component:nn,canActivate:[De]},{path:"drivers/update",component:dn,canActivate:[De]},{path:"drivers/delete",component:sn,canActivate:[De]},{path:"packages",component:cn,canActivate:[De]},{path:"packages/add",component:rn,canActivate:[De]},{path:"packages/update",component:un,canActivate:[De]},{path:"packages/delete",component:on,canActivate:[De]},{path:"stats",component:hn,canActivate:[De]},{path:"translate",component:Wn,canActivate:[De]},{path:"text-to-speech",component:Gn,canActivate:[De]},{path:"generative-ai",component:qn,canActivate:[De]},{path:"invalid",component:mn},{path:"**",component:$i,pathMatch:"full"}];var Ti="Service workers are disabled or not supported by this browser";function xu(i){return zn(()=>rs(new Error(i)))}var Ft=class{constructor(t){if(this.serviceWorker=t,!t)this.worker=this.events=this.registration=xu(Ti);else{let n=Kn(t,"controllerchange").pipe(qe(()=>t.controller)),r=zn(()=>Fi(t.controller)),s=os(r,n);this.worker=s.pipe(Lt(h=>!!h)),this.registration=this.worker.pipe(Bt(()=>t.getRegistration()));let f=Kn(t,"message").pipe(qe(h=>h.data)).pipe(Lt(h=>h&&h.type)).pipe(cs());f.connect(),this.events=f}}postMessage(t,e){return this.worker.pipe(lt(1),ds(n=>{n.postMessage(R({action:t},e))})).toPromise().then(()=>{})}postMessageWithOperation(t,e,n){let r=this.waitForOperationCompleted(n),s=this.postMessage(t,e);return Promise.all([s,r]).then(([,l])=>l)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(t){let e;return typeof t=="string"?e=n=>n.type===t:e=n=>t.includes(n.type),this.events.pipe(Lt(e))}nextEventOfType(t){return this.eventsOfType(t).pipe(lt(1))}waitForOperationCompleted(t){return this.eventsOfType("OPERATION_COMPLETED").pipe(Lt(e=>e.nonce===t),lt(1),qe(e=>{if(e.result!==void 0)return e.result;throw new Error(e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},Eu=(()=>{class i{get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,this.pushManager=null,this.subscriptionChanges=new Ii,!e.isEnabled){this.messages=mt,this.notificationClicks=mt,this.subscription=mt;return}this.messages=this.sw.eventsOfType("PUSH").pipe(qe(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(qe(r=>r.data)),this.pushManager=this.sw.registration.pipe(qe(r=>r.pushManager));let n=this.pushManager.pipe(Bt(r=>r.getSubscription()));this.subscription=Yn(n,this.subscriptionChanges)}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Ti));let n={userVisibleOnly:!0},r=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(r.length));for(let l=0;l<r.length;l++)s[l]=r.charCodeAt(l);return n.applicationServerKey=s,this.pushManager.pipe(Bt(l=>l.subscribe(n)),lt(1)).toPromise().then(l=>(this.subscriptionChanges.next(l),l))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Ti));let e=n=>{if(n===null)throw new Error("Not subscribed to push notifications.");return n.unsubscribe().then(r=>{if(!r)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(lt(1),Bt(e)).toPromise()}decodeBase64(e){return atob(e)}static{this.\u0275fac=function(n){return new(n||i)(Ut(Ft))}}static{this.\u0275prov=gt({token:i,factory:i.\u0275fac})}}return i})(),Su=(()=>{class i{get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=mt,this.unrecoverable=mt;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Ti));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Ti));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static{this.\u0275fac=function(n){return new(n||i)(Ut(Ft))}}static{this.\u0275prov=gt({token:i,factory:i.\u0275fac})}}return i})();var el=new tt("");function wu(i,t,e,n){return()=>{if(!(nr(n)&&"serviceWorker"in navigator&&e.enabled!==!1))return;let r=i.get(fs),s=i.get(er);r.runOutsideAngular(()=>{let d=navigator.serviceWorker,u=()=>d.controller?.postMessage({action:"INITIALIZE"});d.addEventListener("controllerchange",u),s.onDestroy(()=>{d.removeEventListener("controllerchange",u)})});let l;if(typeof e.registrationStrategy=="function")l=e.registrationStrategy();else{let[d,...u]=(e.registrationStrategy||"registerWhenStable:30000").split(":");switch(d){case"registerImmediately":l=Fi(null);break;case"registerWithDelay":l=tl(+u[0]||0);break;case"registerWhenStable":let f=Vi(i.get(er).whenStable());l=u[0]?Yn(f,tl(+u[0])):f;break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${e.registrationStrategy}`)}}r.runOutsideAngular(()=>l.pipe(lt(1)).subscribe(()=>navigator.serviceWorker.register(t,{scope:e.scope}).catch(d=>console.error("Service worker registration failed with:",d))))}}function tl(i){return Fi(null).pipe(ls(i))}function ku(i,t){return new Ft(nr(t)&&i.enabled!==!1?navigator.serviceWorker:void 0)}var Mi=class{};function es(i,t={}){return hs([Eu,Su,{provide:el,useValue:i},{provide:Mi,useValue:t},{provide:Ft,useFactory:ku,deps:[Mi,Zn]},{provide:ms,useFactory:wu,deps:[Jn,el,Mi,Zn],multi:!0}])}var il={providers:[gs({eventCoalescing:!0}),As(Qa),Ss(),xs(),es("ngsw-worker.js",{enabled:!tr(),registrationStrategy:"registerWhenStable:30000"}),es("ngsw-worker.js",{enabled:!tr(),registrationStrategy:"registerWhenStable:30000"})]};var Du={providers:[ws()]},nl=ys(il,Du);var Au=()=>Es(Hi,nl),$g=Au;export{vo as a,$g as b};
